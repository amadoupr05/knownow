(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Km={exports:{}},Ol={},Jm={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),yg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),bg=Symbol.for("react.strict_mode"),wg=Symbol.for("react.profiler"),jg=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),kg=Symbol.for("react.forward_ref"),Sg=Symbol.for("react.suspense"),_g=Symbol.for("react.memo"),Cg=Symbol.for("react.lazy"),uh=Symbol.iterator;function Eg(e){return e===null||typeof e!="object"?null:(e=uh&&e[uh]||e["@@iterator"],typeof e=="function"?e:null)}var Ym={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xm=Object.assign,Zm={};function Qn(e,t,r){this.props=e,this.context=t,this.refs=Zm,this.updater=r||Ym}Qn.prototype.isReactComponent={};Qn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ef(){}ef.prototype=Qn.prototype;function P0(e,t,r){this.props=e,this.context=t,this.refs=Zm,this.updater=r||Ym}var L0=P0.prototype=new ef;L0.constructor=P0;Xm(L0,Qn.prototype);L0.isPureReactComponent=!0;var dh=Array.isArray,tf=Object.prototype.hasOwnProperty,O0={current:null},sf={key:!0,ref:!0,__self:!0,__source:!0};function rf(e,t,r){var n,a={},l=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(l=""+t.key),t)tf.call(t,n)&&!sf.hasOwnProperty(n)&&(a[n]=t[n]);var h=arguments.length-2;if(h===1)a.children=r;else if(1<h){for(var m=Array(h),x=0;x<h;x++)m[x]=arguments[x+2];a.children=m}if(e&&e.defaultProps)for(n in h=e.defaultProps,h)a[n]===void 0&&(a[n]=h[n]);return{$$typeof:ra,type:e,key:l,ref:u,props:a,_owner:O0.current}}function Tg(e,t){return{$$typeof:ra,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function I0(e){return typeof e=="object"&&e!==null&&e.$$typeof===ra}function Dg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var hh=/\/+/g;function Wo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Dg(""+e.key):t.toString(36)}function Xa(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ra:case yg:u=!0}}if(u)return u=e,a=a(u),e=n===""?"."+Wo(u,0):n,dh(a)?(r="",e!=null&&(r=e.replace(hh,"$&/")+"/"),Xa(a,t,r,"",function(x){return x})):a!=null&&(I0(a)&&(a=Tg(a,r+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(hh,"$&/")+"/")+e)),t.push(a)),1;if(u=0,n=n===""?".":n+":",dh(e))for(var h=0;h<e.length;h++){l=e[h];var m=n+Wo(l,h);u+=Xa(l,t,r,m,a)}else if(m=Eg(e),typeof m=="function")for(e=m.call(e),h=0;!(l=e.next()).done;)l=l.value,m=n+Wo(l,h++),u+=Xa(l,t,r,m,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Aa(e,t,r){if(e==null)return e;var n=[],a=0;return Xa(e,n,"","",function(l){return t.call(r,l,a++)}),n}function Mg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bt={current:null},Za={transition:null},Ag={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Za,ReactCurrentOwner:O0};function nf(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Aa,forEach:function(e,t,r){Aa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!I0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=Qn;Me.Fragment=vg;Me.Profiler=wg;Me.PureComponent=P0;Me.StrictMode=bg;Me.Suspense=Sg;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ag;Me.act=nf;Me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Xm({},e.props),a=e.key,l=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,u=O0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(m in t)tf.call(t,m)&&!sf.hasOwnProperty(m)&&(n[m]=t[m]===void 0&&h!==void 0?h[m]:t[m])}var m=arguments.length-2;if(m===1)n.children=r;else if(1<m){h=Array(m);for(var x=0;x<m;x++)h[x]=arguments[x+2];n.children=h}return{$$typeof:ra,type:e.type,key:a,ref:l,props:n,_owner:u}};Me.createContext=function(e){return e={$$typeof:Ng,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jg,_context:e},e.Consumer=e};Me.createElement=rf;Me.createFactory=function(e){var t=rf.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:kg,render:e}};Me.isValidElement=I0;Me.lazy=function(e){return{$$typeof:Cg,_payload:{_status:-1,_result:e},_init:Mg}};Me.memo=function(e,t){return{$$typeof:_g,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=Za.transition;Za.transition={};try{e()}finally{Za.transition=t}};Me.unstable_act=nf;Me.useCallback=function(e,t){return Bt.current.useCallback(e,t)};Me.useContext=function(e){return Bt.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return Bt.current.useDeferredValue(e)};Me.useEffect=function(e,t){return Bt.current.useEffect(e,t)};Me.useId=function(){return Bt.current.useId()};Me.useImperativeHandle=function(e,t,r){return Bt.current.useImperativeHandle(e,t,r)};Me.useInsertionEffect=function(e,t){return Bt.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return Bt.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return Bt.current.useMemo(e,t)};Me.useReducer=function(e,t,r){return Bt.current.useReducer(e,t,r)};Me.useRef=function(e){return Bt.current.useRef(e)};Me.useState=function(e){return Bt.current.useState(e)};Me.useSyncExternalStore=function(e,t,r){return Bt.current.useSyncExternalStore(e,t,r)};Me.useTransition=function(){return Bt.current.useTransition()};Me.version="18.3.1";Jm.exports=Me;var F=Jm.exports;const Bg=xg(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=F,Fg=Symbol.for("react.element"),Pg=Symbol.for("react.fragment"),Lg=Object.prototype.hasOwnProperty,Og=zg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ig={key:!0,ref:!0,__self:!0,__source:!0};function af(e,t,r){var n,a={},l=null,u=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)Lg.call(t,n)&&!Ig.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Fg,type:e,key:l,ref:u,props:a,_owner:Og.current}}Ol.Fragment=Pg;Ol.jsx=af;Ol.jsxs=af;Km.exports=Ol;var s=Km.exports,lf={exports:{}},Zt={},of={exports:{}},cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,de){var ce=J.length;J.push(de);e:for(;0<ce;){var ne=ce-1>>>1,Se=J[ne];if(0<a(Se,de))J[ne]=de,J[ce]=Se,ce=ne;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var de=J[0],ce=J.pop();if(ce!==de){J[0]=ce;e:for(var ne=0,Se=J.length,_e=Se>>>1;ne<_e;){var Ae=2*(ne+1)-1,te=J[Ae],he=Ae+1,me=J[he];if(0>a(te,ce))he<Se&&0>a(me,te)?(J[ne]=me,J[he]=ce,ne=he):(J[ne]=te,J[Ae]=ce,ne=Ae);else if(he<Se&&0>a(me,ce))J[ne]=me,J[he]=ce,ne=he;else break e}}return de}function a(J,de){var ce=J.sortIndex-de.sortIndex;return ce!==0?ce:J.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var m=[],x=[],g=1,N=null,w=3,E=!1,S=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(J){for(var de=r(x);de!==null;){if(de.callback===null)n(x);else if(de.startTime<=J)n(x),de.sortIndex=de.expirationTime,t(m,de);else break;de=r(x)}}function z(J){if(D=!1,C(J),!S)if(r(m)!==null)S=!0,W($);else{var de=r(x);de!==null&&re(z,de.startTime-J)}}function $(J,de){S=!1,D&&(D=!1,j(Z),Z=-1),E=!0;var ce=w;try{for(C(de),N=r(m);N!==null&&(!(N.expirationTime>de)||J&&!G());){var ne=N.callback;if(typeof ne=="function"){N.callback=null,w=N.priorityLevel;var Se=ne(N.expirationTime<=de);de=e.unstable_now(),typeof Se=="function"?N.callback=Se:N===r(m)&&n(m),C(de)}else n(m);N=r(m)}if(N!==null)var _e=!0;else{var Ae=r(x);Ae!==null&&re(z,Ae.startTime-de),_e=!1}return _e}finally{N=null,w=ce,E=!1}}var U=!1,Y=null,Z=-1,X=5,ee=-1;function G(){return!(e.unstable_now()-ee<X)}function V(){if(Y!==null){var J=e.unstable_now();ee=J;var de=!0;try{de=Y(!0,J)}finally{de?ie():(U=!1,Y=null)}}else U=!1}var ie;if(typeof b=="function")ie=function(){b(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,se=q.port2;q.port1.onmessage=V,ie=function(){se.postMessage(null)}}else ie=function(){A(V,0)};function W(J){Y=J,U||(U=!0,ie())}function re(J,de){Z=A(function(){J(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){S||E||(S=!0,W($))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return r(m)},e.unstable_next=function(J){switch(w){case 1:case 2:case 3:var de=3;break;default:de=w}var ce=w;w=de;try{return J()}finally{w=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,de){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ce=w;w=J;try{return de()}finally{w=ce}},e.unstable_scheduleCallback=function(J,de,ce){var ne=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ne+ce:ne):ce=ne,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ce+Se,J={id:g++,callback:de,priorityLevel:J,startTime:ce,expirationTime:Se,sortIndex:-1},ce>ne?(J.sortIndex=ce,t(x,J),r(m)===null&&J===r(x)&&(D?(j(Z),Z=-1):D=!0,re(z,ce-ne))):(J.sortIndex=Se,t(m,J),S||E||(S=!0,W($))),J},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(J){var de=w;return function(){var ce=w;w=de;try{return J.apply(this,arguments)}finally{w=ce}}}})(cf);of.exports=cf;var Rg=of.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg=F,Yt=Rg;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uf=new Set,Fi={};function rn(e,t){On(e,t),On(e+"Capture",t)}function On(e,t){for(Fi[e]=t,e=0;e<t.length;e++)uf.add(t[e])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=Object.prototype.hasOwnProperty,$g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mh={},fh={};function Ug(e){return Mc.call(fh,e)?!0:Mc.call(mh,e)?!1:$g.test(e)?fh[e]=!0:(mh[e]=!0,!1)}function Hg(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wg(e,t,r,n){if(t===null||typeof t>"u"||Hg(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zt(e,t,r,n,a,l,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=u}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nt[e]=new zt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Nt[t]=new zt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nt[e]=new zt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nt[e]=new zt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nt[e]=new zt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nt[e]=new zt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nt[e]=new zt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nt[e]=new zt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nt[e]=new zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var R0=/[\-:]([a-z])/g;function q0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R0,q0);Nt[t]=new zt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R0,q0);Nt[t]=new zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R0,q0);Nt[t]=new zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nt[e]=new zt(e,1,!1,e.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nt[e]=new zt(e,1,!1,e.toLowerCase(),null,!0,!0)});function $0(e,t,r,n){var a=Nt.hasOwnProperty(t)?Nt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wg(t,r,a,n)&&(r=null),n||a===null?Ug(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var rr=qg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ba=Symbol.for("react.element"),bn=Symbol.for("react.portal"),wn=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),Ac=Symbol.for("react.profiler"),df=Symbol.for("react.provider"),hf=Symbol.for("react.context"),H0=Symbol.for("react.forward_ref"),Bc=Symbol.for("react.suspense"),zc=Symbol.for("react.suspense_list"),W0=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),mf=Symbol.for("react.offscreen"),ph=Symbol.iterator;function oi(e){return e===null||typeof e!="object"?null:(e=ph&&e[ph]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,Vo;function yi(e){if(Vo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Vo=t&&t[1]||""}return`
`+Vo+e}var Go=!1;function Qo(e,t){if(!e||Go)return"";Go=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var n=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){n=x}e.call(t.prototype)}else{try{throw Error()}catch(x){n=x}e()}}catch(x){if(x&&n&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),l=n.stack.split(`
`),u=a.length-1,h=l.length-1;1<=u&&0<=h&&a[u]!==l[h];)h--;for(;1<=u&&0<=h;u--,h--)if(a[u]!==l[h]){if(u!==1||h!==1)do if(u--,h--,0>h||a[u]!==l[h]){var m=`
`+a[u].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=u&&0<=h);break}}}finally{Go=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yi(e):""}function Vg(e){switch(e.tag){case 5:return yi(e.type);case 16:return yi("Lazy");case 13:return yi("Suspense");case 19:return yi("SuspenseList");case 0:case 2:case 15:return e=Qo(e.type,!1),e;case 11:return e=Qo(e.type.render,!1),e;case 1:return e=Qo(e.type,!0),e;default:return""}}function Fc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wn:return"Fragment";case bn:return"Portal";case Ac:return"Profiler";case U0:return"StrictMode";case Bc:return"Suspense";case zc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hf:return(e.displayName||"Context")+".Consumer";case df:return(e._context.displayName||"Context")+".Provider";case H0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W0:return t=e.displayName||null,t!==null?t:Fc(e.type)||"Memo";case hr:t=e._payload,e=e._init;try{return Fc(e(t))}catch{}}return null}function Gg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fc(t);case 8:return t===U0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Er(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ff(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qg(e){var t=ff(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(u){n=""+u,l.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function za(e){e._valueTracker||(e._valueTracker=Qg(e))}function pf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ff(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pc(e,t){var r=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function xh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Er(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xf(e,t){t=t.checked,t!=null&&$0(e,"checked",t,!1)}function Lc(e,t){xf(e,t);var r=Er(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oc(e,t.type,r):t.hasOwnProperty("defaultValue")&&Oc(e,t.type,Er(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Oc(e,t,r){(t!=="number"||ul(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var vi=Array.isArray;function An(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Er(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ic(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ue(92));if(vi(r)){if(1<r.length)throw Error(ue(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Er(r)}}function gf(e,t){var r=Er(t.value),n=Er(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function vh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fa,vf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fa=Fa||document.createElement("div"),Fa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kg=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(e){Kg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ni[t]=Ni[e]})});function bf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ni.hasOwnProperty(e)&&Ni[e]?(""+t).trim():t+"px"}function wf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=bf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Jg=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qc(e,t){if(t){if(Jg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function $c(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=null;function V0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hc=null,Bn=null,zn=null;function bh(e){if(e=aa(e)){if(typeof Hc!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=Ul(t),Hc(e.stateNode,e.type,t))}}function jf(e){Bn?zn?zn.push(e):zn=[e]:Bn=e}function Nf(){if(Bn){var e=Bn,t=zn;if(zn=Bn=null,bh(e),t)for(e=0;e<t.length;e++)bh(t[e])}}function kf(e,t){return e(t)}function Sf(){}var Ko=!1;function _f(e,t,r){if(Ko)return e(t,r);Ko=!0;try{return kf(e,t,r)}finally{Ko=!1,(Bn!==null||zn!==null)&&(Sf(),Nf())}}function Li(e,t){var r=e.stateNode;if(r===null)return null;var n=Ul(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ue(231,t,typeof r));return r}var Wc=!1;if(Zs)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{Wc=!1}function Yg(e,t,r,n,a,l,u,h,m){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(g){this.onError(g)}}var ki=!1,dl=null,hl=!1,Vc=null,Xg={onError:function(e){ki=!0,dl=e}};function Zg(e,t,r,n,a,l,u,h,m){ki=!1,dl=null,Yg.apply(Xg,arguments)}function e4(e,t,r,n,a,l,u,h,m){if(Zg.apply(this,arguments),ki){if(ki){var x=dl;ki=!1,dl=null}else throw Error(ue(198));hl||(hl=!0,Vc=x)}}function nn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Cf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wh(e){if(nn(e)!==e)throw Error(ue(188))}function t4(e){var t=e.alternate;if(!t){if(t=nn(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return wh(a),e;if(l===n)return wh(a),t;l=l.sibling}throw Error(ue(188))}if(r.return!==n.return)r=a,n=l;else{for(var u=!1,h=a.child;h;){if(h===r){u=!0,r=a,n=l;break}if(h===n){u=!0,n=a,r=l;break}h=h.sibling}if(!u){for(h=l.child;h;){if(h===r){u=!0,r=l,n=a;break}if(h===n){u=!0,n=l,r=a;break}h=h.sibling}if(!u)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?e:t}function Ef(e){return e=t4(e),e!==null?Tf(e):null}function Tf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tf(e);if(t!==null)return t;e=e.sibling}return null}var Df=Yt.unstable_scheduleCallback,jh=Yt.unstable_cancelCallback,s4=Yt.unstable_shouldYield,r4=Yt.unstable_requestPaint,ot=Yt.unstable_now,n4=Yt.unstable_getCurrentPriorityLevel,G0=Yt.unstable_ImmediatePriority,Mf=Yt.unstable_UserBlockingPriority,ml=Yt.unstable_NormalPriority,i4=Yt.unstable_LowPriority,Af=Yt.unstable_IdlePriority,Il=null,Ps=null;function a4(e){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(Il,e,void 0,(e.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:c4,l4=Math.log,o4=Math.LN2;function c4(e){return e>>>=0,e===0?32:31-(l4(e)/o4|0)|0}var Pa=64,La=4194304;function bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,u=r&268435455;if(u!==0){var h=u&~a;h!==0?n=bi(h):(l&=u,l!==0&&(n=bi(l)))}else u=r&~a,u!==0?n=bi(u):l!==0&&(n=bi(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ws(t),a=1<<r,n|=e[r],t&=~a;return n}function u4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d4(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var u=31-ws(l),h=1<<u,m=a[u];m===-1?(!(h&r)||h&n)&&(a[u]=u4(h,t)):m<=t&&(e.expiredLanes|=h),l&=~h}}function Gc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bf(){var e=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),e}function Jo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function na(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ws(t),e[t]=r}function h4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ws(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function Q0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ws(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Re=0;function zf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ff,K0,Pf,Lf,Of,Qc=!1,Oa=[],br=null,wr=null,jr=null,Oi=new Map,Ii=new Map,fr=[],m4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(e,t){switch(e){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function ui(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=aa(t),t!==null&&K0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function f4(e,t,r,n,a){switch(t){case"focusin":return br=ui(br,e,t,r,n,a),!0;case"dragenter":return wr=ui(wr,e,t,r,n,a),!0;case"mouseover":return jr=ui(jr,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return Oi.set(l,ui(Oi.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Ii.set(l,ui(Ii.get(l)||null,e,t,r,n,a)),!0}return!1}function If(e){var t=Wr(e.target);if(t!==null){var r=nn(t);if(r!==null){if(t=r.tag,t===13){if(t=Cf(r),t!==null){e.blockedOn=t,Of(e.priority,function(){Pf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function el(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Uc=n,r.target.dispatchEvent(n),Uc=null}else return t=aa(r),t!==null&&K0(t),e.blockedOn=r,!1;t.shift()}return!0}function kh(e,t,r){el(e)&&r.delete(t)}function p4(){Qc=!1,br!==null&&el(br)&&(br=null),wr!==null&&el(wr)&&(wr=null),jr!==null&&el(jr)&&(jr=null),Oi.forEach(kh),Ii.forEach(kh)}function di(e,t){e.blockedOn===t&&(e.blockedOn=null,Qc||(Qc=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,p4)))}function Ri(e){function t(a){return di(a,e)}if(0<Oa.length){di(Oa[0],e);for(var r=1;r<Oa.length;r++){var n=Oa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(br!==null&&di(br,e),wr!==null&&di(wr,e),jr!==null&&di(jr,e),Oi.forEach(t),Ii.forEach(t),r=0;r<fr.length;r++)n=fr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<fr.length&&(r=fr[0],r.blockedOn===null);)If(r),r.blockedOn===null&&fr.shift()}var Fn=rr.ReactCurrentBatchConfig,pl=!0;function x4(e,t,r,n){var a=Re,l=Fn.transition;Fn.transition=null;try{Re=1,J0(e,t,r,n)}finally{Re=a,Fn.transition=l}}function g4(e,t,r,n){var a=Re,l=Fn.transition;Fn.transition=null;try{Re=4,J0(e,t,r,n)}finally{Re=a,Fn.transition=l}}function J0(e,t,r,n){if(pl){var a=Kc(e,t,r,n);if(a===null)ac(e,t,n,xl,r),Nh(e,n);else if(f4(a,e,t,r,n))n.stopPropagation();else if(Nh(e,n),t&4&&-1<m4.indexOf(e)){for(;a!==null;){var l=aa(a);if(l!==null&&Ff(l),l=Kc(e,t,r,n),l===null&&ac(e,t,n,xl,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else ac(e,t,n,null,r)}}var xl=null;function Kc(e,t,r,n){if(xl=null,e=V0(n),e=Wr(e),e!==null)if(t=nn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Cf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xl=e,null}function Rf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n4()){case G0:return 1;case Mf:return 4;case ml:case i4:return 16;case Af:return 536870912;default:return 16}default:return 16}}var gr=null,Y0=null,tl=null;function qf(){if(tl)return tl;var e,t=Y0,r=t.length,n,a="value"in gr?gr.value:gr.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===a[l-n];n++);return tl=a.slice(e,1<n?1-n:void 0)}function sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ia(){return!0}function Sh(){return!1}function es(e){function t(r,n,a,l,u){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(r=e[h],this[h]=r?r(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ia:Sh,this.isPropagationStopped=Sh,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),t}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X0=es(Kn),ia=rt({},Kn,{view:0,detail:0}),y4=es(ia),Yo,Xo,hi,Rl=rt({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hi&&(hi&&e.type==="mousemove"?(Yo=e.screenX-hi.screenX,Xo=e.screenY-hi.screenY):Xo=Yo=0,hi=e),Yo)},movementY:function(e){return"movementY"in e?e.movementY:Xo}}),_h=es(Rl),v4=rt({},Rl,{dataTransfer:0}),b4=es(v4),w4=rt({},ia,{relatedTarget:0}),Zo=es(w4),j4=rt({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),N4=es(j4),k4=rt({},Kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S4=es(k4),_4=rt({},Kn,{data:0}),Ch=es(_4),C4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=T4[e])?!!t[e]:!1}function Z0(){return D4}var M4=rt({},ia,{key:function(e){if(e.key){var t=C4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z0,charCode:function(e){return e.type==="keypress"?sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),A4=es(M4),B4=rt({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=es(B4),z4=rt({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z0}),F4=es(z4),P4=rt({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),L4=es(P4),O4=rt({},Rl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),I4=es(O4),R4=[9,13,27,32],eu=Zs&&"CompositionEvent"in window,Si=null;Zs&&"documentMode"in document&&(Si=document.documentMode);var q4=Zs&&"TextEvent"in window&&!Si,$f=Zs&&(!eu||Si&&8<Si&&11>=Si),Th=" ",Dh=!1;function Uf(e,t){switch(e){case"keyup":return R4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jn=!1;function $4(e,t){switch(e){case"compositionend":return Hf(t);case"keypress":return t.which!==32?null:(Dh=!0,Th);case"textInput":return e=t.data,e===Th&&Dh?null:e;default:return null}}function U4(e,t){if(jn)return e==="compositionend"||!eu&&Uf(e,t)?(e=qf(),tl=Y0=gr=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $f&&t.locale!=="ko"?null:t.data;default:return null}}var H4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!H4[e.type]:t==="textarea"}function Wf(e,t,r,n){jf(n),t=gl(t,"onChange"),0<t.length&&(r=new X0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var _i=null,qi=null;function W4(e){sp(e,0)}function ql(e){var t=Sn(e);if(pf(t))return e}function V4(e,t){if(e==="change")return t}var Vf=!1;if(Zs){var ec;if(Zs){var tc="oninput"in document;if(!tc){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),tc=typeof Ah.oninput=="function"}ec=tc}else ec=!1;Vf=ec&&(!document.documentMode||9<document.documentMode)}function Bh(){_i&&(_i.detachEvent("onpropertychange",Gf),qi=_i=null)}function Gf(e){if(e.propertyName==="value"&&ql(qi)){var t=[];Wf(t,qi,e,V0(e)),_f(W4,t)}}function G4(e,t,r){e==="focusin"?(Bh(),_i=t,qi=r,_i.attachEvent("onpropertychange",Gf)):e==="focusout"&&Bh()}function Q4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ql(qi)}function K4(e,t){if(e==="click")return ql(t)}function J4(e,t){if(e==="input"||e==="change")return ql(t)}function Y4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ns=typeof Object.is=="function"?Object.is:Y4;function $i(e,t){if(Ns(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Mc.call(t,a)||!Ns(e[a],t[a]))return!1}return!0}function zh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fh(e,t){var r=zh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zh(r)}}function Qf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kf(){for(var e=window,t=ul();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ul(e.document)}return t}function tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function X4(e){var t=Kf(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qf(r.ownerDocument.documentElement,r)){if(n!==null&&tu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Fh(r,l);var u=Fh(r,n);a&&u&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Z4=Zs&&"documentMode"in document&&11>=document.documentMode,Nn=null,Jc=null,Ci=null,Yc=!1;function Ph(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yc||Nn==null||Nn!==ul(n)||(n=Nn,"selectionStart"in n&&tu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ci&&$i(Ci,n)||(Ci=n,n=gl(Jc,"onSelect"),0<n.length&&(t=new X0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Nn)))}function Ra(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kn={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},sc={},Jf={};Zs&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function $l(e){if(sc[e])return sc[e];if(!kn[e])return e;var t=kn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Jf)return sc[e]=t[r];return e}var Yf=$l("animationend"),Xf=$l("animationiteration"),Zf=$l("animationstart"),ep=$l("transitionend"),tp=new Map,Lh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){tp.set(e,t),rn(t,[e])}for(var rc=0;rc<Lh.length;rc++){var nc=Lh[rc],e2=nc.toLowerCase(),t2=nc[0].toUpperCase()+nc.slice(1);Ar(e2,"on"+t2)}Ar(Yf,"onAnimationEnd");Ar(Xf,"onAnimationIteration");Ar(Zf,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(ep,"onTransitionEnd");On("onMouseEnter",["mouseout","mouseover"]);On("onMouseLeave",["mouseout","mouseover"]);On("onPointerEnter",["pointerout","pointerover"]);On("onPointerLeave",["pointerout","pointerover"]);rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Oh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,e4(n,t,void 0,e),e.currentTarget=null}function sp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var u=n.length-1;0<=u;u--){var h=n[u],m=h.instance,x=h.currentTarget;if(h=h.listener,m!==l&&a.isPropagationStopped())break e;Oh(a,h,x),l=m}else for(u=0;u<n.length;u++){if(h=n[u],m=h.instance,x=h.currentTarget,h=h.listener,m!==l&&a.isPropagationStopped())break e;Oh(a,h,x),l=m}}}if(hl)throw e=Vc,hl=!1,Vc=null,e}function Ve(e,t){var r=t[s0];r===void 0&&(r=t[s0]=new Set);var n=e+"__bubble";r.has(n)||(rp(t,e,2,!1),r.add(n))}function ic(e,t,r){var n=0;t&&(n|=4),rp(r,e,n,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[qa]){e[qa]=!0,uf.forEach(function(r){r!=="selectionchange"&&(s2.has(r)||ic(r,!1,e),ic(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qa]||(t[qa]=!0,ic("selectionchange",!1,t))}}function rp(e,t,r,n){switch(Rf(t)){case 1:var a=x4;break;case 4:a=g4;break;default:a=J0}r=a.bind(null,t,r,e),a=void 0,!Wc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ac(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var h=n.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(u===4)for(u=n.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;u=u.return}for(;h!==null;){if(u=Wr(h),u===null)return;if(m=u.tag,m===5||m===6){n=l=u;continue e}h=h.parentNode}}n=n.return}_f(function(){var x=l,g=V0(r),N=[];e:{var w=tp.get(e);if(w!==void 0){var E=X0,S=e;switch(e){case"keypress":if(sl(r)===0)break e;case"keydown":case"keyup":E=A4;break;case"focusin":S="focus",E=Zo;break;case"focusout":S="blur",E=Zo;break;case"beforeblur":case"afterblur":E=Zo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=_h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=b4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=F4;break;case Yf:case Xf:case Zf:E=N4;break;case ep:E=L4;break;case"scroll":E=y4;break;case"wheel":E=I4;break;case"copy":case"cut":case"paste":E=S4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Eh}var D=(t&4)!==0,A=!D&&e==="scroll",j=D?w!==null?w+"Capture":null:w;D=[];for(var b=x,C;b!==null;){C=b;var z=C.stateNode;if(C.tag===5&&z!==null&&(C=z,j!==null&&(z=Li(b,j),z!=null&&D.push(Hi(b,z,C)))),A)break;b=b.return}0<D.length&&(w=new E(w,S,null,r,g),N.push({event:w,listeners:D}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",w&&r!==Uc&&(S=r.relatedTarget||r.fromElement)&&(Wr(S)||S[er]))break e;if((E||w)&&(w=g.window===g?g:(w=g.ownerDocument)?w.defaultView||w.parentWindow:window,E?(S=r.relatedTarget||r.toElement,E=x,S=S?Wr(S):null,S!==null&&(A=nn(S),S!==A||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=x),E!==S)){if(D=_h,z="onMouseLeave",j="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(D=Eh,z="onPointerLeave",j="onPointerEnter",b="pointer"),A=E==null?w:Sn(E),C=S==null?w:Sn(S),w=new D(z,b+"leave",E,r,g),w.target=A,w.relatedTarget=C,z=null,Wr(g)===x&&(D=new D(j,b+"enter",S,r,g),D.target=C,D.relatedTarget=A,z=D),A=z,E&&S)t:{for(D=E,j=S,b=0,C=D;C;C=dn(C))b++;for(C=0,z=j;z;z=dn(z))C++;for(;0<b-C;)D=dn(D),b--;for(;0<C-b;)j=dn(j),C--;for(;b--;){if(D===j||j!==null&&D===j.alternate)break t;D=dn(D),j=dn(j)}D=null}else D=null;E!==null&&Ih(N,w,E,D,!1),S!==null&&A!==null&&Ih(N,A,S,D,!0)}}e:{if(w=x?Sn(x):window,E=w.nodeName&&w.nodeName.toLowerCase(),E==="select"||E==="input"&&w.type==="file")var $=V4;else if(Mh(w))if(Vf)$=J4;else{$=Q4;var U=G4}else(E=w.nodeName)&&E.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&($=K4);if($&&($=$(e,x))){Wf(N,$,r,g);break e}U&&U(e,w,x),e==="focusout"&&(U=w._wrapperState)&&U.controlled&&w.type==="number"&&Oc(w,"number",w.value)}switch(U=x?Sn(x):window,e){case"focusin":(Mh(U)||U.contentEditable==="true")&&(Nn=U,Jc=x,Ci=null);break;case"focusout":Ci=Jc=Nn=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,Ph(N,r,g);break;case"selectionchange":if(Z4)break;case"keydown":case"keyup":Ph(N,r,g)}var Y;if(eu)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else jn?Uf(e,r)&&(Z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Z="onCompositionStart");Z&&($f&&r.locale!=="ko"&&(jn||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&jn&&(Y=qf()):(gr=g,Y0="value"in gr?gr.value:gr.textContent,jn=!0)),U=gl(x,Z),0<U.length&&(Z=new Ch(Z,e,null,r,g),N.push({event:Z,listeners:U}),Y?Z.data=Y:(Y=Hf(r),Y!==null&&(Z.data=Y)))),(Y=q4?$4(e,r):U4(e,r))&&(x=gl(x,"onBeforeInput"),0<x.length&&(g=new Ch("onBeforeInput","beforeinput",null,r,g),N.push({event:g,listeners:x}),g.data=Y))}sp(N,t)})}function Hi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gl(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Li(e,r),l!=null&&n.unshift(Hi(e,l,a)),l=Li(e,t),l!=null&&n.push(Hi(e,l,a))),e=e.return}return n}function dn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ih(e,t,r,n,a){for(var l=t._reactName,u=[];r!==null&&r!==n;){var h=r,m=h.alternate,x=h.stateNode;if(m!==null&&m===n)break;h.tag===5&&x!==null&&(h=x,a?(m=Li(r,l),m!=null&&u.unshift(Hi(r,m,h))):a||(m=Li(r,l),m!=null&&u.push(Hi(r,m,h)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var r2=/\r\n?/g,n2=/\u0000|\uFFFD/g;function Rh(e){return(typeof e=="string"?e:""+e).replace(r2,`
`).replace(n2,"")}function $a(e,t,r){if(t=Rh(t),Rh(e)!==t&&r)throw Error(ue(425))}function yl(){}var Xc=null,Zc=null;function e0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var t0=typeof setTimeout=="function"?setTimeout:void 0,i2=typeof clearTimeout=="function"?clearTimeout:void 0,qh=typeof Promise=="function"?Promise:void 0,a2=typeof queueMicrotask=="function"?queueMicrotask:typeof qh<"u"?function(e){return qh.resolve(null).then(e).catch(l2)}:t0;function l2(e){setTimeout(function(){throw e})}function lc(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Ri(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ri(t)}function Nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Jn=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Jn,Wi="__reactProps$"+Jn,er="__reactContainer$"+Jn,s0="__reactEvents$"+Jn,o2="__reactListeners$"+Jn,c2="__reactHandles$"+Jn;function Wr(e){var t=e[Fs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[er]||r[Fs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$h(e);e!==null;){if(r=e[Fs])return r;e=$h(e)}return t}e=r,r=e.parentNode}return null}function aa(e){return e=e[Fs]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function Ul(e){return e[Wi]||null}var r0=[],_n=-1;function Br(e){return{current:e}}function Ge(e){0>_n||(e.current=r0[_n],r0[_n]=null,_n--)}function He(e,t){_n++,r0[_n]=e.current,e.current=t}var Tr={},Ct=Br(Tr),qt=Br(!1),Jr=Tr;function In(e,t){var r=e.type.contextTypes;if(!r)return Tr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function $t(e){return e=e.childContextTypes,e!=null}function vl(){Ge(qt),Ge(Ct)}function Uh(e,t,r){if(Ct.current!==Tr)throw Error(ue(168));He(Ct,t),He(qt,r)}function np(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ue(108,Gg(e)||"Unknown",a));return rt({},r,n)}function bl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Jr=Ct.current,He(Ct,e),He(qt,qt.current),!0}function Hh(e,t,r){var n=e.stateNode;if(!n)throw Error(ue(169));r?(e=np(e,t,Jr),n.__reactInternalMemoizedMergedChildContext=e,Ge(qt),Ge(Ct),He(Ct,e)):Ge(qt),He(qt,r)}var Qs=null,Hl=!1,oc=!1;function ip(e){Qs===null?Qs=[e]:Qs.push(e)}function u2(e){Hl=!0,ip(e)}function zr(){if(!oc&&Qs!==null){oc=!0;var e=0,t=Re;try{var r=Qs;for(Re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Qs=null,Hl=!1}catch(a){throw Qs!==null&&(Qs=Qs.slice(e+1)),Df(G0,zr),a}finally{Re=t,oc=!1}}return null}var Cn=[],En=0,wl=null,jl=0,os=[],cs=0,Yr=null,Ks=1,Js="";function qr(e,t){Cn[En++]=jl,Cn[En++]=wl,wl=e,jl=t}function ap(e,t,r){os[cs++]=Ks,os[cs++]=Js,os[cs++]=Yr,Yr=e;var n=Ks;e=Js;var a=32-ws(n)-1;n&=~(1<<a),r+=1;var l=32-ws(t)+a;if(30<l){var u=a-a%5;l=(n&(1<<u)-1).toString(32),n>>=u,a-=u,Ks=1<<32-ws(t)+a|r<<a|n,Js=l+e}else Ks=1<<l|r<<a|n,Js=e}function su(e){e.return!==null&&(qr(e,1),ap(e,1,0))}function ru(e){for(;e===wl;)wl=Cn[--En],Cn[En]=null,jl=Cn[--En],Cn[En]=null;for(;e===Yr;)Yr=os[--cs],os[cs]=null,Js=os[--cs],os[cs]=null,Ks=os[--cs],os[cs]=null}var Kt=null,Qt=null,Je=!1,bs=null;function lp(e,t){var r=us(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Wh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kt=e,Qt=Nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kt=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yr!==null?{id:Ks,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=us(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Kt=e,Qt=null,!0):!1;default:return!1}}function n0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function i0(e){if(Je){var t=Qt;if(t){var r=t;if(!Wh(e,t)){if(n0(e))throw Error(ue(418));t=Nr(r.nextSibling);var n=Kt;t&&Wh(e,t)?lp(n,r):(e.flags=e.flags&-4097|2,Je=!1,Kt=e)}}else{if(n0(e))throw Error(ue(418));e.flags=e.flags&-4097|2,Je=!1,Kt=e}}}function Vh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function Ua(e){if(e!==Kt)return!1;if(!Je)return Vh(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!e0(e.type,e.memoizedProps)),t&&(t=Qt)){if(n0(e))throw op(),Error(ue(418));for(;t;)lp(e,t),t=Nr(t.nextSibling)}if(Vh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qt=Nr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=Kt?Nr(e.stateNode.nextSibling):null;return!0}function op(){for(var e=Qt;e;)e=Nr(e.nextSibling)}function Rn(){Qt=Kt=null,Je=!1}function nu(e){bs===null?bs=[e]:bs.push(e)}var d2=rr.ReactCurrentBatchConfig;function mi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(u){var h=a.refs;u===null?delete h[l]:h[l]=u},t._stringRef=l,t)}if(typeof e!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gh(e){var t=e._init;return t(e._payload)}function cp(e){function t(j,b){if(e){var C=j.deletions;C===null?(j.deletions=[b],j.flags|=16):C.push(b)}}function r(j,b){if(!e)return null;for(;b!==null;)t(j,b),b=b.sibling;return null}function n(j,b){for(j=new Map;b!==null;)b.key!==null?j.set(b.key,b):j.set(b.index,b),b=b.sibling;return j}function a(j,b){return j=Cr(j,b),j.index=0,j.sibling=null,j}function l(j,b,C){return j.index=C,e?(C=j.alternate,C!==null?(C=C.index,C<b?(j.flags|=2,b):C):(j.flags|=2,b)):(j.flags|=1048576,b)}function u(j){return e&&j.alternate===null&&(j.flags|=2),j}function h(j,b,C,z){return b===null||b.tag!==6?(b=pc(C,j.mode,z),b.return=j,b):(b=a(b,C),b.return=j,b)}function m(j,b,C,z){var $=C.type;return $===wn?g(j,b,C.props.children,z,C.key):b!==null&&(b.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===hr&&Gh($)===b.type)?(z=a(b,C.props),z.ref=mi(j,b,C),z.return=j,z):(z=cl(C.type,C.key,C.props,null,j.mode,z),z.ref=mi(j,b,C),z.return=j,z)}function x(j,b,C,z){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=xc(C,j.mode,z),b.return=j,b):(b=a(b,C.children||[]),b.return=j,b)}function g(j,b,C,z,$){return b===null||b.tag!==7?(b=Kr(C,j.mode,z,$),b.return=j,b):(b=a(b,C),b.return=j,b)}function N(j,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=pc(""+b,j.mode,C),b.return=j,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ba:return C=cl(b.type,b.key,b.props,null,j.mode,C),C.ref=mi(j,null,b),C.return=j,C;case bn:return b=xc(b,j.mode,C),b.return=j,b;case hr:var z=b._init;return N(j,z(b._payload),C)}if(vi(b)||oi(b))return b=Kr(b,j.mode,C,null),b.return=j,b;Ha(j,b)}return null}function w(j,b,C,z){var $=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return $!==null?null:h(j,b,""+C,z);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ba:return C.key===$?m(j,b,C,z):null;case bn:return C.key===$?x(j,b,C,z):null;case hr:return $=C._init,w(j,b,$(C._payload),z)}if(vi(C)||oi(C))return $!==null?null:g(j,b,C,z,null);Ha(j,C)}return null}function E(j,b,C,z,$){if(typeof z=="string"&&z!==""||typeof z=="number")return j=j.get(C)||null,h(b,j,""+z,$);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Ba:return j=j.get(z.key===null?C:z.key)||null,m(b,j,z,$);case bn:return j=j.get(z.key===null?C:z.key)||null,x(b,j,z,$);case hr:var U=z._init;return E(j,b,C,U(z._payload),$)}if(vi(z)||oi(z))return j=j.get(C)||null,g(b,j,z,$,null);Ha(b,z)}return null}function S(j,b,C,z){for(var $=null,U=null,Y=b,Z=b=0,X=null;Y!==null&&Z<C.length;Z++){Y.index>Z?(X=Y,Y=null):X=Y.sibling;var ee=w(j,Y,C[Z],z);if(ee===null){Y===null&&(Y=X);break}e&&Y&&ee.alternate===null&&t(j,Y),b=l(ee,b,Z),U===null?$=ee:U.sibling=ee,U=ee,Y=X}if(Z===C.length)return r(j,Y),Je&&qr(j,Z),$;if(Y===null){for(;Z<C.length;Z++)Y=N(j,C[Z],z),Y!==null&&(b=l(Y,b,Z),U===null?$=Y:U.sibling=Y,U=Y);return Je&&qr(j,Z),$}for(Y=n(j,Y);Z<C.length;Z++)X=E(Y,j,Z,C[Z],z),X!==null&&(e&&X.alternate!==null&&Y.delete(X.key===null?Z:X.key),b=l(X,b,Z),U===null?$=X:U.sibling=X,U=X);return e&&Y.forEach(function(G){return t(j,G)}),Je&&qr(j,Z),$}function D(j,b,C,z){var $=oi(C);if(typeof $!="function")throw Error(ue(150));if(C=$.call(C),C==null)throw Error(ue(151));for(var U=$=null,Y=b,Z=b=0,X=null,ee=C.next();Y!==null&&!ee.done;Z++,ee=C.next()){Y.index>Z?(X=Y,Y=null):X=Y.sibling;var G=w(j,Y,ee.value,z);if(G===null){Y===null&&(Y=X);break}e&&Y&&G.alternate===null&&t(j,Y),b=l(G,b,Z),U===null?$=G:U.sibling=G,U=G,Y=X}if(ee.done)return r(j,Y),Je&&qr(j,Z),$;if(Y===null){for(;!ee.done;Z++,ee=C.next())ee=N(j,ee.value,z),ee!==null&&(b=l(ee,b,Z),U===null?$=ee:U.sibling=ee,U=ee);return Je&&qr(j,Z),$}for(Y=n(j,Y);!ee.done;Z++,ee=C.next())ee=E(Y,j,Z,ee.value,z),ee!==null&&(e&&ee.alternate!==null&&Y.delete(ee.key===null?Z:ee.key),b=l(ee,b,Z),U===null?$=ee:U.sibling=ee,U=ee);return e&&Y.forEach(function(V){return t(j,V)}),Je&&qr(j,Z),$}function A(j,b,C,z){if(typeof C=="object"&&C!==null&&C.type===wn&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ba:e:{for(var $=C.key,U=b;U!==null;){if(U.key===$){if($=C.type,$===wn){if(U.tag===7){r(j,U.sibling),b=a(U,C.props.children),b.return=j,j=b;break e}}else if(U.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===hr&&Gh($)===U.type){r(j,U.sibling),b=a(U,C.props),b.ref=mi(j,U,C),b.return=j,j=b;break e}r(j,U);break}else t(j,U);U=U.sibling}C.type===wn?(b=Kr(C.props.children,j.mode,z,C.key),b.return=j,j=b):(z=cl(C.type,C.key,C.props,null,j.mode,z),z.ref=mi(j,b,C),z.return=j,j=z)}return u(j);case bn:e:{for(U=C.key;b!==null;){if(b.key===U)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){r(j,b.sibling),b=a(b,C.children||[]),b.return=j,j=b;break e}else{r(j,b);break}else t(j,b);b=b.sibling}b=xc(C,j.mode,z),b.return=j,j=b}return u(j);case hr:return U=C._init,A(j,b,U(C._payload),z)}if(vi(C))return S(j,b,C,z);if(oi(C))return D(j,b,C,z);Ha(j,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(r(j,b.sibling),b=a(b,C),b.return=j,j=b):(r(j,b),b=pc(C,j.mode,z),b.return=j,j=b),u(j)):r(j,b)}return A}var qn=cp(!0),up=cp(!1),Nl=Br(null),kl=null,Tn=null,iu=null;function au(){iu=Tn=kl=null}function lu(e){var t=Nl.current;Ge(Nl),e._currentValue=t}function a0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pn(e,t){kl=e,iu=Tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function hs(e){var t=e._currentValue;if(iu!==e)if(e={context:e,memoizedValue:t,next:null},Tn===null){if(kl===null)throw Error(ue(308));Tn=e,kl.dependencies={lanes:0,firstContext:e}}else Tn=Tn.next=e;return t}var Vr=null;function ou(e){Vr===null?Vr=[e]:Vr.push(e)}function dp(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,ou(t)):(r.next=a.next,a.next=r),t.interleaved=r,tr(e,n)}function tr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var mr=!1;function cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ys(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Le&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,tr(e,r)}return a=n.interleaved,a===null?(t.next=t,ou(n)):(t.next=a.next,a.next=t),n.interleaved=t,tr(e,r)}function rl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Q0(e,r)}}function Qh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=u:l=l.next=u,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sl(e,t,r,n){var a=e.updateQueue;mr=!1;var l=a.firstBaseUpdate,u=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var m=h,x=m.next;m.next=null,u===null?l=x:u.next=x,u=m;var g=e.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==u&&(h===null?g.firstBaseUpdate=x:h.next=x,g.lastBaseUpdate=m))}if(l!==null){var N=a.baseState;u=0,g=x=m=null,h=l;do{var w=h.lane,E=h.eventTime;if((n&w)===w){g!==null&&(g=g.next={eventTime:E,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var S=e,D=h;switch(w=t,E=r,D.tag){case 1:if(S=D.payload,typeof S=="function"){N=S.call(E,N,w);break e}N=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=D.payload,w=typeof S=="function"?S.call(E,N,w):S,w==null)break e;N=rt({},N,w);break e;case 2:mr=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,w=a.effects,w===null?a.effects=[h]:w.push(h))}else E={eventTime:E,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(x=g=E,m=N):g=g.next=E,u|=w;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;w=h,h=w.next,w.next=null,a.lastBaseUpdate=w,a.shared.pending=null}}while(!0);if(g===null&&(m=N),a.baseState=m,a.firstBaseUpdate=x,a.lastBaseUpdate=g,t=a.shared.interleaved,t!==null){a=t;do u|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Zr|=u,e.lanes=u,e.memoizedState=N}}function Kh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ue(191,a));a.call(n)}}}var la={},Ls=Br(la),Vi=Br(la),Gi=Br(la);function Gr(e){if(e===la)throw Error(ue(174));return e}function uu(e,t){switch(He(Gi,t),He(Vi,e),He(Ls,la),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rc(t,e)}Ge(Ls),He(Ls,t)}function $n(){Ge(Ls),Ge(Vi),Ge(Gi)}function mp(e){Gr(Gi.current);var t=Gr(Ls.current),r=Rc(t,e.type);t!==r&&(He(Vi,e),He(Ls,r))}function du(e){Vi.current===e&&(Ge(Ls),Ge(Vi))}var tt=Br(0);function _l(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cc=[];function hu(){for(var e=0;e<cc.length;e++)cc[e]._workInProgressVersionPrimary=null;cc.length=0}var nl=rr.ReactCurrentDispatcher,uc=rr.ReactCurrentBatchConfig,Xr=0,st=null,xt=null,yt=null,Cl=!1,Ei=!1,Qi=0,h2=0;function kt(){throw Error(ue(321))}function mu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ns(e[r],t[r]))return!1;return!0}function fu(e,t,r,n,a,l){if(Xr=l,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nl.current=e===null||e.memoizedState===null?x2:g2,e=r(n,a),Ei){l=0;do{if(Ei=!1,Qi=0,25<=l)throw Error(ue(301));l+=1,yt=xt=null,t.updateQueue=null,nl.current=y2,e=r(n,a)}while(Ei)}if(nl.current=El,t=xt!==null&&xt.next!==null,Xr=0,yt=xt=st=null,Cl=!1,t)throw Error(ue(300));return e}function pu(){var e=Qi!==0;return Qi=0,e}function Bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?st.memoizedState=yt=e:yt=yt.next=e,yt}function ms(){if(xt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=yt===null?st.memoizedState:yt.next;if(t!==null)yt=t,xt=e;else{if(e===null)throw Error(ue(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},yt===null?st.memoizedState=yt=e:yt=yt.next=e}return yt}function Ki(e,t){return typeof t=="function"?t(e):t}function dc(e){var t=ms(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=xt,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var u=a.next;a.next=l.next,l.next=u}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var h=u=null,m=null,x=l;do{var g=x.lane;if((Xr&g)===g)m!==null&&(m=m.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),n=x.hasEagerState?x.eagerState:e(n,x.action);else{var N={lane:g,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};m===null?(h=m=N,u=n):m=m.next=N,st.lanes|=g,Zr|=g}x=x.next}while(x!==null&&x!==l);m===null?u=n:m.next=h,Ns(n,t.memoizedState)||(Rt=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=m,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,st.lanes|=l,Zr|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hc(e){var t=ms(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var u=a=a.next;do l=e(l,u.action),u=u.next;while(u!==a);Ns(l,t.memoizedState)||(Rt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function fp(){}function pp(e,t){var r=st,n=ms(),a=t(),l=!Ns(n.memoizedState,a);if(l&&(n.memoizedState=a,Rt=!0),n=n.queue,xu(yp.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||yt!==null&&yt.memoizedState.tag&1){if(r.flags|=2048,Ji(9,gp.bind(null,r,n,a,t),void 0,null),vt===null)throw Error(ue(349));Xr&30||xp(r,t,a)}return a}function xp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gp(e,t,r,n){t.value=r,t.getSnapshot=n,vp(t)&&bp(e)}function yp(e,t,r){return r(function(){vp(t)&&bp(e)})}function vp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ns(e,r)}catch{return!0}}function bp(e){var t=tr(e,1);t!==null&&js(t,e,1,-1)}function Jh(e){var t=Bs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},t.queue=e,e=e.dispatch=p2.bind(null,st,e),[t.memoizedState,e]}function Ji(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function wp(){return ms().memoizedState}function il(e,t,r,n){var a=Bs();st.flags|=e,a.memoizedState=Ji(1|t,r,void 0,n===void 0?null:n)}function Wl(e,t,r,n){var a=ms();n=n===void 0?null:n;var l=void 0;if(xt!==null){var u=xt.memoizedState;if(l=u.destroy,n!==null&&mu(n,u.deps)){a.memoizedState=Ji(t,r,l,n);return}}st.flags|=e,a.memoizedState=Ji(1|t,r,l,n)}function Yh(e,t){return il(8390656,8,e,t)}function xu(e,t){return Wl(2048,8,e,t)}function jp(e,t){return Wl(4,2,e,t)}function Np(e,t){return Wl(4,4,e,t)}function kp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sp(e,t,r){return r=r!=null?r.concat([e]):null,Wl(4,4,kp.bind(null,t,e),r)}function gu(){}function _p(e,t){var r=ms();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mu(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Cp(e,t){var r=ms();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mu(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ep(e,t,r){return Xr&21?(Ns(r,t)||(r=Bf(),st.lanes|=r,Zr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=r)}function m2(e,t){var r=Re;Re=r!==0&&4>r?r:4,e(!0);var n=uc.transition;uc.transition={};try{e(!1),t()}finally{Re=r,uc.transition=n}}function Tp(){return ms().memoizedState}function f2(e,t,r){var n=_r(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Dp(e))Mp(t,r);else if(r=dp(e,t,r,n),r!==null){var a=Mt();js(r,e,n,a),Ap(r,t,n)}}function p2(e,t,r){var n=_r(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Dp(e))Mp(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var u=t.lastRenderedState,h=l(u,r);if(a.hasEagerState=!0,a.eagerState=h,Ns(h,u)){var m=t.interleaved;m===null?(a.next=a,ou(t)):(a.next=m.next,m.next=a),t.interleaved=a;return}}catch{}finally{}r=dp(e,t,a,n),r!==null&&(a=Mt(),js(r,e,n,a),Ap(r,t,n))}}function Dp(e){var t=e.alternate;return e===st||t!==null&&t===st}function Mp(e,t){Ei=Cl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ap(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Q0(e,r)}}var El={readContext:hs,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},x2={readContext:hs,useCallback:function(e,t){return Bs().memoizedState=[e,t===void 0?null:t],e},useContext:hs,useEffect:Yh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,il(4194308,4,kp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return il(4194308,4,e,t)},useInsertionEffect:function(e,t){return il(4,2,e,t)},useMemo:function(e,t){var r=Bs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Bs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=f2.bind(null,st,e),[n.memoizedState,e]},useRef:function(e){var t=Bs();return e={current:e},t.memoizedState=e},useState:Jh,useDebugValue:gu,useDeferredValue:function(e){return Bs().memoizedState=e},useTransition:function(){var e=Jh(!1),t=e[0];return e=m2.bind(null,e[1]),Bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=st,a=Bs();if(Je){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=t(),vt===null)throw Error(ue(349));Xr&30||xp(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,Yh(yp.bind(null,n,l,e),[e]),n.flags|=2048,Ji(9,gp.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Bs(),t=vt.identifierPrefix;if(Je){var r=Js,n=Ks;r=(n&~(1<<32-ws(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=h2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},g2={readContext:hs,useCallback:_p,useContext:hs,useEffect:xu,useImperativeHandle:Sp,useInsertionEffect:jp,useLayoutEffect:Np,useMemo:Cp,useReducer:dc,useRef:wp,useState:function(){return dc(Ki)},useDebugValue:gu,useDeferredValue:function(e){var t=ms();return Ep(t,xt.memoizedState,e)},useTransition:function(){var e=dc(Ki)[0],t=ms().memoizedState;return[e,t]},useMutableSource:fp,useSyncExternalStore:pp,useId:Tp,unstable_isNewReconciler:!1},y2={readContext:hs,useCallback:_p,useContext:hs,useEffect:xu,useImperativeHandle:Sp,useInsertionEffect:jp,useLayoutEffect:Np,useMemo:Cp,useReducer:hc,useRef:wp,useState:function(){return hc(Ki)},useDebugValue:gu,useDeferredValue:function(e){var t=ms();return xt===null?t.memoizedState=e:Ep(t,xt.memoizedState,e)},useTransition:function(){var e=hc(Ki)[0],t=ms().memoizedState;return[e,t]},useMutableSource:fp,useSyncExternalStore:pp,useId:Tp,unstable_isNewReconciler:!1};function gs(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function l0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:rt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vl={isMounted:function(e){return(e=e._reactInternals)?nn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Mt(),a=_r(e),l=Ys(n,a);l.payload=t,r!=null&&(l.callback=r),t=kr(e,l,a),t!==null&&(js(t,e,a,n),rl(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Mt(),a=_r(e),l=Ys(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=kr(e,l,a),t!==null&&(js(t,e,a,n),rl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mt(),n=_r(e),a=Ys(r,n);a.tag=2,t!=null&&(a.callback=t),t=kr(e,a,n),t!==null&&(js(t,e,n,r),rl(t,e,n))}};function Xh(e,t,r,n,a,l,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,u):t.prototype&&t.prototype.isPureReactComponent?!$i(r,n)||!$i(a,l):!0}function Bp(e,t,r){var n=!1,a=Tr,l=t.contextType;return typeof l=="object"&&l!==null?l=hs(l):(a=$t(t)?Jr:Ct.current,n=t.contextTypes,l=(n=n!=null)?In(e,a):Tr),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Zh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vl.enqueueReplaceState(t,t.state,null)}function o0(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},cu(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=hs(l):(l=$t(t)?Jr:Ct.current,a.context=In(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(l0(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Vl.enqueueReplaceState(a,a.state,null),Sl(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Un(e,t){try{var r="",n=t;do r+=Vg(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function mc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function c0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var v2=typeof WeakMap=="function"?WeakMap:Map;function zp(e,t,r){r=Ys(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Dl||(Dl=!0,v0=n),c0(e,t)},r}function Fp(e,t,r){r=Ys(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){c0(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){c0(e,t),typeof n!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function em(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new v2;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=B2.bind(null,e,t,r),t.then(e,e))}function tm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sm(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ys(-1,1),t.tag=2,kr(r,t,1))),r.lanes|=1),e)}var b2=rr.ReactCurrentOwner,Rt=!1;function Dt(e,t,r,n){t.child=e===null?up(t,null,r,n):qn(t,e.child,r,n)}function rm(e,t,r,n,a){r=r.render;var l=t.ref;return Pn(t,a),n=fu(e,t,r,n,l,a),r=pu(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,sr(e,t,a)):(Je&&r&&su(t),t.flags|=1,Dt(e,t,n,a),t.child)}function nm(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Su(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,Pp(e,t,l,n,a)):(e=cl(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var u=l.memoizedProps;if(r=r.compare,r=r!==null?r:$i,r(u,n)&&e.ref===t.ref)return sr(e,t,a)}return t.flags|=1,e=Cr(l,n),e.ref=t.ref,e.return=t,t.child=e}function Pp(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if($i(l,n)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,sr(e,t,a)}return u0(e,t,r,n,a)}function Lp(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Mn,Gt),Gt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Mn,Gt),Gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,He(Mn,Gt),Gt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,He(Mn,Gt),Gt|=n;return Dt(e,t,a,r),t.child}function Op(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function u0(e,t,r,n,a){var l=$t(r)?Jr:Ct.current;return l=In(t,l),Pn(t,a),r=fu(e,t,r,n,l,a),n=pu(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,sr(e,t,a)):(Je&&n&&su(t),t.flags|=1,Dt(e,t,r,a),t.child)}function im(e,t,r,n,a){if($t(r)){var l=!0;bl(t)}else l=!1;if(Pn(t,a),t.stateNode===null)al(e,t),Bp(t,r,n),o0(t,r,n,a),n=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var m=u.context,x=r.contextType;typeof x=="object"&&x!==null?x=hs(x):(x=$t(r)?Jr:Ct.current,x=In(t,x));var g=r.getDerivedStateFromProps,N=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";N||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==n||m!==x)&&Zh(t,u,n,x),mr=!1;var w=t.memoizedState;u.state=w,Sl(t,n,u,a),m=t.memoizedState,h!==n||w!==m||qt.current||mr?(typeof g=="function"&&(l0(t,r,g,n),m=t.memoizedState),(h=mr||Xh(t,r,h,n,w,m,x))?(N||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=m),u.props=n,u.state=m,u.context=x,n=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,hp(e,t),h=t.memoizedProps,x=t.type===t.elementType?h:gs(t.type,h),u.props=x,N=t.pendingProps,w=u.context,m=r.contextType,typeof m=="object"&&m!==null?m=hs(m):(m=$t(r)?Jr:Ct.current,m=In(t,m));var E=r.getDerivedStateFromProps;(g=typeof E=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==N||w!==m)&&Zh(t,u,n,m),mr=!1,w=t.memoizedState,u.state=w,Sl(t,n,u,a);var S=t.memoizedState;h!==N||w!==S||qt.current||mr?(typeof E=="function"&&(l0(t,r,E,n),S=t.memoizedState),(x=mr||Xh(t,r,x,n,w,S,m)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,S,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,S,m)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=S),u.props=n,u.state=S,u.context=m,n=x):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),n=!1)}return d0(e,t,r,n,l,a)}function d0(e,t,r,n,a,l){Op(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return a&&Hh(t,r,!1),sr(e,t,l);n=t.stateNode,b2.current=t;var h=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=qn(t,e.child,null,l),t.child=qn(t,null,h,l)):Dt(e,t,h,l),t.memoizedState=n.state,a&&Hh(t,r,!0),t.child}function Ip(e){var t=e.stateNode;t.pendingContext?Uh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uh(e,t.context,!1),uu(e,t.containerInfo)}function am(e,t,r,n,a){return Rn(),nu(a),t.flags|=256,Dt(e,t,r,n),t.child}var h0={dehydrated:null,treeContext:null,retryLane:0};function m0(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rp(e,t,r){var n=t.pendingProps,a=tt.current,l=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(tt,a&1),e===null)return i0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,l?(n=t.mode,l=t.child,u={mode:"hidden",children:u},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=u):l=Kl(u,n,0,null),e=Kr(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=m0(r),t.memoizedState=h0,e):yu(t,u));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return w2(e,t,u,n,h,a,r);if(l){l=n.fallback,u=t.mode,a=e.child,h=a.sibling;var m={mode:"hidden",children:n.children};return!(u&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=m,t.deletions=null):(n=Cr(a,m),n.subtreeFlags=a.subtreeFlags&14680064),h!==null?l=Cr(h,l):(l=Kr(l,u,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,u=e.child.memoizedState,u=u===null?m0(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=e.childLanes&~r,t.memoizedState=h0,n}return l=e.child,e=l.sibling,n=Cr(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function yu(e,t){return t=Kl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wa(e,t,r,n){return n!==null&&nu(n),qn(t,e.child,null,r),e=yu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function w2(e,t,r,n,a,l,u){if(r)return t.flags&256?(t.flags&=-257,n=mc(Error(ue(422))),Wa(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Kl({mode:"visible",children:n.children},a,0,null),l=Kr(l,a,u,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&qn(t,e.child,null,u),t.child.memoizedState=m0(u),t.memoizedState=h0,l);if(!(t.mode&1))return Wa(e,t,u,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var h=n.dgst;return n=h,l=Error(ue(419)),n=mc(l,n,void 0),Wa(e,t,u,n)}if(h=(u&e.childLanes)!==0,Rt||h){if(n=vt,n!==null){switch(u&-u){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|u)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,tr(e,a),js(n,e,a,-1))}return ku(),n=mc(Error(ue(421))),Wa(e,t,u,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=z2.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Qt=Nr(a.nextSibling),Kt=t,Je=!0,bs=null,e!==null&&(os[cs++]=Ks,os[cs++]=Js,os[cs++]=Yr,Ks=e.id,Js=e.overflow,Yr=t),t=yu(t,n.children),t.flags|=4096,t)}function lm(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),a0(e.return,t,r)}function fc(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function qp(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(Dt(e,t,n.children,r),n=tt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lm(e,r,t);else if(e.tag===19)lm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(He(tt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&_l(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),fc(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&_l(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}fc(t,!0,r,null,l);break;case"together":fc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function al(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,r=Cr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Cr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function j2(e,t,r){switch(t.tag){case 3:Ip(t),Rn();break;case 5:mp(t);break;case 1:$t(t.type)&&bl(t);break;case 4:uu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;He(Nl,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(He(tt,tt.current&1),t.flags|=128,null):r&t.child.childLanes?Rp(e,t,r):(He(tt,tt.current&1),e=sr(e,t,r),e!==null?e.sibling:null);He(tt,tt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return qp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(tt,tt.current),n)break;return null;case 22:case 23:return t.lanes=0,Lp(e,t,r)}return sr(e,t,r)}var $p,f0,Up,Hp;$p=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};f0=function(){};Up=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Gr(Ls.current);var l=null;switch(r){case"input":a=Pc(e,a),n=Pc(e,n),l=[];break;case"select":a=rt({},a,{value:void 0}),n=rt({},n,{value:void 0}),l=[];break;case"textarea":a=Ic(e,a),n=Ic(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yl)}qc(r,n);var u;r=null;for(x in a)if(!n.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var h=a[x];for(u in h)h.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Fi.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in n){var m=n[x];if(h=a!=null?a[x]:void 0,n.hasOwnProperty(x)&&m!==h&&(m!=null||h!=null))if(x==="style")if(h){for(u in h)!h.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in m)m.hasOwnProperty(u)&&h[u]!==m[u]&&(r||(r={}),r[u]=m[u])}else r||(l||(l=[]),l.push(x,r)),r=m;else x==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(l=l||[]).push(x,m)):x==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(x,""+m):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Fi.hasOwnProperty(x)?(m!=null&&x==="onScroll"&&Ve("scroll",e),l||h===m||(l=[])):(l=l||[]).push(x,m))}r&&(l=l||[]).push("style",r);var x=l;(t.updateQueue=x)&&(t.flags|=4)}};Hp=function(e,t,r,n){r!==n&&(t.flags|=4)};function fi(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function N2(e,t,r){var n=t.pendingProps;switch(ru(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return $t(t.type)&&vl(),St(t),null;case 3:return n=t.stateNode,$n(),Ge(qt),Ge(Ct),hu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ua(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bs!==null&&(j0(bs),bs=null))),f0(e,t),St(t),null;case 5:du(t);var a=Gr(Gi.current);if(r=t.type,e!==null&&t.stateNode!=null)Up(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ue(166));return St(t),null}if(e=Gr(Ls.current),Ua(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Fs]=t,n[Wi]=l,e=(t.mode&1)!==0,r){case"dialog":Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":case"embed":Ve("load",n);break;case"video":case"audio":for(a=0;a<wi.length;a++)Ve(wi[a],n);break;case"source":Ve("error",n);break;case"img":case"image":case"link":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"input":xh(n,l),Ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Ve("invalid",n);break;case"textarea":yh(n,l),Ve("invalid",n)}qc(r,l),a=null;for(var u in l)if(l.hasOwnProperty(u)){var h=l[u];u==="children"?typeof h=="string"?n.textContent!==h&&(l.suppressHydrationWarning!==!0&&$a(n.textContent,h,e),a=["children",h]):typeof h=="number"&&n.textContent!==""+h&&(l.suppressHydrationWarning!==!0&&$a(n.textContent,h,e),a=["children",""+h]):Fi.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Ve("scroll",n)}switch(r){case"input":za(n),gh(n,l,!0);break;case"textarea":za(n),vh(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=yl)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[Fs]=t,e[Wi]=n,$p(e,t,!1,!1),t.stateNode=e;e:{switch(u=$c(r,n),r){case"dialog":Ve("cancel",e),Ve("close",e),a=n;break;case"iframe":case"object":case"embed":Ve("load",e),a=n;break;case"video":case"audio":for(a=0;a<wi.length;a++)Ve(wi[a],e);a=n;break;case"source":Ve("error",e),a=n;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=n;break;case"details":Ve("toggle",e),a=n;break;case"input":xh(e,n),a=Pc(e,n),Ve("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=rt({},n,{value:void 0}),Ve("invalid",e);break;case"textarea":yh(e,n),a=Ic(e,n),Ve("invalid",e);break;default:a=n}qc(r,a),h=a;for(l in h)if(h.hasOwnProperty(l)){var m=h[l];l==="style"?wf(e,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&vf(e,m)):l==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&Pi(e,m):typeof m=="number"&&Pi(e,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Fi.hasOwnProperty(l)?m!=null&&l==="onScroll"&&Ve("scroll",e):m!=null&&$0(e,l,m,u))}switch(r){case"input":za(e),gh(e,n,!1);break;case"textarea":za(e),vh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Er(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?An(e,!!n.multiple,l,!1):n.defaultValue!=null&&An(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=yl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Hp(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ue(166));if(r=Gr(Gi.current),Gr(Ls.current),Ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[Fs]=t,(l=n.nodeValue!==r)&&(e=Kt,e!==null))switch(e.tag){case 3:$a(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$a(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fs]=t,t.stateNode=n}return St(t),null;case 13:if(Ge(tt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Qt!==null&&t.mode&1&&!(t.flags&128))op(),Rn(),t.flags|=98560,l=!1;else if(l=Ua(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(ue(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ue(317));l[Fs]=t}else Rn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),l=!1}else bs!==null&&(j0(bs),bs=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||tt.current&1?gt===0&&(gt=3):ku())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return $n(),f0(e,t),e===null&&Ui(t.stateNode.containerInfo),St(t),null;case 10:return lu(t.type._context),St(t),null;case 17:return $t(t.type)&&vl(),St(t),null;case 19:if(Ge(tt),l=t.memoizedState,l===null)return St(t),null;if(n=(t.flags&128)!==0,u=l.rendering,u===null)if(n)fi(l,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=_l(e),u!==null){for(t.flags|=128,fi(l,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,u=l.alternate,u===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,e=u.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(tt,tt.current&1|2),t.child}e=e.sibling}l.tail!==null&&ot()>Hn&&(t.flags|=128,n=!0,fi(l,!1),t.lanes=4194304)}else{if(!n)if(e=_l(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Je)return St(t),null}else 2*ot()-l.renderingStartTime>Hn&&r!==1073741824&&(t.flags|=128,n=!0,fi(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(r=l.last,r!==null?r.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ot(),t.sibling=null,r=tt.current,He(tt,n?r&1|2:r&1),t):(St(t),null);case 22:case 23:return Nu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Gt&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function k2(e,t){switch(ru(t),t.tag){case 1:return $t(t.type)&&vl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $n(),Ge(qt),Ge(Ct),hu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return du(t),null;case 13:if(Ge(tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));Rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ge(tt),null;case 4:return $n(),null;case 10:return lu(t.type._context),null;case 22:case 23:return Nu(),null;case 24:return null;default:return null}}var Va=!1,_t=!1,S2=typeof WeakSet=="function"?WeakSet:Set,be=null;function Dn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){at(e,t,n)}else r.current=null}function p0(e,t,r){try{r()}catch(n){at(e,t,n)}}var om=!1;function _2(e,t){if(Xc=pl,e=Kf(),tu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var u=0,h=-1,m=-1,x=0,g=0,N=e,w=null;t:for(;;){for(var E;N!==r||a!==0&&N.nodeType!==3||(h=u+a),N!==l||n!==0&&N.nodeType!==3||(m=u+n),N.nodeType===3&&(u+=N.nodeValue.length),(E=N.firstChild)!==null;)w=N,N=E;for(;;){if(N===e)break t;if(w===r&&++x===a&&(h=u),w===l&&++g===n&&(m=u),(E=N.nextSibling)!==null)break;N=w,w=N.parentNode}N=E}r=h===-1||m===-1?null:{start:h,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zc={focusedElem:e,selectionRange:r},pl=!1,be=t;be!==null;)if(t=be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,be=e;else for(;be!==null;){t=be;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var D=S.memoizedProps,A=S.memoizedState,j=t.stateNode,b=j.getSnapshotBeforeUpdate(t.elementType===t.type?D:gs(t.type,D),A);j.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(z){at(t,t.return,z)}if(e=t.sibling,e!==null){e.return=t.return,be=e;break}be=t.return}return S=om,om=!1,S}function Ti(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&p0(t,r,l)}a=a.next}while(a!==n)}}function Gl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function x0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Wp(e){var t=e.alternate;t!==null&&(e.alternate=null,Wp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fs],delete t[Wi],delete t[s0],delete t[o2],delete t[c2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vp(e){return e.tag===5||e.tag===3||e.tag===4}function cm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function g0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yl));else if(n!==4&&(e=e.child,e!==null))for(g0(e,t,r),e=e.sibling;e!==null;)g0(e,t,r),e=e.sibling}function y0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(y0(e,t,r),e=e.sibling;e!==null;)y0(e,t,r),e=e.sibling}var wt=null,ys=!1;function cr(e,t,r){for(r=r.child;r!==null;)Gp(e,t,r),r=r.sibling}function Gp(e,t,r){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(Il,r)}catch{}switch(r.tag){case 5:_t||Dn(r,t);case 6:var n=wt,a=ys;wt=null,cr(e,t,r),wt=n,ys=a,wt!==null&&(ys?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(ys?(e=wt,r=r.stateNode,e.nodeType===8?lc(e.parentNode,r):e.nodeType===1&&lc(e,r),Ri(e)):lc(wt,r.stateNode));break;case 4:n=wt,a=ys,wt=r.stateNode.containerInfo,ys=!0,cr(e,t,r),wt=n,ys=a;break;case 0:case 11:case 14:case 15:if(!_t&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,u=l.destroy;l=l.tag,u!==void 0&&(l&2||l&4)&&p0(r,t,u),a=a.next}while(a!==n)}cr(e,t,r);break;case 1:if(!_t&&(Dn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(h){at(r,t,h)}cr(e,t,r);break;case 21:cr(e,t,r);break;case 22:r.mode&1?(_t=(n=_t)||r.memoizedState!==null,cr(e,t,r),_t=n):cr(e,t,r);break;default:cr(e,t,r)}}function um(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new S2),t.forEach(function(n){var a=F2.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function xs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:wt=h.stateNode,ys=!1;break e;case 3:wt=h.stateNode.containerInfo,ys=!0;break e;case 4:wt=h.stateNode.containerInfo,ys=!0;break e}h=h.return}if(wt===null)throw Error(ue(160));Gp(l,u,a),wt=null,ys=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(x){at(a,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qp(t,e),t=t.sibling}function Qp(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xs(t,e),Ms(e),n&4){try{Ti(3,e,e.return),Gl(3,e)}catch(D){at(e,e.return,D)}try{Ti(5,e,e.return)}catch(D){at(e,e.return,D)}}break;case 1:xs(t,e),Ms(e),n&512&&r!==null&&Dn(r,r.return);break;case 5:if(xs(t,e),Ms(e),n&512&&r!==null&&Dn(r,r.return),e.flags&32){var a=e.stateNode;try{Pi(a,"")}catch(D){at(e,e.return,D)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,u=r!==null?r.memoizedProps:l,h=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{h==="input"&&l.type==="radio"&&l.name!=null&&xf(a,l),$c(h,u);var x=$c(h,l);for(u=0;u<m.length;u+=2){var g=m[u],N=m[u+1];g==="style"?wf(a,N):g==="dangerouslySetInnerHTML"?vf(a,N):g==="children"?Pi(a,N):$0(a,g,N,x)}switch(h){case"input":Lc(a,l);break;case"textarea":gf(a,l);break;case"select":var w=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var E=l.value;E!=null?An(a,!!l.multiple,E,!1):w!==!!l.multiple&&(l.defaultValue!=null?An(a,!!l.multiple,l.defaultValue,!0):An(a,!!l.multiple,l.multiple?[]:"",!1))}a[Wi]=l}catch(D){at(e,e.return,D)}}break;case 6:if(xs(t,e),Ms(e),n&4){if(e.stateNode===null)throw Error(ue(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(D){at(e,e.return,D)}}break;case 3:if(xs(t,e),Ms(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(D){at(e,e.return,D)}break;case 4:xs(t,e),Ms(e);break;case 13:xs(t,e),Ms(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(wu=ot())),n&4&&um(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(_t=(x=_t)||g,xs(t,e),_t=x):xs(t,e),Ms(e),n&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!g&&e.mode&1)for(be=e,g=e.child;g!==null;){for(N=be=g;be!==null;){switch(w=be,E=w.child,w.tag){case 0:case 11:case 14:case 15:Ti(4,w,w.return);break;case 1:Dn(w,w.return);var S=w.stateNode;if(typeof S.componentWillUnmount=="function"){n=w,r=w.return;try{t=n,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(D){at(n,r,D)}}break;case 5:Dn(w,w.return);break;case 22:if(w.memoizedState!==null){hm(N);continue}}E!==null?(E.return=w,be=E):hm(N)}g=g.sibling}e:for(g=null,N=e;;){if(N.tag===5){if(g===null){g=N;try{a=N.stateNode,x?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(h=N.stateNode,m=N.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=bf("display",u))}catch(D){at(e,e.return,D)}}}else if(N.tag===6){if(g===null)try{N.stateNode.nodeValue=x?"":N.memoizedProps}catch(D){at(e,e.return,D)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;g===N&&(g=null),N=N.return}g===N&&(g=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:xs(t,e),Ms(e),n&4&&um(e);break;case 21:break;default:xs(t,e),Ms(e)}}function Ms(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Vp(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Pi(a,""),n.flags&=-33);var l=cm(e);y0(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=cm(e);g0(e,h,u);break;default:throw Error(ue(161))}}catch(m){at(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function C2(e,t,r){be=e,Kp(e)}function Kp(e,t,r){for(var n=(e.mode&1)!==0;be!==null;){var a=be,l=a.child;if(a.tag===22&&n){var u=a.memoizedState!==null||Va;if(!u){var h=a.alternate,m=h!==null&&h.memoizedState!==null||_t;h=Va;var x=_t;if(Va=u,(_t=m)&&!x)for(be=a;be!==null;)u=be,m=u.child,u.tag===22&&u.memoizedState!==null?mm(a):m!==null?(m.return=u,be=m):mm(a);for(;l!==null;)be=l,Kp(l),l=l.sibling;be=a,Va=h,_t=x}dm(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,be=l):dm(e)}}function dm(e){for(;be!==null;){var t=be;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_t||Gl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_t)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:gs(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Kh(t,l,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Kh(t,u,r)}break;case 5:var h=t.stateNode;if(r===null&&t.flags&4){r=h;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var g=x.memoizedState;if(g!==null){var N=g.dehydrated;N!==null&&Ri(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}_t||t.flags&512&&x0(t)}catch(w){at(t,t.return,w)}}if(t===e){be=null;break}if(r=t.sibling,r!==null){r.return=t.return,be=r;break}be=t.return}}function hm(e){for(;be!==null;){var t=be;if(t===e){be=null;break}var r=t.sibling;if(r!==null){r.return=t.return,be=r;break}be=t.return}}function mm(e){for(;be!==null;){var t=be;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Gl(4,t)}catch(m){at(t,r,m)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(m){at(t,a,m)}}var l=t.return;try{x0(t)}catch(m){at(t,l,m)}break;case 5:var u=t.return;try{x0(t)}catch(m){at(t,u,m)}}}catch(m){at(t,t.return,m)}if(t===e){be=null;break}var h=t.sibling;if(h!==null){h.return=t.return,be=h;break}be=t.return}}var E2=Math.ceil,Tl=rr.ReactCurrentDispatcher,vu=rr.ReactCurrentOwner,ds=rr.ReactCurrentBatchConfig,Le=0,vt=null,ht=null,jt=0,Gt=0,Mn=Br(0),gt=0,Yi=null,Zr=0,Ql=0,bu=0,Di=null,Ot=null,wu=0,Hn=1/0,Vs=null,Dl=!1,v0=null,Sr=null,Ga=!1,yr=null,Ml=0,Mi=0,b0=null,ll=-1,ol=0;function Mt(){return Le&6?ot():ll!==-1?ll:ll=ot()}function _r(e){return e.mode&1?Le&2&&jt!==0?jt&-jt:d2.transition!==null?(ol===0&&(ol=Bf()),ol):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Rf(e.type)),e):1}function js(e,t,r,n){if(50<Mi)throw Mi=0,b0=null,Error(ue(185));na(e,r,n),(!(Le&2)||e!==vt)&&(e===vt&&(!(Le&2)&&(Ql|=r),gt===4&&pr(e,jt)),Ut(e,n),r===1&&Le===0&&!(t.mode&1)&&(Hn=ot()+500,Hl&&zr()))}function Ut(e,t){var r=e.callbackNode;d4(e,t);var n=fl(e,e===vt?jt:0);if(n===0)r!==null&&jh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jh(r),t===1)e.tag===0?u2(fm.bind(null,e)):ip(fm.bind(null,e)),a2(function(){!(Le&6)&&zr()}),r=null;else{switch(zf(n)){case 1:r=G0;break;case 4:r=Mf;break;case 16:r=ml;break;case 536870912:r=Af;break;default:r=ml}r=r1(r,Jp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Jp(e,t){if(ll=-1,ol=0,Le&6)throw Error(ue(327));var r=e.callbackNode;if(Ln()&&e.callbackNode!==r)return null;var n=fl(e,e===vt?jt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Al(e,n);else{t=n;var a=Le;Le|=2;var l=Xp();(vt!==e||jt!==t)&&(Vs=null,Hn=ot()+500,Qr(e,t));do try{M2();break}catch(h){Yp(e,h)}while(!0);au(),Tl.current=l,Le=a,ht!==null?t=0:(vt=null,jt=0,t=gt)}if(t!==0){if(t===2&&(a=Gc(e),a!==0&&(n=a,t=w0(e,a))),t===1)throw r=Yi,Qr(e,0),pr(e,n),Ut(e,ot()),r;if(t===6)pr(e,n);else{if(a=e.current.alternate,!(n&30)&&!T2(a)&&(t=Al(e,n),t===2&&(l=Gc(e),l!==0&&(n=l,t=w0(e,l))),t===1))throw r=Yi,Qr(e,0),pr(e,n),Ut(e,ot()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ue(345));case 2:$r(e,Ot,Vs);break;case 3:if(pr(e,n),(n&130023424)===n&&(t=wu+500-ot(),10<t)){if(fl(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Mt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=t0($r.bind(null,e,Ot,Vs),t);break}$r(e,Ot,Vs);break;case 4:if(pr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var u=31-ws(n);l=1<<u,u=t[u],u>a&&(a=u),n&=~l}if(n=a,n=ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*E2(n/1960))-n,10<n){e.timeoutHandle=t0($r.bind(null,e,Ot,Vs),n);break}$r(e,Ot,Vs);break;case 5:$r(e,Ot,Vs);break;default:throw Error(ue(329))}}}return Ut(e,ot()),e.callbackNode===r?Jp.bind(null,e):null}function w0(e,t){var r=Di;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=Al(e,t),e!==2&&(t=Ot,Ot=r,t!==null&&j0(t)),e}function j0(e){Ot===null?Ot=e:Ot.push.apply(Ot,e)}function T2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Ns(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pr(e,t){for(t&=~bu,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ws(t),n=1<<r;e[r]=-1,t&=~n}}function fm(e){if(Le&6)throw Error(ue(327));Ln();var t=fl(e,0);if(!(t&1))return Ut(e,ot()),null;var r=Al(e,t);if(e.tag!==0&&r===2){var n=Gc(e);n!==0&&(t=n,r=w0(e,n))}if(r===1)throw r=Yi,Qr(e,0),pr(e,t),Ut(e,ot()),r;if(r===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,Ot,Vs),Ut(e,ot()),null}function ju(e,t){var r=Le;Le|=1;try{return e(t)}finally{Le=r,Le===0&&(Hn=ot()+500,Hl&&zr())}}function en(e){yr!==null&&yr.tag===0&&!(Le&6)&&Ln();var t=Le;Le|=1;var r=ds.transition,n=Re;try{if(ds.transition=null,Re=1,e)return e()}finally{Re=n,ds.transition=r,Le=t,!(Le&6)&&zr()}}function Nu(){Gt=Mn.current,Ge(Mn)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,i2(r)),ht!==null)for(r=ht.return;r!==null;){var n=r;switch(ru(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vl();break;case 3:$n(),Ge(qt),Ge(Ct),hu();break;case 5:du(n);break;case 4:$n();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:lu(n.type._context);break;case 22:case 23:Nu()}r=r.return}if(vt=e,ht=e=Cr(e.current,null),jt=Gt=t,gt=0,Yi=null,bu=Ql=Zr=0,Ot=Di=null,Vr!==null){for(t=0;t<Vr.length;t++)if(r=Vr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var u=l.next;l.next=a,n.next=u}r.pending=n}Vr=null}return e}function Yp(e,t){do{var r=ht;try{if(au(),nl.current=El,Cl){for(var n=st.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Cl=!1}if(Xr=0,yt=xt=st=null,Ei=!1,Qi=0,vu.current=null,r===null||r.return===null){gt=1,Yi=t,ht=null;break}e:{var l=e,u=r.return,h=r,m=t;if(t=jt,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var x=m,g=h,N=g.tag;if(!(g.mode&1)&&(N===0||N===11||N===15)){var w=g.alternate;w?(g.updateQueue=w.updateQueue,g.memoizedState=w.memoizedState,g.lanes=w.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=tm(u);if(E!==null){E.flags&=-257,sm(E,u,h,l,t),E.mode&1&&em(l,x,t),t=E,m=x;var S=t.updateQueue;if(S===null){var D=new Set;D.add(m),t.updateQueue=D}else S.add(m);break e}else{if(!(t&1)){em(l,x,t),ku();break e}m=Error(ue(426))}}else if(Je&&h.mode&1){var A=tm(u);if(A!==null){!(A.flags&65536)&&(A.flags|=256),sm(A,u,h,l,t),nu(Un(m,h));break e}}l=m=Un(m,h),gt!==4&&(gt=2),Di===null?Di=[l]:Di.push(l),l=u;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var j=zp(l,m,t);Qh(l,j);break e;case 1:h=m;var b=l.type,C=l.stateNode;if(!(l.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Sr===null||!Sr.has(C)))){l.flags|=65536,t&=-t,l.lanes|=t;var z=Fp(l,h,t);Qh(l,z);break e}}l=l.return}while(l!==null)}e1(r)}catch($){t=$,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(!0)}function Xp(){var e=Tl.current;return Tl.current=El,e===null?El:e}function ku(){(gt===0||gt===3||gt===2)&&(gt=4),vt===null||!(Zr&268435455)&&!(Ql&268435455)||pr(vt,jt)}function Al(e,t){var r=Le;Le|=2;var n=Xp();(vt!==e||jt!==t)&&(Vs=null,Qr(e,t));do try{D2();break}catch(a){Yp(e,a)}while(!0);if(au(),Le=r,Tl.current=n,ht!==null)throw Error(ue(261));return vt=null,jt=0,gt}function D2(){for(;ht!==null;)Zp(ht)}function M2(){for(;ht!==null&&!s4();)Zp(ht)}function Zp(e){var t=s1(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,t===null?e1(e):ht=t,vu.current=null}function e1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=k2(r,t),r!==null){r.flags&=32767,ht=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,ht=null;return}}else if(r=N2(r,t,Gt),r!==null){ht=r;return}if(t=t.sibling,t!==null){ht=t;return}ht=t=e}while(t!==null);gt===0&&(gt=5)}function $r(e,t,r){var n=Re,a=ds.transition;try{ds.transition=null,Re=1,A2(e,t,r,n)}finally{ds.transition=a,Re=n}return null}function A2(e,t,r,n){do Ln();while(yr!==null);if(Le&6)throw Error(ue(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(h4(e,l),e===vt&&(ht=vt=null,jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ga||(Ga=!0,r1(ml,function(){return Ln(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=ds.transition,ds.transition=null;var u=Re;Re=1;var h=Le;Le|=4,vu.current=null,_2(e,r),Qp(r,e),X4(Zc),pl=!!Xc,Zc=Xc=null,e.current=r,C2(r),r4(),Le=h,Re=u,ds.transition=l}else e.current=r;if(Ga&&(Ga=!1,yr=e,Ml=a),l=e.pendingLanes,l===0&&(Sr=null),a4(r.stateNode),Ut(e,ot()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Dl)throw Dl=!1,e=v0,v0=null,e;return Ml&1&&e.tag!==0&&Ln(),l=e.pendingLanes,l&1?e===b0?Mi++:(Mi=0,b0=e):Mi=0,zr(),null}function Ln(){if(yr!==null){var e=zf(Ml),t=ds.transition,r=Re;try{if(ds.transition=null,Re=16>e?16:e,yr===null)var n=!1;else{if(e=yr,yr=null,Ml=0,Le&6)throw Error(ue(331));var a=Le;for(Le|=4,be=e.current;be!==null;){var l=be,u=l.child;if(be.flags&16){var h=l.deletions;if(h!==null){for(var m=0;m<h.length;m++){var x=h[m];for(be=x;be!==null;){var g=be;switch(g.tag){case 0:case 11:case 15:Ti(8,g,l)}var N=g.child;if(N!==null)N.return=g,be=N;else for(;be!==null;){g=be;var w=g.sibling,E=g.return;if(Wp(g),g===x){be=null;break}if(w!==null){w.return=E,be=w;break}be=E}}}var S=l.alternate;if(S!==null){var D=S.child;if(D!==null){S.child=null;do{var A=D.sibling;D.sibling=null,D=A}while(D!==null)}}be=l}}if(l.subtreeFlags&2064&&u!==null)u.return=l,be=u;else e:for(;be!==null;){if(l=be,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ti(9,l,l.return)}var j=l.sibling;if(j!==null){j.return=l.return,be=j;break e}be=l.return}}var b=e.current;for(be=b;be!==null;){u=be;var C=u.child;if(u.subtreeFlags&2064&&C!==null)C.return=u,be=C;else e:for(u=b;be!==null;){if(h=be,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Gl(9,h)}}catch($){at(h,h.return,$)}if(h===u){be=null;break e}var z=h.sibling;if(z!==null){z.return=h.return,be=z;break e}be=h.return}}if(Le=a,zr(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(Il,e)}catch{}n=!0}return n}finally{Re=r,ds.transition=t}}return!1}function pm(e,t,r){t=Un(r,t),t=zp(e,t,1),e=kr(e,t,1),t=Mt(),e!==null&&(na(e,1,t),Ut(e,t))}function at(e,t,r){if(e.tag===3)pm(e,e,r);else for(;t!==null;){if(t.tag===3){pm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Sr===null||!Sr.has(n))){e=Un(r,e),e=Fp(t,e,1),t=kr(t,e,1),e=Mt(),t!==null&&(na(t,1,e),Ut(t,e));break}}t=t.return}}function B2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Mt(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(jt&r)===r&&(gt===4||gt===3&&(jt&130023424)===jt&&500>ot()-wu?Qr(e,0):bu|=r),Ut(e,t)}function t1(e,t){t===0&&(e.mode&1?(t=La,La<<=1,!(La&130023424)&&(La=4194304)):t=1);var r=Mt();e=tr(e,t),e!==null&&(na(e,t,r),Ut(e,r))}function z2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),t1(e,r)}function F2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(t),t1(e,r)}var s1;s1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||qt.current)Rt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Rt=!1,j2(e,t,r);Rt=!!(e.flags&131072)}else Rt=!1,Je&&t.flags&1048576&&ap(t,jl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;al(e,t),e=t.pendingProps;var a=In(t,Ct.current);Pn(t,r),a=fu(null,t,n,e,a,r);var l=pu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$t(n)?(l=!0,bl(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,cu(t),a.updater=Vl,t.stateNode=a,a._reactInternals=t,o0(t,n,e,r),t=d0(null,t,n,!0,l,r)):(t.tag=0,Je&&l&&su(t),Dt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(al(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=L2(n),e=gs(n,e),a){case 0:t=u0(null,t,n,e,r);break e;case 1:t=im(null,t,n,e,r);break e;case 11:t=rm(null,t,n,e,r);break e;case 14:t=nm(null,t,n,gs(n.type,e),r);break e}throw Error(ue(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gs(n,a),u0(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gs(n,a),im(e,t,n,a,r);case 3:e:{if(Ip(t),e===null)throw Error(ue(387));n=t.pendingProps,l=t.memoizedState,a=l.element,hp(e,t),Sl(t,n,null,r);var u=t.memoizedState;if(n=u.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Un(Error(ue(423)),t),t=am(e,t,n,r,a);break e}else if(n!==a){a=Un(Error(ue(424)),t),t=am(e,t,n,r,a);break e}else for(Qt=Nr(t.stateNode.containerInfo.firstChild),Kt=t,Je=!0,bs=null,r=up(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rn(),n===a){t=sr(e,t,r);break e}Dt(e,t,n,r)}t=t.child}return t;case 5:return mp(t),e===null&&i0(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,u=a.children,e0(n,a)?u=null:l!==null&&e0(n,l)&&(t.flags|=32),Op(e,t),Dt(e,t,u,r),t.child;case 6:return e===null&&i0(t),null;case 13:return Rp(e,t,r);case 4:return uu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=qn(t,null,n,r):Dt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gs(n,a),rm(e,t,n,a,r);case 7:return Dt(e,t,t.pendingProps,r),t.child;case 8:return Dt(e,t,t.pendingProps.children,r),t.child;case 12:return Dt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,u=a.value,He(Nl,n._currentValue),n._currentValue=u,l!==null)if(Ns(l.value,u)){if(l.children===a.children&&!qt.current){t=sr(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var h=l.dependencies;if(h!==null){u=l.child;for(var m=h.firstContext;m!==null;){if(m.context===n){if(l.tag===1){m=Ys(-1,r&-r),m.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var g=x.pending;g===null?m.next=m:(m.next=g.next,g.next=m),x.pending=m}}l.lanes|=r,m=l.alternate,m!==null&&(m.lanes|=r),a0(l.return,r,t),h.lanes|=r;break}m=m.next}}else if(l.tag===10)u=l.type===t.type?null:l.child;else if(l.tag===18){if(u=l.return,u===null)throw Error(ue(341));u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),a0(u,r,t),u=l.sibling}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===t){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}Dt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Pn(t,r),a=hs(a),n=n(a),t.flags|=1,Dt(e,t,n,r),t.child;case 14:return n=t.type,a=gs(n,t.pendingProps),a=gs(n.type,a),nm(e,t,n,a,r);case 15:return Pp(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gs(n,a),al(e,t),t.tag=1,$t(n)?(e=!0,bl(t)):e=!1,Pn(t,r),Bp(t,n,a),o0(t,n,a,r),d0(null,t,n,!0,e,r);case 19:return qp(e,t,r);case 22:return Lp(e,t,r)}throw Error(ue(156,t.tag))};function r1(e,t){return Df(e,t)}function P2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(e,t,r,n){return new P2(e,t,r,n)}function Su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L2(e){if(typeof e=="function")return Su(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H0)return 11;if(e===W0)return 14}return 2}function Cr(e,t){var r=e.alternate;return r===null?(r=us(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function cl(e,t,r,n,a,l){var u=2;if(n=e,typeof e=="function")Su(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case wn:return Kr(r.children,a,l,t);case U0:u=8,a|=8;break;case Ac:return e=us(12,r,t,a|2),e.elementType=Ac,e.lanes=l,e;case Bc:return e=us(13,r,t,a),e.elementType=Bc,e.lanes=l,e;case zc:return e=us(19,r,t,a),e.elementType=zc,e.lanes=l,e;case mf:return Kl(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case df:u=10;break e;case hf:u=9;break e;case H0:u=11;break e;case W0:u=14;break e;case hr:u=16,n=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=us(u,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Kr(e,t,r,n){return e=us(7,e,n,t),e.lanes=r,e}function Kl(e,t,r,n){return e=us(22,e,n,t),e.elementType=mf,e.lanes=r,e.stateNode={isHidden:!1},e}function pc(e,t,r){return e=us(6,e,null,t),e.lanes=r,e}function xc(e,t,r){return t=us(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function O2(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jo(0),this.expirationTimes=Jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _u(e,t,r,n,a,l,u,h,m){return e=new O2(e,t,r,h,m),t===1?(t=1,l===!0&&(t|=8)):t=0,l=us(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(l),e}function I2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function n1(e){if(!e)return Tr;e=e._reactInternals;e:{if(nn(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var r=e.type;if($t(r))return np(e,r,t)}return t}function i1(e,t,r,n,a,l,u,h,m){return e=_u(r,n,!0,e,a,l,u,h,m),e.context=n1(null),r=e.current,n=Mt(),a=_r(r),l=Ys(n,a),l.callback=t??null,kr(r,l,a),e.current.lanes=a,na(e,a,n),Ut(e,n),e}function Jl(e,t,r,n){var a=t.current,l=Mt(),u=_r(a);return r=n1(r),t.context===null?t.context=r:t.pendingContext=r,t=Ys(l,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=kr(a,t,u),e!==null&&(js(e,a,u,l),rl(e,a,u)),u}function Bl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Cu(e,t){xm(e,t),(e=e.alternate)&&xm(e,t)}function R2(){return null}var a1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eu(e){this._internalRoot=e}Yl.prototype.render=Eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Jl(e,t,null,null)};Yl.prototype.unmount=Eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;en(function(){Jl(null,e,null,null)}),t[er]=null}};function Yl(e){this._internalRoot=e}Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fr.length&&t!==0&&t<fr[r].priority;r++);fr.splice(r,0,e),r===0&&If(e)}};function Tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gm(){}function q2(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var x=Bl(u);l.call(x)}}var u=i1(t,n,e,0,null,!1,!1,"",gm);return e._reactRootContainer=u,e[er]=u.current,Ui(e.nodeType===8?e.parentNode:e),en(),u}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var h=n;n=function(){var x=Bl(m);h.call(x)}}var m=_u(e,0,!1,null,null,!1,!1,"",gm);return e._reactRootContainer=m,e[er]=m.current,Ui(e.nodeType===8?e.parentNode:e),en(function(){Jl(t,m,r,n)}),m}function Zl(e,t,r,n,a){var l=r._reactRootContainer;if(l){var u=l;if(typeof a=="function"){var h=a;a=function(){var m=Bl(u);h.call(m)}}Jl(t,u,e,a)}else u=q2(r,t,e,a,n);return Bl(u)}Ff=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bi(t.pendingLanes);r!==0&&(Q0(t,r|1),Ut(t,ot()),!(Le&6)&&(Hn=ot()+500,zr()))}break;case 13:en(function(){var n=tr(e,1);if(n!==null){var a=Mt();js(n,e,1,a)}}),Cu(e,1)}};K0=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var r=Mt();js(t,e,134217728,r)}Cu(e,134217728)}};Pf=function(e){if(e.tag===13){var t=_r(e),r=tr(e,t);if(r!==null){var n=Mt();js(r,e,t,n)}Cu(e,t)}};Lf=function(){return Re};Of=function(e,t){var r=Re;try{return Re=e,t()}finally{Re=r}};Hc=function(e,t,r){switch(t){case"input":if(Lc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ul(n);if(!a)throw Error(ue(90));pf(n),Lc(n,a)}}}break;case"textarea":gf(e,r);break;case"select":t=r.value,t!=null&&An(e,!!r.multiple,t,!1)}};kf=ju;Sf=en;var $2={usingClientEntryPoint:!1,Events:[aa,Sn,Ul,jf,Nf,ju]},pi={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U2={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ef(e),e===null?null:e.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||R2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{Il=Qa.inject(U2),Ps=Qa}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$2;Zt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(t))throw Error(ue(200));return I2(e,t,null,r)};Zt.createRoot=function(e,t){if(!Tu(e))throw Error(ue(299));var r=!1,n="",a=a1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=_u(e,1,!1,null,null,r,!1,n,a),e[er]=t.current,Ui(e.nodeType===8?e.parentNode:e),new Eu(t)};Zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=Ef(t),e=e===null?null:e.stateNode,e};Zt.flushSync=function(e){return en(e)};Zt.hydrate=function(e,t,r){if(!Xl(t))throw Error(ue(200));return Zl(null,e,t,!0,r)};Zt.hydrateRoot=function(e,t,r){if(!Tu(e))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",u=a1;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=i1(t,null,e,1,r??null,a,!1,l,u),e[er]=t.current,Ui(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Yl(t)};Zt.render=function(e,t,r){if(!Xl(t))throw Error(ue(200));return Zl(null,e,t,!1,r)};Zt.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(ue(40));return e._reactRootContainer?(en(function(){Zl(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1};Zt.unstable_batchedUpdates=ju;Zt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xl(r))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return Zl(e,t,r,!1,n)};Zt.version="18.3.1-next-f1338f8080-20240426";function l1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l1)}catch(e){console.error(e)}}l1(),lf.exports=Zt;var H2=lf.exports,o1,ym=H2;o1=ym.createRoot,ym.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xe=(e,t)=>{const r=F.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:h="",children:m,...x},g)=>F.createElement("svg",{ref:g,...W2,width:a,height:a,stroke:n,strokeWidth:u?Number(l)*24/Number(a):l,className:["lucide",`lucide-${V2(e)}`,h].join(" "),...x},[...t.map(([N,w])=>F.createElement(N,w)),...Array.isArray(m)?m:[m]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=xe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=xe("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=xe("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=xe("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=xe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=xe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=xe("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=xe("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=xe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=xe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=xe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=xe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=xe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=xe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=xe("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=xe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=xe("FileTerminal",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 16 2-2-2-2",key:"10vzyd"}],["path",{d:"M12 18h4",key:"1wd2n7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=xe("FunctionSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=xe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=xe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=xe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=xe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=xe("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=xe("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=xe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=xe("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=xe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=xe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=xe("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=xe("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=xe("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=xe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=xe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=xe("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=xe("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=xe("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=xe("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ey=[{id:"home",icon:y1,label:"Accueil"},{id:"dashboard",icon:bt,label:"Programmes"},{id:"my-programs",icon:J2,label:"Mes Programmes"},{id:"e-biblio",icon:cy,label:"e-Biblio"},{id:"forum",icon:Xi,label:"Forum"},{id:"exams",icon:g1,label:"Examens"}],Ty=[{id:"home",icon:y1,label:"Accueil"},{id:"getting-started",icon:ry,label:"Où commencer"},{id:"program-manager",icon:bt,label:"Programme Manager"},{id:"homework-manager",icon:p1,label:"Devoir Manager"},{id:"performance",icon:sn,label:"Performance"},{id:"payments",icon:Vn,label:"Rémunération"}];function Dy({isOpen:e,onClose:t,onViewChange:r,currentView:n}){const[a,l]=F.useState(null);F.useEffect(()=>{const x=sessionStorage.getItem("currentUser");x&&l(JSON.parse(x))},[]);const u=(a==null?void 0:a.userType)==="enseignant"?Ty:Ey,h=x=>{window.location.href=x},m=x=>{x==="exams"?window.location.href="/exams":(r(x),t())};return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:t}),s.jsx("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-30
        w-64 bg-white border-r border-gray-200
        transform transition-transform duration-300 ease-in-out
        ${e?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-[#462D12] text-white p-2 rounded-lg",children:s.jsx(bt,{className:"h-6 w-6"})}),s.jsx("h1",{className:"ml-3 text-xl font-bold text-[#462D12]",children:"KN"})]}),s.jsx("button",{onClick:t,className:"lg:hidden p-1 rounded-lg hover:bg-gray-100",children:s.jsx(Ss,{className:"h-6 w-6 text-gray-600"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:s.jsx("nav",{className:"space-y-1",children:u.map(x=>s.jsxs("button",{onClick:()=>m(x.id),className:`flex items-center px-2 py-3 w-full rounded-lg transition-colors group
                    ${n===x.id?"bg-[#4F6D0B] text-white":"text-gray-700 hover:bg-[#4F6D0B] hover:text-white"}`,children:[s.jsx(x.icon,{className:`h-5 w-5 ${n===x.id?"text-white":"group-hover:text-white"}`}),s.jsx("span",{className:"ml-3 text-sm font-medium",children:x.label})]},x.id))})}),s.jsxs("div",{className:"p-4 border-t space-y-2",children:[s.jsxs("div",{className:"bg-[#C19620]/10 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-[#462D12] font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Notre équipe est là pour vous accompagner"}),s.jsx("button",{onClick:()=>{r("contact"),t()},className:"mt-3 w-full bg-[#C19620] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-[#C19620]/90 transition-colors",children:"Contactez-nous"})]}),s.jsxs("div",{className:"flex flex-col space-y-2 pt-2 border-t",children:[s.jsxs("button",{onClick:()=>h("/terms"),className:"flex items-center text-sm text-gray-600 hover:text-[#4F6D0B]",children:[s.jsx(ay,{className:"h-4 w-4 mr-2"}),"Conditions générales"]}),s.jsxs("button",{onClick:()=>h("/privacy"),className:"flex items-center text-sm text-gray-600 hover:text-[#4F6D0B]",children:[s.jsx(wy,{className:"h-4 w-4 mr-2"}),"Politique de confidentialité"]})]})]})]})})]})}const My="modulepreload",Ay=function(e){return"/"+e},bm={},Xn=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(r.map(m=>{if(m=Ay(m),m in bm)return;bm[m]=!0;const x=m.endsWith(".css"),g=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":My,x||(N.as="script"),N.crossOrigin="",N.href=m,h&&N.setAttribute("nonce",h),document.head.appendChild(N),x)return new Promise((w,E)=>{N.addEventListener("load",w),N.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})},By=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xn(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Bu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class wm extends Bu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class jm extends Bu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Nm extends Bu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var k0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(k0||(k0={}));var zy=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};class Fy{constructor(t,{headers:r={},customFetch:n,region:a=k0.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=By(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return zy(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:u,signal:h}=r;let m={},{region:x}=r;x||(x=this.region);const g=new URL(`${this.url}/${t}`);x&&x!=="any"&&(m["x-region"]=x,g.searchParams.set("forceFunctionRegion",x));let N;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",N=u):typeof u=="string"?(m["Content-Type"]="text/plain",N=u):typeof FormData<"u"&&u instanceof FormData?N=u:(m["Content-Type"]="application/json",N=JSON.stringify(u)));const w=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:N,signal:h}).catch(A=>{throw A.name==="AbortError"?A:new wm(A)}),E=w.headers.get("x-relay-error");if(E&&E==="true")throw new jm(w);if(!w.ok)throw new Nm(w);let S=((n=w.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),D;return S==="application/json"?D=yield w.json():S==="application/octet-stream"?D=yield w.blob():S==="text/event-stream"?D=w:S==="multipart/form-data"?D=yield w.formData():D=yield w.text(),{data:D,error:null,response:w}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new wm(a)}:{data:null,error:a,response:a instanceof Nm||a instanceof jm?a.context:void 0}}})}}var It={},zu={},to={},ua={},so={},ro={},Py=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gn=Py();const Ly=Gn.fetch,j1=Gn.fetch.bind(Gn),N1=Gn.Headers,Oy=Gn.Request,Iy=Gn.Response,Zn=Object.freeze(Object.defineProperty({__proto__:null,Headers:N1,Request:Oy,Response:Iy,default:j1,fetch:Ly},Symbol.toStringTag,{value:"Module"})),Ry=gg(Zn);var no={};Object.defineProperty(no,"__esModule",{value:!0});let qy=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};no.default=qy;var k1=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ro,"__esModule",{value:!0});const $y=k1(Ry),Uy=k1(no);let Hy=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=$y.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,m,x;let g=null,N=null,w=null,E=l.status,S=l.statusText;if(l.ok){if(this.method!=="HEAD"){const b=await l.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?N=b:N=JSON.parse(b))}const A=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(m=l.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");A&&j&&j.length>1&&(w=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(g={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,w=null,E=406,S="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const A=await l.text();try{g=JSON.parse(A),Array.isArray(g)&&l.status===404&&(N=[],g=null,E=200,S="OK")}catch{l.status===404&&A===""?(E=204,S="No Content"):g={message:A}}if(g&&this.isMaybeSingle&&(!((x=g==null?void 0:g.details)===null||x===void 0)&&x.includes("0 rows"))&&(g=null,E=200,S="OK"),g&&this.shouldThrowOnError)throw new Uy.default(g)}return{error:g,data:N,count:w,status:E,statusText:S}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,h,m;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(h=l==null?void 0:l.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=l==null?void 0:l.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};ro.default=Hy;var Wy=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(so,"__esModule",{value:!0});const Vy=Wy(ro);let Gy=class extends Vy.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${t}`),this.url.searchParams.set(u,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var h;const m=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),x=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${x}"; options=${m};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};so.default=Gy;var Qy=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ua,"__esModule",{value:!0});const Ky=Qy(so);let Jy=class extends Ky.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${l}fts${u}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ua.default=Jy;var Yy=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(to,"__esModule",{value:!0});const xi=Yy(ua);let Xy=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let l=!1;const u=(t??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),n&&this.headers.append("Prefer",`count=${n}`),new xi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const l="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(u.length>0){const h=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new xi.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:l=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const m=t.reduce((x,g)=>x.concat(Object.keys(g)),[]);if(m.length>0){const x=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",x.join(","))}}return new xi.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new xi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new xi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};to.default=Xy;var S1=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zu,"__esModule",{value:!0});const Zy=S1(to),e6=S1(ua);let t6=class _1{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Zy.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new _1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:l}={}){var u;let h;const m=new URL(`${this.url}/rpc/${t}`);let x;n||a?(h=n?"HEAD":"GET",Object.entries(r).filter(([N,w])=>w!==void 0).map(([N,w])=>[N,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([N,w])=>{m.searchParams.append(N,w)})):(h="POST",x=r);const g=new Headers(this.headers);return l&&g.set("Prefer",`count=${l}`),new e6.default({method:h,url:m,headers:g,schema:this.schemaName,body:x,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};zu.default=t6;var ei=Ht&&Ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(It,"__esModule",{value:!0});It.PostgrestError=It.PostgrestBuilder=It.PostgrestTransformBuilder=It.PostgrestFilterBuilder=It.PostgrestQueryBuilder=It.PostgrestClient=void 0;const C1=ei(zu);It.PostgrestClient=C1.default;const E1=ei(to);It.PostgrestQueryBuilder=E1.default;const T1=ei(ua);It.PostgrestFilterBuilder=T1.default;const D1=ei(so);It.PostgrestTransformBuilder=D1.default;const M1=ei(ro);It.PostgrestBuilder=M1.default;const A1=ei(no);It.PostgrestError=A1.default;var s6=It.default={PostgrestClient:C1.default,PostgrestQueryBuilder:E1.default,PostgrestFilterBuilder:T1.default,PostgrestTransformBuilder:D1.default,PostgrestBuilder:M1.default,PostgrestError:A1.default};const{PostgrestClient:r6,PostgrestQueryBuilder:W3,PostgrestFilterBuilder:V3,PostgrestTransformBuilder:G3,PostgrestBuilder:Q3,PostgrestError:K3}=s6;class n6{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const i6="2.15.5",a6=`realtime-js/${i6}`,l6="1.0.0",S0=1e4,o6=1e3,c6=100;var Ai;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ai||(Ai={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var vs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vs||(vs={}));var _0;(function(e){e.websocket="websocket"})(_0||(_0={}));var Hr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hr||(Hr={}));class u6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),l=r.getUint8(2);let u=this.HEADER_LENGTH+2;const h=n.decode(t.slice(u,u+a));u=u+a;const m=n.decode(t.slice(u,u+l));u=u+l;const x=JSON.parse(n.decode(t.slice(u,t.byteLength)));return{ref:null,topic:h,event:m,payload:x}}}class B1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ue||(Ue={}));const km=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((l,u)=>(l[u]=d6(u,e,t,a),l),{})},d6=(e,t,r,n)=>{const a=t.find(h=>h.name===e),l=a==null?void 0:a.type,u=r[e];return l&&!n.includes(l)?z1(l,u):C0(u)},z1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return p6(t,r)}switch(e){case Ue.bool:return h6(t);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return m6(t);case Ue.json:case Ue.jsonb:return f6(t);case Ue.timestamp:return x6(t);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return C0(t);default:return C0(t)}},C0=e=>e,h6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},m6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},f6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},p6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let l;const u=e.slice(1,r);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>z1(t,h))}return e},x6=e=>typeof e=="string"?e.replace(" ","T"):e,F1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class gc{constructor(t,r,n={},a=S0){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sm||(Sm={}));class Bi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bi.syncState(this.state,a,l,u),this.pendingDiffs.forEach(m=>{this.state=Bi.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(n.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Bi.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const l=this.cloneDeep(t),u=this.transformState(r),h={},m={};return this.map(l,(x,g)=>{u[x]||(m[x]=g)}),this.map(u,(x,g)=>{const N=l[x];if(N){const w=g.map(A=>A.presence_ref),E=N.map(A=>A.presence_ref),S=g.filter(A=>E.indexOf(A.presence_ref)<0),D=N.filter(A=>w.indexOf(A.presence_ref)<0);S.length>0&&(h[x]=S),D.length>0&&(m[x]=D)}else h[x]=g}),this.syncDiff(l,{joins:h,leaves:m},n,a)}static syncDiff(t,r,n,a){const{joins:l,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(l,(h,m)=>{var x;const g=(x=t[h])!==null&&x!==void 0?x:[];if(t[h]=this.cloneDeep(m),g.length>0){const N=t[h].map(E=>E.presence_ref),w=g.filter(E=>N.indexOf(E.presence_ref)<0);t[h].unshift(...w)}n(h,g,m)}),this.map(u,(h,m)=>{let x=t[h];if(!x)return;const g=m.map(N=>N.presence_ref);x=x.filter(N=>g.indexOf(N.presence_ref)<0),t[h]=x,a(h,x,m),x.length===0&&delete t[h]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _m;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_m||(_m={}));var zi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zi||(zi={}));var Gs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gs||(Gs={}));class Fu{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new gc(this,vs.join,this.params,this.timeout),this.rejoinTimer=new B1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vs.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Bi(this),this.broadcastEndpointURL=F1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:u,presence:h,private:m}}=this.params,x=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(E=>E.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[zi.PRESENCE]&&this.bindings[zi.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,N={},w={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:x,private:m};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(E=>t==null?void 0:t(Gs.CHANNEL_ERROR,E)),this._onClose(()=>t==null?void 0:t(Gs.CLOSED)),this.updateJoinPayload(Object.assign({config:w},N)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var S;if(this.socket.setAuth(),E===void 0){t==null||t(Gs.SUBSCRIBED);return}else{const D=this.bindings.postgres_changes,A=(S=D==null?void 0:D.length)!==null&&S!==void 0?S:0,j=[];for(let b=0;b<A;b++){const C=D[b],{filter:{event:z,schema:$,table:U,filter:Y}}=C,Z=E&&E[b];if(Z&&Z.event===z&&Z.schema===$&&Z.table===U&&Z.filter===Y)j.push(Object.assign(Object.assign({},C),{id:Z.id}));else{this.unsubscribe(),this.state=pt.errored,t==null||t(Gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Gs.SUBSCRIBED);return}}).receive("error",E=>{this.state=pt.errored,t==null||t(Gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===pt.joined&&t===zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=x.body)===null||a===void 0?void 0:a.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,m;const x=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),x.receive("ok",()=>l("ok")),x.receive("error",()=>l("error")),x.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new gc(this,vs.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,l=setTimeout(()=>a.abort(),n),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),u}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new gc(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>c6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,l;const u=t.toLocaleLowerCase(),{close:h,error:m,leave:x,join:g}=vs;if(n&&[h,m,x,g].indexOf(u)>=0&&n!==this._joinRef())return;let w=this._onMessage(u,r,n);if(r&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(E=>{var S,D,A;return((S=E.filter)===null||S===void 0?void 0:S.event)==="*"||((A=(D=E.filter)===null||D===void 0?void 0:D.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(E=>E.callback(w,n)):(l=this.bindings[u])===null||l===void 0||l.filter(E=>{var S,D,A,j,b,C;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in E){const z=E.id,$=(S=E.filter)===null||S===void 0?void 0:S.event;return z&&((D=r.ids)===null||D===void 0?void 0:D.includes(z))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const z=(b=(j=E==null?void 0:E.filter)===null||j===void 0?void 0:j.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return z==="*"||z===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===u}).map(E=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:D,table:A,commit_timestamp:j,type:b,errors:C}=S;w=Object.assign(Object.assign({},{schema:D,table:A,commit_timestamp:j,eventType:b,new:{},old:{},errors:C}),this._getPayloadRecords(S))}E.callback(w,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),l={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&Fu.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vs.close,{},t)}_onError(t){this._on(vs.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=km(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=km(t.columns,t.old_record)),r}}const yc=()=>{},Ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},g6=[1e3,2e3,5e3,1e4],y6=1e4,v6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class b6{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=S0,this.transport=null,this.heartbeatIntervalMs=Ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yc,this.ref=0,this.reconnectTimer=null,this.logger=yc,this.conn=null,this.sendBuffer=[],this.serializer=new u6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>Xn(async()=>{const{default:h}=await Promise.resolve().then(()=>Zn);return{default:h}},void 0).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${_0.websocket}`,this.httpEndpoint=F1(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n6.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l6}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ai.connecting:return Hr.Connecting;case Ai.open:return Hr.Open;case Ai.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(l=>l.topic===n);if(a)return a;{const l=new Fu(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:n,payload:a,ref:l}=t,u=()=>{this.encode(t,h=>{var m;(m=this.conn)===null||m===void 0||m.send(h)})};this.log("push",`${r} ${n} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(o6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:l,ref:u}=r,h=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${n} ${a} ${h}`.trim(),l),this.channels.filter(x=>x._isMember(n)).forEach(x=>x._trigger(a,l,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(vs.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([v6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:a6};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(vs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new B1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,l,u,h,m,x,g;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:S0,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Ka.HEARTBEAT_INTERVAL,this.worker=(l=t==null?void 0:t.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=t==null?void 0:t.heartbeatCallback)!==null&&h!==void 0?h:yc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t==null?void 0:t.reconnectAfterMs)!==null&&m!==void 0?m:N=>g6[N-1]||y6,this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:(N,w)=>w(JSON.stringify(N)),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Pu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class w6 extends Pu{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class E0 extends Pu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var j6=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};const P1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xn(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},N6=()=>j6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xn(()=>Promise.resolve().then(()=>Zn),void 0)).Response:Response}),T0=e=>{if(Array.isArray(e))return e.map(r=>T0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[a]=T0(n)}),t},k6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var an=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};const vc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S6=(e,t,r)=>an(void 0,void 0,void 0,function*(){const n=yield N6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const l=e.status||500,u=(a==null?void 0:a.statusCode)||l+"";t(new w6(vc(a),l,u))}).catch(a=>{t(new E0(vc(a),a))}):t(new E0(vc(e),e))}),_6=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(k6(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function da(e,t,r,n,a,l){return an(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(r,_6(t,n,a,l)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>S6(m,h,n))})})}function Pl(e,t,r,n){return an(this,void 0,void 0,function*(){return da(e,"GET",t,r,n)})}function zs(e,t,r,n,a){return an(this,void 0,void 0,function*(){return da(e,"POST",t,n,a,r)})}function D0(e,t,r,n,a){return an(this,void 0,void 0,function*(){return da(e,"PUT",t,n,a,r)})}function C6(e,t,r,n){return an(this,void 0,void 0,function*(){return da(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function L1(e,t,r,n,a){return an(this,void 0,void 0,function*(){return da(e,"DELETE",t,n,a,r)})}var E6=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};class T6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return E6(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}}var D6=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};class M6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new T6(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return D6(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}}var Lt=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};const A6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class B6{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=P1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Lt(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Cm),a);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,m&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const x=this._removeEmptyFolders(r),g=this._getFinalPath(x),N=yield(t=="PUT"?D0:zs)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:x,id:N.Id,fullPath:N.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}upload(t,r,n){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Lt(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",r);try{let m;const x=Object.assign({upsert:Cm.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",x.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",x.cacheControl)):(m=n,g["cache-control"]=`max-age=${x.cacheControl}`,g["content-type"]=x.contentType);const N=yield D0(this.fetch,h.toString(),m,{headers:g});return{data:{path:l,fullPath:N.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(dt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,r){return Lt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield zs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new Pu("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Lt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Lt(this,void 0,void 0,function*(){try{return{data:{path:(yield zs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Lt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),l=yield zs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Lt(this,void 0,void 0,function*(){try{const a=yield zs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),u=l?`?${l}`:"",h=this._getFinalPath(t),m=()=>Pl(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new M6(m,this.shouldThrowOnError)}info(t){return Lt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Pl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:T0(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}exists(t){return Lt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield C6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n)&&n instanceof E0){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const h=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});m!==""&&a.push(m);let x=a.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${n}${x}`)}}}remove(t){return Lt(this,void 0,void 0,function*(){try{return{data:yield L1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Lt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},A6),r),{prefix:t||""});return{data:yield zs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}listV2(t,r){return Lt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const z6="2.12.2",F6={"X-Client-Info":`storage-js/${z6}`};var mn=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};class P6{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const l=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},F6),r),this.fetch=P1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return mn(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}getBucket(t){return mn(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return mn(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return mn(this,void 0,void 0,function*(){try{return{data:yield D0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return mn(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return mn(this,void 0,void 0,function*(){try{return{data:yield L1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}}class L6 extends P6{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new B6(this.url,this.headers,t,this.fetch)}}const O6="2.58.0";let ji="";typeof Deno<"u"?ji="deno":typeof document<"u"?ji="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ji="react-native":ji="node";const I6={"X-Client-Info":`supabase-js-${ji}/${O6}`},R6={headers:I6},q6={schema:"public"},$6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U6={};var H6=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};const W6=e=>{let t;return e?t=e:typeof fetch>"u"?t=j1:t=fetch,(...r)=>t(...r)},V6=()=>typeof Headers>"u"?N1:Headers,G6=(e,t,r)=>{const n=W6(r),a=V6();return(l,u)=>H6(void 0,void 0,void 0,function*(){var h;const m=(h=yield t())!==null&&h!==void 0?h:e;let x=new a(u==null?void 0:u.headers);return x.has("apikey")||x.set("apikey",e),x.has("Authorization")||x.set("Authorization",`Bearer ${m}`),n(l,Object.assign(Object.assign({},u),{headers:x}))})};var Q6=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};function K6(e){return e.endsWith("/")?e:e+"/"}function J6(e,t){var r,n;const{db:a,auth:l,realtime:u,global:h}=e,{db:m,auth:x,realtime:g,global:N}=t,w={db:Object.assign(Object.assign({},m),a),auth:Object.assign(Object.assign({},x),l),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},N),h),{headers:Object.assign(Object.assign({},(r=N==null?void 0:N.headers)!==null&&r!==void 0?r:{}),(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Q6(this,void 0,void 0,function*(){return""})};return e.accessToken?w.accessToken=e.accessToken:delete w.accessToken,w}function Y6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(K6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const O1="2.72.0",yn=30*1e3,M0=3,bc=M0*yn,X6="http://localhost:9999",Z6="supabase.auth.token",ev={"X-Client-Info":`gotrue-js/${O1}`},A0="X-Supabase-Api-Version",I1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sv=10*60*1e3;class Lu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class rv extends Lu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function nv(e){return Ce(e)&&e.name==="AuthApiError"}class R1 extends Lu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Fr extends Lu{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class dr extends Fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iv(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class gi extends Fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ja extends Fr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ya extends Fr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function av(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class Em extends Fr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class B0 extends Fr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function wc(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class Tm extends Fr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class z0 extends Fr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dm=` 	
\r=`.split(""),lv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Dm.length;t+=1)e[Dm[t].charCodeAt(0)]=-2;for(let t=0;t<Ll.length;t+=1)e[Ll[t].charCodeAt(0)]=t;return e})();function Mm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ll[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ll[n]),t.queuedBits-=6}}function q1(e,t,r){const n=lv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Am(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{uv(u,n,r)};for(let u=0;u<e.length;u+=1)q1(e.charCodeAt(u),a,l);return t.join("")}function ov(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function cv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}ov(n,t)}}function uv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function dv(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)q1(e.charCodeAt(a),r,n);return new Uint8Array(t)}function hv(e){const t=[];return cv(e,r=>t.push(r)),new Uint8Array(t)}function mv(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Mm(a,r,n)),Mm(null,r,n),t.join("")}function fv(e){return Math.round(Date.now()/1e3)+e}function pv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ls=()=>typeof window<"u"&&typeof document<"u",Ir={tested:!1,writable:!1},$1=()=>{if(!ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ir.tested)return Ir.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ir.tested=!0,Ir.writable=!0}catch{Ir.tested=!0,Ir.writable=!1}return Ir.writable};function xv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{t[l]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const U1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xn(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},gv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Rr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ur=async(e,t)=>{await e.removeItem(t)};class io{constructor(){this.promise=new io.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}io.promiseConstructor=Promise;function jc(e){const t=e.split(".");if(t.length!==3)throw new z0("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!tv.test(t[n]))throw new z0("JWT not in base64url format");return{header:JSON.parse(Am(t[0])),payload:JSON.parse(Am(t[1])),signature:dv(t[2]),raw:{header:t[0],payload:t[1]}}}async function yv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function vv(e,t){return new Promise((n,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){n(u);return}}catch(u){if(!t(l,u)){a(u);return}}})()})}function bv(e){return("0"+e.toString(16)).substr(-2)}function wv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,bv).join("")}async function jv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function Nv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await jv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fn(e,t,r=!1){const n=wv();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await vn(e,`${t}-code-verifier`,a);const l=await Nv(n);return[l,n===l?"plain":"s256"]}const kv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sv(e){const t=e.headers.get(A0);if(!t||!t.match(kv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _v(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Cv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ev=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pn(e){if(!Ev.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nc(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bm(e){return JSON.parse(JSON.stringify(e))}var Tv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Ur=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Dv=[502,503,504];async function zm(e){var t;if(!gv(e))throw new B0(Ur(e),0);if(Dv.includes(e.status))throw new B0(Ur(e),e.status);let r;try{r=await e.json()}catch(l){throw new R1(Ur(l),l)}let n;const a=Sv(e);if(a&&a.getTime()>=I1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Tm(Ur(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new dr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Tm(Ur(r),e.status,r.weak_password.reasons);throw new rv(Ur(r),e.status||500,n)}const Mv=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function De(e,t,r,n){var a;const l=Object.assign({},n==null?void 0:n.headers);l[A0]||(l[A0]=I1["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const u=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(u.redirect_to=n.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await Av(e,t,r+h,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}}async function Av(e,t,r,n,a,l){const u=Mv(t,n,a,l);let h;try{h=await e(r,Object.assign({},u))}catch(m){throw console.error(m),new B0(Ur(m),0)}if(h.ok||await zm(h),n!=null&&n.noResolveJson)return h;try{return await h.json()}catch(m){await zm(m)}}function As(e){var t;let r=null;Pv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=fv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Fm(e){const t=As(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function xr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Bv(e){return{data:e,error:null}}function zv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l}=e,u=Tv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l},m=Object.assign({},u);return{data:{properties:h,user:m},error:null}}function Fv(e){return e}function Pv(e){return e.access_token&&e.refresh_token&&e.expires_in}const kc=["global","local","others"];var Lv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class Ov{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=U1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=kc[0]){if(kc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kc.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xr})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Lv(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:xr})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,l,u,h,m;try{const x={nextPage:null,lastPage:0,total:0},g=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Fv});if(g.error)throw g.error;const N=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(m=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return E.length>0&&(E.forEach(S=>{const D=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(S.split(";")[1].split("=")[1]);x[`${A}Page`]=D}),x.total=parseInt(w)),{data:Object.assign(Object.assign({},N),x),error:null}}catch(x){if(Ce(x))return{data:{users:[]},error:x};throw x}}async getUserById(t){pn(t);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:xr})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pn(t);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:xr})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pn(t);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:xr})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pn(t.userId);try{const{data:r,error:n}=await De(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pn(t.userId),pn(t.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}function Pm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Iv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xn={debug:!!(globalThis&&$1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class H1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Rv extends H1{}async function qv(e,t,r){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Rv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xn.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function W1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $v(e){return parseInt(e,16)}function Uv(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Hv(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:h,requestId:m,resources:x,scheme:g,uri:N,version:w}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const E=W1(e.address),S=g?`${g}://${n}`:n,D=e.statement?`${e.statement}
`:"",A=`${S} wants you to sign in with your Ethereum account:
${E}

${D}`;let j=`URI: ${N}
Version: ${w}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(j+=`
Expiration Time: ${a.toISOString()}`),h&&(j+=`
Not Before: ${h.toISOString()}`),m&&(j+=`
Request ID: ${m}`),x){let b=`
Resources:`;for(const C of x){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);b+=`
- ${C}`}j+=b}return`${A}
${j}`}Iv();const Wv={url:X6,storageKey:Z6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ev,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Lm(e,t,r){return await r()}const gn={};class sa{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sa.nextInstanceID,sa.nextInstanceID+=1,this.instanceID>0&&ls()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Wv),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Ov({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=U1(a.fetch),this.lock=a.lock||Lm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ls()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qv:this.lock=Lm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:$1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Pm(this.memoryStorage)),ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${O1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=xv(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ls()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),av(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ce(r)?{error:r}:{error:new R1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const l=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:As}),{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const m=u.session,x=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(t){var r,n,a;try{let l;if("email"in t){const{email:g,password:N,options:w}=t;let E=null,S=null;this.flowType==="pkce"&&([E,S]=await fn(this.storage,this.storageKey)),l=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:g,password:N,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:E,code_challenge_method:S},xform:As})}else if("phone"in t){const{phone:g,password:N,options:w}=t;l=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:N,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},channel:(a=w==null?void 0:w.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:As})}else throw new Ja("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const m=u.session,x=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:u,options:h}=t;r=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Fm})}else if("phone"in t){const{phone:l,password:u,options:h}=t;r=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Fm})}else throw new Ja("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new gi}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,l,u,h,m,x,g,N,w;let E,S;if("message"in t)E=t.message,S=t.signature;else{const{chain:D,wallet:A,statement:j,options:b}=t;let C;if(ls())if(typeof A=="object")C=A;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")C=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=A}const z=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),$=await C.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=W1($[0]);let Y=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!Y){const X=await C.request({method:"eth_chainId"});Y=$v(X)}const Z={domain:z.host,address:U,statement:j,uri:z.href,version:"1",chainId:Y,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(m=b==null?void 0:b.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(x=b==null?void 0:b.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(g=b==null?void 0:b.signInWithEthereum)===null||g===void 0?void 0:g.resources};E=Hv(Z),S=await C.request({method:"personal_sign",params:[Uv(E),U]})}try{const{data:D,error:A}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:S},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:As});if(A)throw A;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new gi}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:A})}catch(D){if(Ce(D))return{data:{user:null,session:null},error:D};throw D}}async signInWithSolana(t){var r,n,a,l,u,h,m,x,g,N,w,E;let S,D;if("message"in t)S=t.message,D=t.signature;else{const{chain:A,wallet:j,statement:b,options:C}=t;let z;if(ls())if(typeof j=="object")z=j;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))z=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=j}const $=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in z&&z.signIn){const U=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),b?{statement:b}:null));let Y;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")Y=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)Y=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)S=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),D=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${$.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(a=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((x=C==null?void 0:C.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((N=(g=C==null?void 0:C.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||N===void 0)&&N.length?["Resources",...C.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const U=await z.signMessage(new TextEncoder().encode(S),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=U}}try{const{data:A,error:j}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:mv(D)},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:As});if(j)throw j;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new gi}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:j})}catch(A){if(Ce(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(t){const r=await Rr(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:l,error:u}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:As});if(await ur(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new gi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(Ce(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:l,nonce:u}=t,h=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:As}),{data:m,error:x}=h;return x?{data:{user:null,session:null},error:x}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new gi}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:x})}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,l,u;try{if("email"in t){const{email:h,options:m}=t;let x=null,g=null;this.flowType==="pkce"&&([x,g]=await fn(this.storage,this.storageKey));const{error:N}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:g},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:N}}if("phone"in t){const{phone:h,options:m}=t,{data:x,error:g}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:g}}throw new Ja("You must provide either an email or phone number.")}catch(h){if(Ce(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(t){var r,n;try{let a,l;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:h}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:As});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,x=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await fn(this.storage,this.storageKey)),await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:Bv})}catch(l){if(Ce(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new dr;const{error:a}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:l}=t,{error:u}=await De(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:n,type:a,options:l}=t,{data:u,error:h}=await De(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Ja("You must provide either an email or phone number and a type")}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<bc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const u=await Rr(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=Nc()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(m,x,g)=>(!u&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,x,g))})}return{data:{session:t},error:null}}const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:xr}):await this._useSession(async r=>{var n,a,l;const{data:u,error:h}=r;if(h)throw h;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dr}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:xr})})}catch(r){if(Ce(r))return iv(r)&&(await this._removeSession(),await ur(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:l}=n;if(l)throw l;if(!a.session)throw new dr;const u=a.session;let h=null,m=null;this.flowType==="pkce"&&t.email!=null&&([h,m]=await fn(this.storage,this.storageKey));const{data:x,error:g}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:m}),jwt:u.access_token,xform:xr});if(g)throw g;return u.user=x.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new dr;const r=Date.now()/1e3;let n=r,a=!0,l=null;const{payload:u}=jc(t.access_token);if(u.exp&&(n=u.exp,a=n<=r),a){const{session:h,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(Ce(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:u,error:h}=r;if(h)throw h;t=(n=u.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new dr;const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ls())throw new Ya("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ya(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Em("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ya("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Em("No code detected.");const{data:b,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:m,token_type:x}=t;if(!l||!h||!u||!x)throw new Ya("No session defined in URL");const g=Math.round(Date.now()/1e3),N=parseInt(h);let w=g+N;m&&(w=parseInt(m));const E=w-g;E*1e3<=yn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${N}s`);const S=w-N;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,g);const{data:D,error:A}=await this._getUser(l);if(A)throw A;const j={provider_token:n,provider_refresh_token:a,access_token:l,expires_in:N,expires_at:w,refresh_token:u,token_type:x,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:t.type},error:null}}catch(n){if(Ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Rr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return{error:l};const u=(n=a.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:h}=await this.admin.signOut(u,t);if(h&&!(nv(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return t!=="others"&&(await this._removeSession(),await ur(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=pv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:l},error:u}=r;if(u)throw u;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await fn(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Ce(l))return{data:null,error:l};throw l}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async l=>{var u,h,m,x,g;const{data:N,error:w}=l;if(w)throw w;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(x=N.session)===null||x===void 0?void 0:x.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return ls()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ce(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:u}=r;if(u)throw u;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await vv(async a=>(a>0&&await yv(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:As})),(a,l)=>{const u=200*Math.pow(2,a);return l&&wc(l)&&Date.now()+u-n<yn})}catch(n){if(this._debug(r,"error",n),Ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ls()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Rr(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Rr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await vn(this.userStorage,this.storageKey+"-user",u)),a.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:Nc()}else if(a&&!a.user&&!a.user){const u=await Rr(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await ur(this.storage,this.storageKey+"-user"),await vn(this.storage,this.storageKey,a)):a.user=Nc()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<bc;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${bc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),wc(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(n,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new dr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new io;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new dr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),Ce(l)){const u={session:null,error:l};return wc(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,r)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await vn(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=Bm(a);await vn(this.storage,this.storageKey,l)}else{const a=Bm(r);await vn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ur(this.storage,this.storageKey),await ur(this.storage,this.storageKey+"-code-verifier"),await ur(this.storage,this.storageKey+"-user"),this.userStorage&&await ur(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/yn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${yn}ms, refresh threshold is ${M0} ticks`),a<=M0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof H1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,u]=await fn(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);a.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?{data:null,error:l}:await De(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:u}=r;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:m,error:x}=await De(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return x?{data:null,error:x}:(t.factorType==="totp"&&(!((a=m==null?void 0:m.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return{data:null,error:l};const{data:u,error:h}=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?{data:null,error:l}:await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=n.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:n,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:l}=t;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=jc(a.access_token);let h=null;u.aal&&(h=u.aal);let m=h;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(h=>h.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(h=>h.kid===t),n&&this.jwks_cached_at+sv>a)return n;const{data:l,error:u}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,n=l.keys.find(h=>h.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:E,error:S}=await this.getSession();if(S||!E.session)return{data:null,error:S};n=E.session.access_token}const{header:a,payload:l,signature:u,raw:{header:h,payload:m}}=jc(n);r!=null&&r.allowExpired||_v(l.exp);const x=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!x){const{error:E}=await this.getUser(n);if(E)throw E;return{data:{claims:l,header:a,signature:u},error:null}}const g=Cv(a.alg),N=await crypto.subtle.importKey("jwk",x,g,!0,["verify"]);if(!await crypto.subtle.verify(g,N,u,hv(`${h}.${m}`)))throw new z0("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}sa.nextInstanceID=0;const Vv=sa;class Gv extends Vv{constructor(t){super(t)}}var Qv=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function h(g){try{x(n.next(g))}catch(N){u(N)}}function m(g){try{x(n.throw(g))}catch(N){u(N)}}function x(g){g.done?l(g.value):a(g.value).then(h,m)}x((n=n.apply(e,t||[])).next())})};class Kv{constructor(t,r,n){var a,l,u;this.supabaseUrl=t,this.supabaseKey=r;const h=Y6(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const m=`sb-${h.hostname.split(".")[0]}-auth-token`,x={db:q6,realtime:U6,auth:Object.assign(Object.assign({},$6),{storageKey:m}),global:R6},g=J6(n??{},x);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(N,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=G6(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new r6(new URL("rest/v1",h).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new L6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Fy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Qv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:l,storageKey:u,flowType:h,lock:m,debug:x},g,N){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gv({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),g),storageKey:u,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:l,flowType:h,lock:m,debug:x,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new b6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jv=(e,t,r)=>new Kv(e,t,r);function Yv(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Yv()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xv="https://vemodpqgauqbovbbhioo.supabase.co",Zv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZlbW9kcHFnYXVxYm92YmJoaW9vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1NjY5MTQsImV4cCI6MjA3NTE0MjkxNH0.unMzxF0BaGNViohqnS3BgWWtoQAYc3s1XY2r8FjTDis",pe=Jv(Xv,Zv);function eb({onClose:e,onBackToLogin:t}){const[r,n]=F.useState(""),[a,l]=F.useState(""),[u,h]=F.useState(!1),m=x=>{x.preventDefault(),h(!0)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:t,className:"mr-3 p-1 hover:bg-gray-100 rounded",children:s.jsx(ey,{className:"h-5 w-5 text-gray-500"})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Mot de passe oublié"})]}),s.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(Ss,{className:"h-5 w-5 text-gray-500"})})]}),s.jsx("div",{className:"p-6",children:u?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-lg",children:"Instructions de réinitialisation envoyées à l'administrateur."}),s.jsx("button",{onClick:t,className:"text-[#4F6D0B] hover:underline",children:"Retour à la connexion"})]}):s.jsxs("form",{onSubmit:m,children:[a&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg flex items-center",children:[s.jsx(Q2,{className:"h-5 w-5 mr-2"}),a]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Entrez votre nom d'utilisateur pour réinitialiser votre mot de passe. L'administrateur sera notifié et vous contactera pour la réinitialisation."}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom d'utilisateur"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(ta,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:r,onChange:x=>n(x.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Entrez votre nom d'utilisateur",required:!0})]})]}),s.jsx("button",{type:"submit",className:"w-full bg-[#4F6D0B] text-white px-4 py-2 rounded-lg hover:bg-[#4F6D0B]/90 transition-colors",children:"Réinitialiser le mot de passe"})]})})]})})}function tb({isOpen:e,onClose:t}){const[r,n]=F.useState(!1),[a,l]=F.useState(""),[u,h]=F.useState(""),[m,x]=F.useState(""),g=async N=>{if(N.preventDefault(),x(""),a==="admin"&&u==="admin"){const S={firstName:"Admin",lastName:"System",role:"gestionnaire_general",username:"admin"};sessionStorage.setItem("currentUser",JSON.stringify(S)),sessionStorage.setItem("isAdmin","true"),t(),window.location.href="/admin";return}const E=JSON.parse(localStorage.getItem("admins")||"[]").find(S=>S.username===a&&S.password===u);if(E){const S={firstName:E.firstName,lastName:E.lastName,role:E.role,username:E.username};sessionStorage.setItem("currentUser",JSON.stringify(S)),sessionStorage.setItem("isAdmin","true"),t(),window.location.href="/admin";return}try{const{data:S,error:D}=await pe.from("local_users").select("*").eq("username",a).eq("password",u).maybeSingle();if(D){console.error("Login error:",D),x("Erreur lors de la connexion");return}if(S){const A={id:S.id,firstName:S.first_name,lastName:S.last_name,userType:S.user_type,username:S.username};sessionStorage.setItem("currentUser",JSON.stringify(A)),t(),window.location.reload()}else x("Identifiants incorrects")}catch(S){console.error("Login error:",S),x("Erreur lors de la connexion")}};return e?r?s.jsx(eb,{onClose:t,onBackToLogin:()=>n(!1)}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Connexion"}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsx(Ss,{className:"h-5 w-5 text-gray-500"})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[m&&s.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:m}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom d'utilisateur"}),s.jsx("input",{type:"text",id:"username",value:a,onChange:N=>l(N.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),s.jsx("input",{type:"password",id:"password",value:u,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{type:"button",onClick:()=>window.location.href="/register",className:"text-sm text-[#4F6D0B] hover:underline",children:"Créer un compte"}),s.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-sm text-[#4F6D0B] hover:underline",children:"Mot de passe oublié ?"})]}),s.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90 transition-colors",children:"Se connecter"})]})})]})}):null}function sb({onViewChange:e}){const[t,r]=F.useState(!1),[n,a]=F.useState(null),[l,u]=F.useState(!1);F.useEffect(()=>{const g=sessionStorage.getItem("currentUser");g&&a(JSON.parse(g))},[]);const h=g=>{g.preventDefault(),sessionStorage.removeItem("currentUser"),sessionStorage.removeItem("isAdmin"),localStorage.removeItem("currentUser"),a(null),window.location.href="/"},m=g=>`${g.firstName[0]}${g.lastName[0]}`.toUpperCase(),x=()=>{u(!l)};return s.jsxs("div",{className:"flex items-center justify-between w-full px-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx("input",{type:"text",placeholder:"Rechercher...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"}),s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!n&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>e==null?void 0:e("quick-quiz"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"Quiz Rapide"}),s.jsx("button",{onClick:()=>e==null?void 0:e("forum"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"À la une"}),s.jsx("button",{onClick:()=>e==null?void 0:e("contact"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"Nous contacter"}),s.jsx("button",{onClick:()=>e==null?void 0:e("teach-with-us"),className:"px-4 py-2 text-sm font-medium text-white bg-[#4F6D0B] hover:bg-[#4F6D0B]/90 rounded-lg transition-colors",children:"Enseignez avec nous"})]}),(n==null?void 0:n.userType)==="élève"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>e==null?void 0:e("quick-quiz"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"Quiz Rapide"}),s.jsx("button",{onClick:()=>e==null?void 0:e("forum"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"À la une"}),s.jsx("button",{onClick:()=>e==null?void 0:e("contact"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"Nous contacter"})]}),(n==null?void 0:n.userType)==="enseignant"&&s.jsx("button",{onClick:()=>e==null?void 0:e("contact"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"Nous contacter"}),n?s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:x,className:"w-10 h-10 rounded-full bg-[#4F6D0B] text-white flex items-center justify-center text-sm font-medium",children:m(n)}),l&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-50",children:s.jsx("button",{onClick:h,className:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-left",children:"Déconnexion"})})]}):s.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-[#4F6D0B] hover:text-white rounded-lg transition-colors",children:"Connexion"})]}),t&&s.jsx(tb,{isOpen:t,onClose:()=>r(!1)})]})}function rb({icon:e,label:t,value:r,color:n}){return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("div",{className:`${n} w-12 h-12 rounded-lg flex items-center justify-center mb-4`,children:s.jsx(e,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-gray-500 text-sm",children:t}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r})]})}function nb({title:e}){return s.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[s.jsx(bt,{className:"h-5 w-5 text-[#4F6D0B]"}),s.jsx("span",{className:"ml-3 text-gray-700",children:e})]})}var F0={exports:{}},Sc={exports:{}},_c,Om;function ib(){if(Om)return _c;Om=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _c=e,_c}var Cc,Im;function ab(){if(Im)return Cc;Im=1;var e=ib();function t(){}function r(){}return r.resetWarningCache=t,Cc=function(){function n(u,h,m,x,g,N){if(N!==e){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}n.isRequired=n;function a(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return l.PropTypes=l,l},Cc}var Rm;function lb(){return Rm||(Rm=1,Sc.exports=ab()()),Sc.exports}var Ec={exports:{}},qm;function ob(){return qm||(qm=1,function(e,t){(function(n,a){e.exports=a()})(typeof self<"u"?self:Ht,function(){return function(){var r={};(function(){r.d=function(o,i){for(var c in i)r.o(i,c)&&!r.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:i[c]})}})(),function(){r.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)}}();var n={};r.d(n,{default:function(){return mg}});class a{constructor(i,c){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let d="KaTeX parse error: "+i,f,v;const k=c&&c.loc;if(k&&k.start<=k.end){const B=k.lexer.input;f=k.start,v=k.end,f===B.length?d+=" at end of input: ":d+=" at position "+(f+1)+": ";const O=B.slice(f,v).replace(/[^]/g,"$&̲");let R;f>15?R="…"+B.slice(f-15,f):R=B.slice(0,f);let H;v+15<B.length?H=B.slice(v,v+15)+"…":H=B.slice(v),d+=R+O+H}const T=new Error(d);return T.name="ParseError",T.__proto__=a.prototype,T.position=f,f!=null&&v!=null&&(T.length=v-f),T.rawMessage=i,T}}a.prototype.__proto__=Error.prototype;var l=a;const u=function(o,i){return o.indexOf(i)!==-1},h=function(o,i){return o===void 0?i:o},m=/([A-Z])/g,x=function(o){return o.replace(m,"-$1").toLowerCase()},g={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},N=/[&><"']/g;function w(o){return String(o).replace(N,i=>g[i])}const E=function(o){return o.type==="ordgroup"||o.type==="color"?o.body.length===1?E(o.body[0]):o:o.type==="font"?E(o.body):o},S=function(o){const i=E(o);return i.type==="mathord"||i.type==="textord"||i.type==="atom"},D=function(o){if(!o)throw new Error("Expected non-null, but got "+String(o));return o};var j={contains:u,deflt:h,escape:w,hyphenate:x,getBaseElem:E,isCharacterBox:S,protocolFromUrl:function(o){const i=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(o);return i?i[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(i[1])?null:i[1].toLowerCase():"_relative"}};const b={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:o=>"#"+o},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(o,i)=>(i.push(o),i)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:o=>Math.max(0,o),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:o=>Math.max(0,o),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:o=>Math.max(0,o),cli:"-e, --max-expand <n>",cliProcessor:o=>o==="Infinity"?1/0:parseInt(o)},globalGroup:{type:"boolean",cli:!1}};function C(o){if(o.default)return o.default;const i=o.type,c=Array.isArray(i)?i[0]:i;if(typeof c!="string")return c.enum[0];switch(c){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class z{constructor(i){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,i=i||{};for(const c in b)if(b.hasOwnProperty(c)){const d=b[c];this[c]=i[c]!==void 0?d.processor?d.processor(i[c]):i[c]:C(d)}}reportNonstrict(i,c,d){let f=this.strict;if(typeof f=="function"&&(f=f(i,c,d)),!(!f||f==="ignore")){if(f===!0||f==="error")throw new l("LaTeX-incompatible input and strict mode is set to 'error': "+(c+" ["+i+"]"),d);f==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(c+" ["+i+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+f+"': "+c+" ["+i+"]"))}}useStrictBehavior(i,c,d){let f=this.strict;if(typeof f=="function")try{f=f(i,c,d)}catch{f="error"}return!f||f==="ignore"?!1:f===!0||f==="error"?!0:f==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(c+" ["+i+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+f+"': "+c+" ["+i+"]")),!1)}isTrusted(i){if(i.url&&!i.protocol){const d=j.protocolFromUrl(i.url);if(d==null)return!1;i.protocol=d}return!!(typeof this.trust=="function"?this.trust(i):this.trust)}}class ${constructor(i,c,d){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=i,this.size=c,this.cramped=d}sup(){return q[se[this.id]]}sub(){return q[W[this.id]]}fracNum(){return q[re[this.id]]}fracDen(){return q[J[this.id]]}cramp(){return q[de[this.id]]}text(){return q[ce[this.id]]}isTight(){return this.size>=2}}const U=0,Y=1,Z=2,X=3,ee=4,G=5,V=6,ie=7,q=[new $(U,0,!1),new $(Y,0,!0),new $(Z,1,!1),new $(X,1,!0),new $(ee,2,!1),new $(G,2,!0),new $(V,3,!1),new $(ie,3,!0)],se=[ee,G,ee,G,V,ie,V,ie],W=[G,G,G,G,ie,ie,ie,ie],re=[Z,X,ee,G,V,ie,V,ie],J=[X,X,G,G,ie,ie,ie,ie],de=[Y,Y,X,X,G,G,ie,ie],ce=[U,Y,Z,X,Z,X,Z,X];var ne={DISPLAY:q[U],TEXT:q[Z],SCRIPT:q[ee],SCRIPTSCRIPT:q[V]};const Se=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function _e(o){for(let i=0;i<Se.length;i++){const c=Se[i];for(let d=0;d<c.blocks.length;d++){const f=c.blocks[d];if(o>=f[0]&&o<=f[1])return c.name}}return null}const Ae=[];Se.forEach(o=>o.blocks.forEach(i=>Ae.push(...i)));function te(o){for(let i=0;i<Ae.length;i+=2)if(o>=Ae[i]&&o<=Ae[i+1])return!0;return!1}const he=80,me=function(o,i){return"M95,"+(622+o+i)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+o/2.075+" -"+o+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+o)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+o)+" "+i+"h400000v"+(40+o)+"h-400000z"},je=function(o,i){return"M263,"+(601+o+i)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+o/2.084+" -"+o+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+o)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+o)+" "+i+"h400000v"+(40+o)+"h-400000z"},_s=function(o,i){return"M983 "+(10+o+i)+`
l`+o/3.13+" -"+o+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+o)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+o)+" "+i+"h400000v"+(40+o)+"h-400000z"},ln=function(o,i){return"M424,"+(2398+o+i)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+o/4.223+" -"+o+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+o)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+o)+" "+i+`
h400000v`+(40+o)+"h-400000z"},Pr=function(o,i){return"M473,"+(2713+o+i)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+o/5.298+" -"+o+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+o)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+o)+" "+i+"h400000v"+(40+o)+"H1017.7z"},nt=function(o){const i=o/2;return"M400000 "+o+" H0 L"+i+" 0 l65 45 L145 "+(o-80)+" H400000z"},fs=function(o,i,c){const d=c-54-i-o;return"M702 "+(o+i)+"H400000"+(40+o)+`
H742v`+d+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+i+"H400000v"+(40+o)+"H742z"},Q1=function(o,i,c){i=1e3*i;let d="";switch(o){case"sqrtMain":d=me(i,he);break;case"sqrtSize1":d=je(i,he);break;case"sqrtSize2":d=_s(i,he);break;case"sqrtSize3":d=ln(i,he);break;case"sqrtSize4":d=Pr(i,he);break;case"sqrtTall":d=fs(i,he,c)}return d},K1=function(o,i){switch(o){case"⎜":return"M291 0 H417 V"+i+" H291z M291 0 H417 V"+i+" H291z";case"∣":return"M145 0 H188 V"+i+" H145z M145 0 H188 V"+i+" H145z";case"∥":return"M145 0 H188 V"+i+" H145z M145 0 H188 V"+i+" H145z"+("M367 0 H410 V"+i+" H367z M367 0 H410 V"+i+" H367z");case"⎟":return"M457 0 H583 V"+i+" H457z M457 0 H583 V"+i+" H457z";case"⎢":return"M319 0 H403 V"+i+" H319z M319 0 H403 V"+i+" H319z";case"⎥":return"M263 0 H347 V"+i+" H263z M263 0 H347 V"+i+" H263z";case"⎪":return"M384 0 H504 V"+i+" H384z M384 0 H504 V"+i+" H384z";case"⏐":return"M312 0 H355 V"+i+" H312z M312 0 H355 V"+i+" H312z";case"‖":return"M257 0 H300 V"+i+" H257z M257 0 H300 V"+i+" H257z"+("M478 0 H521 V"+i+" H478z M478 0 H521 V"+i+" H478z");default:return""}},Ou={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},J1=function(o,i){switch(o){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+i+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+i+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+i+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+i+" v1759 h84z";case"vert":return"M145 15 v585 v"+i+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-i+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+i+" v585 h43z";case"doublevert":return"M145 15 v585 v"+i+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-i+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+i+` v585 h43z
M367 15 v585 v`+i+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-i+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+i+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+i+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+i+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+i+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+i+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+i+` v602 h84z
M403 1759 V0 H319 V1759 v`+i+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+i+` v602 h84z
M347 1759 V0 h-84 V1759 v`+i+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(i+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(i+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(i+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(i+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class ti{constructor(i){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=i,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(i){return j.contains(this.classes,i)}toNode(){const i=document.createDocumentFragment();for(let c=0;c<this.children.length;c++)i.appendChild(this.children[c].toNode());return i}toMarkup(){let i="";for(let c=0;c<this.children.length;c++)i+=this.children[c].toMarkup();return i}toText(){const i=c=>c.toText();return this.children.map(i).join("")}}var Cs={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const ha={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Iu={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Y1(o,i){Cs[o]=i}function ao(o,i,c){if(!Cs[i])throw new Error("Font metrics not found for font: "+i+".");let d=o.charCodeAt(0),f=Cs[i][d];if(!f&&o[0]in Iu&&(d=Iu[o[0]].charCodeAt(0),f=Cs[i][d]),!f&&c==="text"&&te(d)&&(f=Cs[i][77]),f)return{depth:f[0],height:f[1],italic:f[2],skew:f[3],width:f[4]}}const lo={};function X1(o){let i;if(o>=5?i=0:o>=3?i=1:i=2,!lo[i]){const c=lo[i]={cssEmPerMu:ha.quad[i]/18};for(const d in ha)ha.hasOwnProperty(d)&&(c[d]=ha[d][i])}return lo[i]}const Z1=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Ru=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],qu=function(o,i){return i.size<2?o:Z1[o-1][i.size-1]};class Is{constructor(i){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=i.style,this.color=i.color,this.size=i.size||Is.BASESIZE,this.textSize=i.textSize||this.size,this.phantom=!!i.phantom,this.font=i.font||"",this.fontFamily=i.fontFamily||"",this.fontWeight=i.fontWeight||"",this.fontShape=i.fontShape||"",this.sizeMultiplier=Ru[this.size-1],this.maxSize=i.maxSize,this.minRuleThickness=i.minRuleThickness,this._fontMetrics=void 0}extend(i){const c={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const d in i)i.hasOwnProperty(d)&&(c[d]=i[d]);return new Is(c)}havingStyle(i){return this.style===i?this:this.extend({style:i,size:qu(this.textSize,i)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(i){return this.size===i&&this.textSize===i?this:this.extend({style:this.style.text(),size:i,textSize:i,sizeMultiplier:Ru[i-1]})}havingBaseStyle(i){i=i||this.style.text();const c=qu(Is.BASESIZE,i);return this.size===c&&this.textSize===Is.BASESIZE&&this.style===i?this:this.extend({style:i,size:c})}havingBaseSizing(){let i;switch(this.style.id){case 4:case 5:i=3;break;case 6:case 7:i=1;break;default:i=6}return this.extend({style:this.style.text(),size:i})}withColor(i){return this.extend({color:i})}withPhantom(){return this.extend({phantom:!0})}withFont(i){return this.extend({font:i})}withTextFontFamily(i){return this.extend({fontFamily:i,font:""})}withTextFontWeight(i){return this.extend({fontWeight:i,font:""})}withTextFontShape(i){return this.extend({fontShape:i,font:""})}sizingClasses(i){return i.size!==this.size?["sizing","reset-size"+i.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Is.BASESIZE?["sizing","reset-size"+this.size,"size"+Is.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=X1(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Is.BASESIZE=6;var ex=Is;const oo={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},tx={ex:!0,em:!0,mu:!0},$u=function(o){return typeof o!="string"&&(o=o.unit),o in oo||o in tx||o==="ex"},Ye=function(o,i){let c;if(o.unit in oo)c=oo[o.unit]/i.fontMetrics().ptPerEm/i.sizeMultiplier;else if(o.unit==="mu")c=i.fontMetrics().cssEmPerMu;else{let d;if(i.style.isTight()?d=i.havingStyle(i.style.text()):d=i,o.unit==="ex")c=d.fontMetrics().xHeight;else if(o.unit==="em")c=d.fontMetrics().quad;else throw new l("Invalid unit: '"+o.unit+"'");d!==i&&(c*=d.sizeMultiplier/i.sizeMultiplier)}return Math.min(o.number*c,i.maxSize)},fe=function(o){return+o.toFixed(4)+"em"},nr=function(o){return o.filter(i=>i).join(" ")},Uu=function(o,i,c){if(this.classes=o||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=c||{},i){i.style.isTight()&&this.classes.push("mtight");const d=i.getColor();d&&(this.style.color=d)}},Hu=function(o){const i=document.createElement(o);i.className=nr(this.classes);for(const c in this.style)this.style.hasOwnProperty(c)&&(i.style[c]=this.style[c]);for(const c in this.attributes)this.attributes.hasOwnProperty(c)&&i.setAttribute(c,this.attributes[c]);for(let c=0;c<this.children.length;c++)i.appendChild(this.children[c].toNode());return i},Wu=function(o){let i="<"+o;this.classes.length&&(i+=' class="'+j.escape(nr(this.classes))+'"');let c="";for(const d in this.style)this.style.hasOwnProperty(d)&&(c+=j.hyphenate(d)+":"+this.style[d]+";");c&&(i+=' style="'+j.escape(c)+'"');for(const d in this.attributes)this.attributes.hasOwnProperty(d)&&(i+=" "+d+'="'+j.escape(this.attributes[d])+'"');i+=">";for(let d=0;d<this.children.length;d++)i+=this.children[d].toMarkup();return i+="</"+o+">",i};class si{constructor(i,c,d,f){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Uu.call(this,i,d,f),this.children=c||[]}setAttribute(i,c){this.attributes[i]=c}hasClass(i){return j.contains(this.classes,i)}toNode(){return Hu.call(this,"span")}toMarkup(){return Wu.call(this,"span")}}class co{constructor(i,c,d,f){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Uu.call(this,c,f),this.children=d||[],this.setAttribute("href",i)}setAttribute(i,c){this.attributes[i]=c}hasClass(i){return j.contains(this.classes,i)}toNode(){return Hu.call(this,"a")}toMarkup(){return Wu.call(this,"a")}}class sx{constructor(i,c,d){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=c,this.src=i,this.classes=["mord"],this.style=d}hasClass(i){return j.contains(this.classes,i)}toNode(){const i=document.createElement("img");i.src=this.src,i.alt=this.alt,i.className="mord";for(const c in this.style)this.style.hasOwnProperty(c)&&(i.style[c]=this.style[c]);return i}toMarkup(){let i='<img src="'+j.escape(this.src)+'"'+(' alt="'+j.escape(this.alt)+'"'),c="";for(const d in this.style)this.style.hasOwnProperty(d)&&(c+=j.hyphenate(d)+":"+this.style[d]+";");return c&&(i+=' style="'+j.escape(c)+'"'),i+="'/>",i}}const rx={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class ts{constructor(i,c,d,f,v,k,T,B){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=i,this.height=c||0,this.depth=d||0,this.italic=f||0,this.skew=v||0,this.width=k||0,this.classes=T||[],this.style=B||{},this.maxFontSize=0;const O=_e(this.text.charCodeAt(0));O&&this.classes.push(O+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=rx[this.text])}hasClass(i){return j.contains(this.classes,i)}toNode(){const i=document.createTextNode(this.text);let c=null;this.italic>0&&(c=document.createElement("span"),c.style.marginRight=fe(this.italic)),this.classes.length>0&&(c=c||document.createElement("span"),c.className=nr(this.classes));for(const d in this.style)this.style.hasOwnProperty(d)&&(c=c||document.createElement("span"),c.style[d]=this.style[d]);return c?(c.appendChild(i),c):i}toMarkup(){let i=!1,c="<span";this.classes.length&&(i=!0,c+=' class="',c+=j.escape(nr(this.classes)),c+='"');let d="";this.italic>0&&(d+="margin-right:"+this.italic+"em;");for(const v in this.style)this.style.hasOwnProperty(v)&&(d+=j.hyphenate(v)+":"+this.style[v]+";");d&&(i=!0,c+=' style="'+j.escape(d)+'"');const f=j.escape(this.text);return i?(c+=">",c+=f,c+="</span>",c):f}}class Rs{constructor(i,c){this.children=void 0,this.attributes=void 0,this.children=i||[],this.attributes=c||{}}toNode(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&c.setAttribute(d,this.attributes[d]);for(let d=0;d<this.children.length;d++)c.appendChild(this.children[d].toNode());return c}toMarkup(){let i='<svg xmlns="http://www.w3.org/2000/svg"';for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(i+=" "+c+'="'+j.escape(this.attributes[c])+'"');i+=">";for(let c=0;c<this.children.length;c++)i+=this.children[c].toMarkup();return i+="</svg>",i}}class ir{constructor(i,c){this.pathName=void 0,this.alternate=void 0,this.pathName=i,this.alternate=c}toNode(){const c=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?c.setAttribute("d",this.alternate):c.setAttribute("d",Ou[this.pathName]),c}toMarkup(){return this.alternate?'<path d="'+j.escape(this.alternate)+'"/>':'<path d="'+j.escape(Ou[this.pathName])+'"/>'}}class uo{constructor(i){this.attributes=void 0,this.attributes=i||{}}toNode(){const c=document.createElementNS("http://www.w3.org/2000/svg","line");for(const d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&c.setAttribute(d,this.attributes[d]);return c}toMarkup(){let i="<line";for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(i+=" "+c+'="'+j.escape(this.attributes[c])+'"');return i+="/>",i}}function Vu(o){if(o instanceof ts)return o;throw new Error("Expected symbolNode but got "+String(o)+".")}function nx(o){if(o instanceof si)return o;throw new Error("Expected span<HtmlDomNode> but got "+String(o)+".")}const ix={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ax={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},ma={math:{},text:{}};var Xe=ma;function p(o,i,c,d,f,v){ma[o][f]={font:i,group:c,replace:d},v&&d&&(ma[o][d]=ma[o][f])}const y="math",le="text",_="main",P="ams",Qe="accent-token",ye="bin",Et="close",on="inner",Ne="mathord",ut="op-token",Wt="open",fa="punct",L="rel",qs="spacing",I="textord";p(y,_,L,"≡","\\equiv",!0),p(y,_,L,"≺","\\prec",!0),p(y,_,L,"≻","\\succ",!0),p(y,_,L,"∼","\\sim",!0),p(y,_,L,"⊥","\\perp"),p(y,_,L,"⪯","\\preceq",!0),p(y,_,L,"⪰","\\succeq",!0),p(y,_,L,"≃","\\simeq",!0),p(y,_,L,"∣","\\mid",!0),p(y,_,L,"≪","\\ll",!0),p(y,_,L,"≫","\\gg",!0),p(y,_,L,"≍","\\asymp",!0),p(y,_,L,"∥","\\parallel"),p(y,_,L,"⋈","\\bowtie",!0),p(y,_,L,"⌣","\\smile",!0),p(y,_,L,"⊑","\\sqsubseteq",!0),p(y,_,L,"⊒","\\sqsupseteq",!0),p(y,_,L,"≐","\\doteq",!0),p(y,_,L,"⌢","\\frown",!0),p(y,_,L,"∋","\\ni",!0),p(y,_,L,"∝","\\propto",!0),p(y,_,L,"⊢","\\vdash",!0),p(y,_,L,"⊣","\\dashv",!0),p(y,_,L,"∋","\\owns"),p(y,_,fa,".","\\ldotp"),p(y,_,fa,"⋅","\\cdotp"),p(y,_,I,"#","\\#"),p(le,_,I,"#","\\#"),p(y,_,I,"&","\\&"),p(le,_,I,"&","\\&"),p(y,_,I,"ℵ","\\aleph",!0),p(y,_,I,"∀","\\forall",!0),p(y,_,I,"ℏ","\\hbar",!0),p(y,_,I,"∃","\\exists",!0),p(y,_,I,"∇","\\nabla",!0),p(y,_,I,"♭","\\flat",!0),p(y,_,I,"ℓ","\\ell",!0),p(y,_,I,"♮","\\natural",!0),p(y,_,I,"♣","\\clubsuit",!0),p(y,_,I,"℘","\\wp",!0),p(y,_,I,"♯","\\sharp",!0),p(y,_,I,"♢","\\diamondsuit",!0),p(y,_,I,"ℜ","\\Re",!0),p(y,_,I,"♡","\\heartsuit",!0),p(y,_,I,"ℑ","\\Im",!0),p(y,_,I,"♠","\\spadesuit",!0),p(y,_,I,"§","\\S",!0),p(le,_,I,"§","\\S"),p(y,_,I,"¶","\\P",!0),p(le,_,I,"¶","\\P"),p(y,_,I,"†","\\dag"),p(le,_,I,"†","\\dag"),p(le,_,I,"†","\\textdagger"),p(y,_,I,"‡","\\ddag"),p(le,_,I,"‡","\\ddag"),p(le,_,I,"‡","\\textdaggerdbl"),p(y,_,Et,"⎱","\\rmoustache",!0),p(y,_,Wt,"⎰","\\lmoustache",!0),p(y,_,Et,"⟯","\\rgroup",!0),p(y,_,Wt,"⟮","\\lgroup",!0),p(y,_,ye,"∓","\\mp",!0),p(y,_,ye,"⊖","\\ominus",!0),p(y,_,ye,"⊎","\\uplus",!0),p(y,_,ye,"⊓","\\sqcap",!0),p(y,_,ye,"∗","\\ast"),p(y,_,ye,"⊔","\\sqcup",!0),p(y,_,ye,"◯","\\bigcirc",!0),p(y,_,ye,"∙","\\bullet",!0),p(y,_,ye,"‡","\\ddagger"),p(y,_,ye,"≀","\\wr",!0),p(y,_,ye,"⨿","\\amalg"),p(y,_,ye,"&","\\And"),p(y,_,L,"⟵","\\longleftarrow",!0),p(y,_,L,"⇐","\\Leftarrow",!0),p(y,_,L,"⟸","\\Longleftarrow",!0),p(y,_,L,"⟶","\\longrightarrow",!0),p(y,_,L,"⇒","\\Rightarrow",!0),p(y,_,L,"⟹","\\Longrightarrow",!0),p(y,_,L,"↔","\\leftrightarrow",!0),p(y,_,L,"⟷","\\longleftrightarrow",!0),p(y,_,L,"⇔","\\Leftrightarrow",!0),p(y,_,L,"⟺","\\Longleftrightarrow",!0),p(y,_,L,"↦","\\mapsto",!0),p(y,_,L,"⟼","\\longmapsto",!0),p(y,_,L,"↗","\\nearrow",!0),p(y,_,L,"↩","\\hookleftarrow",!0),p(y,_,L,"↪","\\hookrightarrow",!0),p(y,_,L,"↘","\\searrow",!0),p(y,_,L,"↼","\\leftharpoonup",!0),p(y,_,L,"⇀","\\rightharpoonup",!0),p(y,_,L,"↙","\\swarrow",!0),p(y,_,L,"↽","\\leftharpoondown",!0),p(y,_,L,"⇁","\\rightharpoondown",!0),p(y,_,L,"↖","\\nwarrow",!0),p(y,_,L,"⇌","\\rightleftharpoons",!0),p(y,P,L,"≮","\\nless",!0),p(y,P,L,"","\\@nleqslant"),p(y,P,L,"","\\@nleqq"),p(y,P,L,"⪇","\\lneq",!0),p(y,P,L,"≨","\\lneqq",!0),p(y,P,L,"","\\@lvertneqq"),p(y,P,L,"⋦","\\lnsim",!0),p(y,P,L,"⪉","\\lnapprox",!0),p(y,P,L,"⊀","\\nprec",!0),p(y,P,L,"⋠","\\npreceq",!0),p(y,P,L,"⋨","\\precnsim",!0),p(y,P,L,"⪹","\\precnapprox",!0),p(y,P,L,"≁","\\nsim",!0),p(y,P,L,"","\\@nshortmid"),p(y,P,L,"∤","\\nmid",!0),p(y,P,L,"⊬","\\nvdash",!0),p(y,P,L,"⊭","\\nvDash",!0),p(y,P,L,"⋪","\\ntriangleleft"),p(y,P,L,"⋬","\\ntrianglelefteq",!0),p(y,P,L,"⊊","\\subsetneq",!0),p(y,P,L,"","\\@varsubsetneq"),p(y,P,L,"⫋","\\subsetneqq",!0),p(y,P,L,"","\\@varsubsetneqq"),p(y,P,L,"≯","\\ngtr",!0),p(y,P,L,"","\\@ngeqslant"),p(y,P,L,"","\\@ngeqq"),p(y,P,L,"⪈","\\gneq",!0),p(y,P,L,"≩","\\gneqq",!0),p(y,P,L,"","\\@gvertneqq"),p(y,P,L,"⋧","\\gnsim",!0),p(y,P,L,"⪊","\\gnapprox",!0),p(y,P,L,"⊁","\\nsucc",!0),p(y,P,L,"⋡","\\nsucceq",!0),p(y,P,L,"⋩","\\succnsim",!0),p(y,P,L,"⪺","\\succnapprox",!0),p(y,P,L,"≆","\\ncong",!0),p(y,P,L,"","\\@nshortparallel"),p(y,P,L,"∦","\\nparallel",!0),p(y,P,L,"⊯","\\nVDash",!0),p(y,P,L,"⋫","\\ntriangleright"),p(y,P,L,"⋭","\\ntrianglerighteq",!0),p(y,P,L,"","\\@nsupseteqq"),p(y,P,L,"⊋","\\supsetneq",!0),p(y,P,L,"","\\@varsupsetneq"),p(y,P,L,"⫌","\\supsetneqq",!0),p(y,P,L,"","\\@varsupsetneqq"),p(y,P,L,"⊮","\\nVdash",!0),p(y,P,L,"⪵","\\precneqq",!0),p(y,P,L,"⪶","\\succneqq",!0),p(y,P,L,"","\\@nsubseteqq"),p(y,P,ye,"⊴","\\unlhd"),p(y,P,ye,"⊵","\\unrhd"),p(y,P,L,"↚","\\nleftarrow",!0),p(y,P,L,"↛","\\nrightarrow",!0),p(y,P,L,"⇍","\\nLeftarrow",!0),p(y,P,L,"⇏","\\nRightarrow",!0),p(y,P,L,"↮","\\nleftrightarrow",!0),p(y,P,L,"⇎","\\nLeftrightarrow",!0),p(y,P,L,"△","\\vartriangle"),p(y,P,I,"ℏ","\\hslash"),p(y,P,I,"▽","\\triangledown"),p(y,P,I,"◊","\\lozenge"),p(y,P,I,"Ⓢ","\\circledS"),p(y,P,I,"®","\\circledR"),p(le,P,I,"®","\\circledR"),p(y,P,I,"∡","\\measuredangle",!0),p(y,P,I,"∄","\\nexists"),p(y,P,I,"℧","\\mho"),p(y,P,I,"Ⅎ","\\Finv",!0),p(y,P,I,"⅁","\\Game",!0),p(y,P,I,"‵","\\backprime"),p(y,P,I,"▲","\\blacktriangle"),p(y,P,I,"▼","\\blacktriangledown"),p(y,P,I,"■","\\blacksquare"),p(y,P,I,"⧫","\\blacklozenge"),p(y,P,I,"★","\\bigstar"),p(y,P,I,"∢","\\sphericalangle",!0),p(y,P,I,"∁","\\complement",!0),p(y,P,I,"ð","\\eth",!0),p(le,_,I,"ð","ð"),p(y,P,I,"╱","\\diagup"),p(y,P,I,"╲","\\diagdown"),p(y,P,I,"□","\\square"),p(y,P,I,"□","\\Box"),p(y,P,I,"◊","\\Diamond"),p(y,P,I,"¥","\\yen",!0),p(le,P,I,"¥","\\yen",!0),p(y,P,I,"✓","\\checkmark",!0),p(le,P,I,"✓","\\checkmark"),p(y,P,I,"ℶ","\\beth",!0),p(y,P,I,"ℸ","\\daleth",!0),p(y,P,I,"ℷ","\\gimel",!0),p(y,P,I,"ϝ","\\digamma",!0),p(y,P,I,"ϰ","\\varkappa"),p(y,P,Wt,"┌","\\@ulcorner",!0),p(y,P,Et,"┐","\\@urcorner",!0),p(y,P,Wt,"└","\\@llcorner",!0),p(y,P,Et,"┘","\\@lrcorner",!0),p(y,P,L,"≦","\\leqq",!0),p(y,P,L,"⩽","\\leqslant",!0),p(y,P,L,"⪕","\\eqslantless",!0),p(y,P,L,"≲","\\lesssim",!0),p(y,P,L,"⪅","\\lessapprox",!0),p(y,P,L,"≊","\\approxeq",!0),p(y,P,ye,"⋖","\\lessdot"),p(y,P,L,"⋘","\\lll",!0),p(y,P,L,"≶","\\lessgtr",!0),p(y,P,L,"⋚","\\lesseqgtr",!0),p(y,P,L,"⪋","\\lesseqqgtr",!0),p(y,P,L,"≑","\\doteqdot"),p(y,P,L,"≓","\\risingdotseq",!0),p(y,P,L,"≒","\\fallingdotseq",!0),p(y,P,L,"∽","\\backsim",!0),p(y,P,L,"⋍","\\backsimeq",!0),p(y,P,L,"⫅","\\subseteqq",!0),p(y,P,L,"⋐","\\Subset",!0),p(y,P,L,"⊏","\\sqsubset",!0),p(y,P,L,"≼","\\preccurlyeq",!0),p(y,P,L,"⋞","\\curlyeqprec",!0),p(y,P,L,"≾","\\precsim",!0),p(y,P,L,"⪷","\\precapprox",!0),p(y,P,L,"⊲","\\vartriangleleft"),p(y,P,L,"⊴","\\trianglelefteq"),p(y,P,L,"⊨","\\vDash",!0),p(y,P,L,"⊪","\\Vvdash",!0),p(y,P,L,"⌣","\\smallsmile"),p(y,P,L,"⌢","\\smallfrown"),p(y,P,L,"≏","\\bumpeq",!0),p(y,P,L,"≎","\\Bumpeq",!0),p(y,P,L,"≧","\\geqq",!0),p(y,P,L,"⩾","\\geqslant",!0),p(y,P,L,"⪖","\\eqslantgtr",!0),p(y,P,L,"≳","\\gtrsim",!0),p(y,P,L,"⪆","\\gtrapprox",!0),p(y,P,ye,"⋗","\\gtrdot"),p(y,P,L,"⋙","\\ggg",!0),p(y,P,L,"≷","\\gtrless",!0),p(y,P,L,"⋛","\\gtreqless",!0),p(y,P,L,"⪌","\\gtreqqless",!0),p(y,P,L,"≖","\\eqcirc",!0),p(y,P,L,"≗","\\circeq",!0),p(y,P,L,"≜","\\triangleq",!0),p(y,P,L,"∼","\\thicksim"),p(y,P,L,"≈","\\thickapprox"),p(y,P,L,"⫆","\\supseteqq",!0),p(y,P,L,"⋑","\\Supset",!0),p(y,P,L,"⊐","\\sqsupset",!0),p(y,P,L,"≽","\\succcurlyeq",!0),p(y,P,L,"⋟","\\curlyeqsucc",!0),p(y,P,L,"≿","\\succsim",!0),p(y,P,L,"⪸","\\succapprox",!0),p(y,P,L,"⊳","\\vartriangleright"),p(y,P,L,"⊵","\\trianglerighteq"),p(y,P,L,"⊩","\\Vdash",!0),p(y,P,L,"∣","\\shortmid"),p(y,P,L,"∥","\\shortparallel"),p(y,P,L,"≬","\\between",!0),p(y,P,L,"⋔","\\pitchfork",!0),p(y,P,L,"∝","\\varpropto"),p(y,P,L,"◀","\\blacktriangleleft"),p(y,P,L,"∴","\\therefore",!0),p(y,P,L,"∍","\\backepsilon"),p(y,P,L,"▶","\\blacktriangleright"),p(y,P,L,"∵","\\because",!0),p(y,P,L,"⋘","\\llless"),p(y,P,L,"⋙","\\gggtr"),p(y,P,ye,"⊲","\\lhd"),p(y,P,ye,"⊳","\\rhd"),p(y,P,L,"≂","\\eqsim",!0),p(y,_,L,"⋈","\\Join"),p(y,P,L,"≑","\\Doteq",!0),p(y,P,ye,"∔","\\dotplus",!0),p(y,P,ye,"∖","\\smallsetminus"),p(y,P,ye,"⋒","\\Cap",!0),p(y,P,ye,"⋓","\\Cup",!0),p(y,P,ye,"⩞","\\doublebarwedge",!0),p(y,P,ye,"⊟","\\boxminus",!0),p(y,P,ye,"⊞","\\boxplus",!0),p(y,P,ye,"⋇","\\divideontimes",!0),p(y,P,ye,"⋉","\\ltimes",!0),p(y,P,ye,"⋊","\\rtimes",!0),p(y,P,ye,"⋋","\\leftthreetimes",!0),p(y,P,ye,"⋌","\\rightthreetimes",!0),p(y,P,ye,"⋏","\\curlywedge",!0),p(y,P,ye,"⋎","\\curlyvee",!0),p(y,P,ye,"⊝","\\circleddash",!0),p(y,P,ye,"⊛","\\circledast",!0),p(y,P,ye,"⋅","\\centerdot"),p(y,P,ye,"⊺","\\intercal",!0),p(y,P,ye,"⋒","\\doublecap"),p(y,P,ye,"⋓","\\doublecup"),p(y,P,ye,"⊠","\\boxtimes",!0),p(y,P,L,"⇢","\\dashrightarrow",!0),p(y,P,L,"⇠","\\dashleftarrow",!0),p(y,P,L,"⇇","\\leftleftarrows",!0),p(y,P,L,"⇆","\\leftrightarrows",!0),p(y,P,L,"⇚","\\Lleftarrow",!0),p(y,P,L,"↞","\\twoheadleftarrow",!0),p(y,P,L,"↢","\\leftarrowtail",!0),p(y,P,L,"↫","\\looparrowleft",!0),p(y,P,L,"⇋","\\leftrightharpoons",!0),p(y,P,L,"↶","\\curvearrowleft",!0),p(y,P,L,"↺","\\circlearrowleft",!0),p(y,P,L,"↰","\\Lsh",!0),p(y,P,L,"⇈","\\upuparrows",!0),p(y,P,L,"↿","\\upharpoonleft",!0),p(y,P,L,"⇃","\\downharpoonleft",!0),p(y,_,L,"⊶","\\origof",!0),p(y,_,L,"⊷","\\imageof",!0),p(y,P,L,"⊸","\\multimap",!0),p(y,P,L,"↭","\\leftrightsquigarrow",!0),p(y,P,L,"⇉","\\rightrightarrows",!0),p(y,P,L,"⇄","\\rightleftarrows",!0),p(y,P,L,"↠","\\twoheadrightarrow",!0),p(y,P,L,"↣","\\rightarrowtail",!0),p(y,P,L,"↬","\\looparrowright",!0),p(y,P,L,"↷","\\curvearrowright",!0),p(y,P,L,"↻","\\circlearrowright",!0),p(y,P,L,"↱","\\Rsh",!0),p(y,P,L,"⇊","\\downdownarrows",!0),p(y,P,L,"↾","\\upharpoonright",!0),p(y,P,L,"⇂","\\downharpoonright",!0),p(y,P,L,"⇝","\\rightsquigarrow",!0),p(y,P,L,"⇝","\\leadsto"),p(y,P,L,"⇛","\\Rrightarrow",!0),p(y,P,L,"↾","\\restriction"),p(y,_,I,"‘","`"),p(y,_,I,"$","\\$"),p(le,_,I,"$","\\$"),p(le,_,I,"$","\\textdollar"),p(y,_,I,"%","\\%"),p(le,_,I,"%","\\%"),p(y,_,I,"_","\\_"),p(le,_,I,"_","\\_"),p(le,_,I,"_","\\textunderscore"),p(y,_,I,"∠","\\angle",!0),p(y,_,I,"∞","\\infty",!0),p(y,_,I,"′","\\prime"),p(y,_,I,"△","\\triangle"),p(y,_,I,"Γ","\\Gamma",!0),p(y,_,I,"Δ","\\Delta",!0),p(y,_,I,"Θ","\\Theta",!0),p(y,_,I,"Λ","\\Lambda",!0),p(y,_,I,"Ξ","\\Xi",!0),p(y,_,I,"Π","\\Pi",!0),p(y,_,I,"Σ","\\Sigma",!0),p(y,_,I,"Υ","\\Upsilon",!0),p(y,_,I,"Φ","\\Phi",!0),p(y,_,I,"Ψ","\\Psi",!0),p(y,_,I,"Ω","\\Omega",!0),p(y,_,I,"A","Α"),p(y,_,I,"B","Β"),p(y,_,I,"E","Ε"),p(y,_,I,"Z","Ζ"),p(y,_,I,"H","Η"),p(y,_,I,"I","Ι"),p(y,_,I,"K","Κ"),p(y,_,I,"M","Μ"),p(y,_,I,"N","Ν"),p(y,_,I,"O","Ο"),p(y,_,I,"P","Ρ"),p(y,_,I,"T","Τ"),p(y,_,I,"X","Χ"),p(y,_,I,"¬","\\neg",!0),p(y,_,I,"¬","\\lnot"),p(y,_,I,"⊤","\\top"),p(y,_,I,"⊥","\\bot"),p(y,_,I,"∅","\\emptyset"),p(y,P,I,"∅","\\varnothing"),p(y,_,Ne,"α","\\alpha",!0),p(y,_,Ne,"β","\\beta",!0),p(y,_,Ne,"γ","\\gamma",!0),p(y,_,Ne,"δ","\\delta",!0),p(y,_,Ne,"ϵ","\\epsilon",!0),p(y,_,Ne,"ζ","\\zeta",!0),p(y,_,Ne,"η","\\eta",!0),p(y,_,Ne,"θ","\\theta",!0),p(y,_,Ne,"ι","\\iota",!0),p(y,_,Ne,"κ","\\kappa",!0),p(y,_,Ne,"λ","\\lambda",!0),p(y,_,Ne,"μ","\\mu",!0),p(y,_,Ne,"ν","\\nu",!0),p(y,_,Ne,"ξ","\\xi",!0),p(y,_,Ne,"ο","\\omicron",!0),p(y,_,Ne,"π","\\pi",!0),p(y,_,Ne,"ρ","\\rho",!0),p(y,_,Ne,"σ","\\sigma",!0),p(y,_,Ne,"τ","\\tau",!0),p(y,_,Ne,"υ","\\upsilon",!0),p(y,_,Ne,"ϕ","\\phi",!0),p(y,_,Ne,"χ","\\chi",!0),p(y,_,Ne,"ψ","\\psi",!0),p(y,_,Ne,"ω","\\omega",!0),p(y,_,Ne,"ε","\\varepsilon",!0),p(y,_,Ne,"ϑ","\\vartheta",!0),p(y,_,Ne,"ϖ","\\varpi",!0),p(y,_,Ne,"ϱ","\\varrho",!0),p(y,_,Ne,"ς","\\varsigma",!0),p(y,_,Ne,"φ","\\varphi",!0),p(y,_,ye,"∗","*",!0),p(y,_,ye,"+","+"),p(y,_,ye,"−","-",!0),p(y,_,ye,"⋅","\\cdot",!0),p(y,_,ye,"∘","\\circ",!0),p(y,_,ye,"÷","\\div",!0),p(y,_,ye,"±","\\pm",!0),p(y,_,ye,"×","\\times",!0),p(y,_,ye,"∩","\\cap",!0),p(y,_,ye,"∪","\\cup",!0),p(y,_,ye,"∖","\\setminus",!0),p(y,_,ye,"∧","\\land"),p(y,_,ye,"∨","\\lor"),p(y,_,ye,"∧","\\wedge",!0),p(y,_,ye,"∨","\\vee",!0),p(y,_,I,"√","\\surd"),p(y,_,Wt,"⟨","\\langle",!0),p(y,_,Wt,"∣","\\lvert"),p(y,_,Wt,"∥","\\lVert"),p(y,_,Et,"?","?"),p(y,_,Et,"!","!"),p(y,_,Et,"⟩","\\rangle",!0),p(y,_,Et,"∣","\\rvert"),p(y,_,Et,"∥","\\rVert"),p(y,_,L,"=","="),p(y,_,L,":",":"),p(y,_,L,"≈","\\approx",!0),p(y,_,L,"≅","\\cong",!0),p(y,_,L,"≥","\\ge"),p(y,_,L,"≥","\\geq",!0),p(y,_,L,"←","\\gets"),p(y,_,L,">","\\gt",!0),p(y,_,L,"∈","\\in",!0),p(y,_,L,"","\\@not"),p(y,_,L,"⊂","\\subset",!0),p(y,_,L,"⊃","\\supset",!0),p(y,_,L,"⊆","\\subseteq",!0),p(y,_,L,"⊇","\\supseteq",!0),p(y,P,L,"⊈","\\nsubseteq",!0),p(y,P,L,"⊉","\\nsupseteq",!0),p(y,_,L,"⊨","\\models"),p(y,_,L,"←","\\leftarrow",!0),p(y,_,L,"≤","\\le"),p(y,_,L,"≤","\\leq",!0),p(y,_,L,"<","\\lt",!0),p(y,_,L,"→","\\rightarrow",!0),p(y,_,L,"→","\\to"),p(y,P,L,"≱","\\ngeq",!0),p(y,P,L,"≰","\\nleq",!0),p(y,_,qs," ","\\ "),p(y,_,qs," ","\\space"),p(y,_,qs," ","\\nobreakspace"),p(le,_,qs," ","\\ "),p(le,_,qs," "," "),p(le,_,qs," ","\\space"),p(le,_,qs," ","\\nobreakspace"),p(y,_,qs,null,"\\nobreak"),p(y,_,qs,null,"\\allowbreak"),p(y,_,fa,",",","),p(y,_,fa,";",";"),p(y,P,ye,"⊼","\\barwedge",!0),p(y,P,ye,"⊻","\\veebar",!0),p(y,_,ye,"⊙","\\odot",!0),p(y,_,ye,"⊕","\\oplus",!0),p(y,_,ye,"⊗","\\otimes",!0),p(y,_,I,"∂","\\partial",!0),p(y,_,ye,"⊘","\\oslash",!0),p(y,P,ye,"⊚","\\circledcirc",!0),p(y,P,ye,"⊡","\\boxdot",!0),p(y,_,ye,"△","\\bigtriangleup"),p(y,_,ye,"▽","\\bigtriangledown"),p(y,_,ye,"†","\\dagger"),p(y,_,ye,"⋄","\\diamond"),p(y,_,ye,"⋆","\\star"),p(y,_,ye,"◃","\\triangleleft"),p(y,_,ye,"▹","\\triangleright"),p(y,_,Wt,"{","\\{"),p(le,_,I,"{","\\{"),p(le,_,I,"{","\\textbraceleft"),p(y,_,Et,"}","\\}"),p(le,_,I,"}","\\}"),p(le,_,I,"}","\\textbraceright"),p(y,_,Wt,"{","\\lbrace"),p(y,_,Et,"}","\\rbrace"),p(y,_,Wt,"[","\\lbrack",!0),p(le,_,I,"[","\\lbrack",!0),p(y,_,Et,"]","\\rbrack",!0),p(le,_,I,"]","\\rbrack",!0),p(y,_,Wt,"(","\\lparen",!0),p(y,_,Et,")","\\rparen",!0),p(le,_,I,"<","\\textless",!0),p(le,_,I,">","\\textgreater",!0),p(y,_,Wt,"⌊","\\lfloor",!0),p(y,_,Et,"⌋","\\rfloor",!0),p(y,_,Wt,"⌈","\\lceil",!0),p(y,_,Et,"⌉","\\rceil",!0),p(y,_,I,"\\","\\backslash"),p(y,_,I,"∣","|"),p(y,_,I,"∣","\\vert"),p(le,_,I,"|","\\textbar",!0),p(y,_,I,"∥","\\|"),p(y,_,I,"∥","\\Vert"),p(le,_,I,"∥","\\textbardbl"),p(le,_,I,"~","\\textasciitilde"),p(le,_,I,"\\","\\textbackslash"),p(le,_,I,"^","\\textasciicircum"),p(y,_,L,"↑","\\uparrow",!0),p(y,_,L,"⇑","\\Uparrow",!0),p(y,_,L,"↓","\\downarrow",!0),p(y,_,L,"⇓","\\Downarrow",!0),p(y,_,L,"↕","\\updownarrow",!0),p(y,_,L,"⇕","\\Updownarrow",!0),p(y,_,ut,"∐","\\coprod"),p(y,_,ut,"⋁","\\bigvee"),p(y,_,ut,"⋀","\\bigwedge"),p(y,_,ut,"⨄","\\biguplus"),p(y,_,ut,"⋂","\\bigcap"),p(y,_,ut,"⋃","\\bigcup"),p(y,_,ut,"∫","\\int"),p(y,_,ut,"∫","\\intop"),p(y,_,ut,"∬","\\iint"),p(y,_,ut,"∭","\\iiint"),p(y,_,ut,"∏","\\prod"),p(y,_,ut,"∑","\\sum"),p(y,_,ut,"⨂","\\bigotimes"),p(y,_,ut,"⨁","\\bigoplus"),p(y,_,ut,"⨀","\\bigodot"),p(y,_,ut,"∮","\\oint"),p(y,_,ut,"∯","\\oiint"),p(y,_,ut,"∰","\\oiiint"),p(y,_,ut,"⨆","\\bigsqcup"),p(y,_,ut,"∫","\\smallint"),p(le,_,on,"…","\\textellipsis"),p(y,_,on,"…","\\mathellipsis"),p(le,_,on,"…","\\ldots",!0),p(y,_,on,"…","\\ldots",!0),p(y,_,on,"⋯","\\@cdots",!0),p(y,_,on,"⋱","\\ddots",!0),p(y,_,I,"⋮","\\varvdots"),p(y,_,Qe,"ˊ","\\acute"),p(y,_,Qe,"ˋ","\\grave"),p(y,_,Qe,"¨","\\ddot"),p(y,_,Qe,"~","\\tilde"),p(y,_,Qe,"ˉ","\\bar"),p(y,_,Qe,"˘","\\breve"),p(y,_,Qe,"ˇ","\\check"),p(y,_,Qe,"^","\\hat"),p(y,_,Qe,"⃗","\\vec"),p(y,_,Qe,"˙","\\dot"),p(y,_,Qe,"˚","\\mathring"),p(y,_,Ne,"","\\@imath"),p(y,_,Ne,"","\\@jmath"),p(y,_,I,"ı","ı"),p(y,_,I,"ȷ","ȷ"),p(le,_,I,"ı","\\i",!0),p(le,_,I,"ȷ","\\j",!0),p(le,_,I,"ß","\\ss",!0),p(le,_,I,"æ","\\ae",!0),p(le,_,I,"œ","\\oe",!0),p(le,_,I,"ø","\\o",!0),p(le,_,I,"Æ","\\AE",!0),p(le,_,I,"Œ","\\OE",!0),p(le,_,I,"Ø","\\O",!0),p(le,_,Qe,"ˊ","\\'"),p(le,_,Qe,"ˋ","\\`"),p(le,_,Qe,"ˆ","\\^"),p(le,_,Qe,"˜","\\~"),p(le,_,Qe,"ˉ","\\="),p(le,_,Qe,"˘","\\u"),p(le,_,Qe,"˙","\\."),p(le,_,Qe,"¸","\\c"),p(le,_,Qe,"˚","\\r"),p(le,_,Qe,"ˇ","\\v"),p(le,_,Qe,"¨",'\\"'),p(le,_,Qe,"˝","\\H"),p(le,_,Qe,"◯","\\textcircled");const Gu={"--":!0,"---":!0,"``":!0,"''":!0};p(le,_,I,"–","--",!0),p(le,_,I,"–","\\textendash"),p(le,_,I,"—","---",!0),p(le,_,I,"—","\\textemdash"),p(le,_,I,"‘","`",!0),p(le,_,I,"‘","\\textquoteleft"),p(le,_,I,"’","'",!0),p(le,_,I,"’","\\textquoteright"),p(le,_,I,"“","``",!0),p(le,_,I,"“","\\textquotedblleft"),p(le,_,I,"”","''",!0),p(le,_,I,"”","\\textquotedblright"),p(y,_,I,"°","\\degree",!0),p(le,_,I,"°","\\degree"),p(le,_,I,"°","\\textdegree",!0),p(y,_,I,"£","\\pounds"),p(y,_,I,"£","\\mathsterling",!0),p(le,_,I,"£","\\pounds"),p(le,_,I,"£","\\textsterling",!0),p(y,P,I,"✠","\\maltese"),p(le,P,I,"✠","\\maltese");const Qu='0123456789/@."';for(let o=0;o<Qu.length;o++){const i=Qu.charAt(o);p(y,_,I,i,i)}const Ku='0123456789!@*()-=+";:?/.,';for(let o=0;o<Ku.length;o++){const i=Ku.charAt(o);p(le,_,I,i,i)}const pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let o=0;o<pa.length;o++){const i=pa.charAt(o);p(y,_,Ne,i,i),p(le,_,I,i,i)}p(y,P,I,"C","ℂ"),p(le,P,I,"C","ℂ"),p(y,P,I,"H","ℍ"),p(le,P,I,"H","ℍ"),p(y,P,I,"N","ℕ"),p(le,P,I,"N","ℕ"),p(y,P,I,"P","ℙ"),p(le,P,I,"P","ℙ"),p(y,P,I,"Q","ℚ"),p(le,P,I,"Q","ℚ"),p(y,P,I,"R","ℝ"),p(le,P,I,"R","ℝ"),p(y,P,I,"Z","ℤ"),p(le,P,I,"Z","ℤ"),p(y,_,Ne,"h","ℎ"),p(le,_,Ne,"h","ℎ");let ke="";for(let o=0;o<pa.length;o++){const i=pa.charAt(o);ke=String.fromCharCode(55349,56320+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56372+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56424+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56580+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56684+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56736+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56788+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56840+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56944+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),o<26&&(ke=String.fromCharCode(55349,56632+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,56476+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke))}ke="𝕜",p(y,_,Ne,"k",ke),p(le,_,I,"k",ke);for(let o=0;o<10;o++){const i=o.toString();ke=String.fromCharCode(55349,57294+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,57314+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,57324+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke),ke=String.fromCharCode(55349,57334+o),p(y,_,Ne,i,ke),p(le,_,I,i,ke)}const ho="ÐÞþ";for(let o=0;o<ho.length;o++){const i=ho.charAt(o);p(y,_,Ne,i,i),p(le,_,I,i,i)}const xa=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Ju=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],lx=function(o,i){const c=o.charCodeAt(0),d=o.charCodeAt(1),f=(c-55296)*1024+(d-56320)+65536,v=i==="math"?0:1;if(119808<=f&&f<120484){const k=Math.floor((f-119808)/26);return[xa[k][2],xa[k][v]]}else if(120782<=f&&f<=120831){const k=Math.floor((f-120782)/10);return[Ju[k][2],Ju[k][v]]}else{if(f===120485||f===120486)return[xa[0][2],xa[0][v]];if(120486<f&&f<120782)return["",""];throw new l("Unsupported character: "+o)}},ga=function(o,i,c){return Xe[c][o]&&Xe[c][o].replace&&(o=Xe[c][o].replace),{value:o,metrics:ao(o,i,c)}},ps=function(o,i,c,d,f){const v=ga(o,i,c),k=v.metrics;o=v.value;let T;if(k){let B=k.italic;(c==="text"||d&&d.font==="mathit")&&(B=0),T=new ts(o,k.height,k.depth,B,k.skew,k.width,f)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+o+"' in style '"+i+"' and mode '"+c+"'")),T=new ts(o,0,0,0,0,0,f);if(d){T.maxFontSize=d.sizeMultiplier,d.style.isTight()&&T.classes.push("mtight");const B=d.getColor();B&&(T.style.color=B)}return T},ox=function(o,i,c,d){return d===void 0&&(d=[]),c.font==="boldsymbol"&&ga(o,"Main-Bold",i).metrics?ps(o,"Main-Bold",i,c,d.concat(["mathbf"])):o==="\\"||Xe[i][o].font==="main"?ps(o,"Main-Regular",i,c,d):ps(o,"AMS-Regular",i,c,d.concat(["amsrm"]))},cx=function(o,i,c,d,f){return f!=="textord"&&ga(o,"Math-BoldItalic",i).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},ux=function(o,i,c){const d=o.mode,f=o.text,v=["mord"],k=d==="math"||d==="text"&&i.font,T=k?i.font:i.fontFamily;let B="",O="";if(f.charCodeAt(0)===55349&&([B,O]=lx(f,d)),B.length>0)return ps(f,B,d,i,v.concat(O));if(T){let R,H;if(T==="boldsymbol"){const K=cx(f,d,i,v,c);R=K.fontName,H=[K.fontClass]}else k?(R=Zu[T].fontName,H=[T]):(R=ya(T,i.fontWeight,i.fontShape),H=[T,i.fontWeight,i.fontShape]);if(ga(f,R,d).metrics)return ps(f,R,d,i,v.concat(H));if(Gu.hasOwnProperty(f)&&R.slice(0,10)==="Typewriter"){const K=[];for(let ae=0;ae<f.length;ae++)K.push(ps(f[ae],R,d,i,v.concat(H)));return Xu(K)}}if(c==="mathord")return ps(f,"Math-Italic",d,i,v.concat(["mathnormal"]));if(c==="textord"){const R=Xe[d][f]&&Xe[d][f].font;if(R==="ams"){const H=ya("amsrm",i.fontWeight,i.fontShape);return ps(f,H,d,i,v.concat("amsrm",i.fontWeight,i.fontShape))}else if(R==="main"||!R){const H=ya("textrm",i.fontWeight,i.fontShape);return ps(f,H,d,i,v.concat(i.fontWeight,i.fontShape))}else{const H=ya(R,i.fontWeight,i.fontShape);return ps(f,H,d,i,v.concat(H,i.fontWeight,i.fontShape))}}else throw new Error("unexpected type: "+c+" in makeOrd")},dx=(o,i)=>{if(nr(o.classes)!==nr(i.classes)||o.skew!==i.skew||o.maxFontSize!==i.maxFontSize)return!1;if(o.classes.length===1){const c=o.classes[0];if(c==="mbin"||c==="mord")return!1}for(const c in o.style)if(o.style.hasOwnProperty(c)&&o.style[c]!==i.style[c])return!1;for(const c in i.style)if(i.style.hasOwnProperty(c)&&o.style[c]!==i.style[c])return!1;return!0},hx=o=>{for(let i=0;i<o.length-1;i++){const c=o[i],d=o[i+1];c instanceof ts&&d instanceof ts&&dx(c,d)&&(c.text+=d.text,c.height=Math.max(c.height,d.height),c.depth=Math.max(c.depth,d.depth),c.italic=d.italic,o.splice(i+1,1),i--)}return o},mo=function(o){let i=0,c=0,d=0;for(let f=0;f<o.children.length;f++){const v=o.children[f];v.height>i&&(i=v.height),v.depth>c&&(c=v.depth),v.maxFontSize>d&&(d=v.maxFontSize)}o.height=i,o.depth=c,o.maxFontSize=d},Ft=function(o,i,c,d){const f=new si(o,i,c,d);return mo(f),f},Yu=(o,i,c,d)=>new si(o,i,c,d),mx=function(o,i,c){const d=Ft([o],[],i);return d.height=Math.max(c||i.fontMetrics().defaultRuleThickness,i.minRuleThickness),d.style.borderBottomWidth=fe(d.height),d.maxFontSize=1,d},fx=function(o,i,c,d){const f=new co(o,i,c,d);return mo(f),f},Xu=function(o){const i=new ti(o);return mo(i),i},px=function(o,i){return o instanceof ti?Ft([],[o],i):o},xx=function(o){if(o.positionType==="individualShift"){const c=o.children,d=[c[0]],f=-c[0].shift-c[0].elem.depth;let v=f;for(let k=1;k<c.length;k++){const T=-c[k].shift-v-c[k].elem.depth,B=T-(c[k-1].elem.height+c[k-1].elem.depth);v=v+T,d.push({type:"kern",size:B}),d.push(c[k])}return{children:d,depth:f}}let i;if(o.positionType==="top"){let c=o.positionData;for(let d=0;d<o.children.length;d++){const f=o.children[d];c-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}i=c}else if(o.positionType==="bottom")i=-o.positionData;else{const c=o.children[0];if(c.type!=="elem")throw new Error('First child must have type "elem".');if(o.positionType==="shift")i=-c.elem.depth-o.positionData;else if(o.positionType==="firstBaseline")i=-c.elem.depth;else throw new Error("Invalid positionType "+o.positionType+".")}return{children:o.children,depth:i}},gx=function(o,i){const{children:c,depth:d}=xx(o);let f=0;for(let ae=0;ae<c.length;ae++){const ve=c[ae];if(ve.type==="elem"){const we=ve.elem;f=Math.max(f,we.maxFontSize,we.height)}}f+=2;const v=Ft(["pstrut"],[]);v.style.height=fe(f);const k=[];let T=d,B=d,O=d;for(let ae=0;ae<c.length;ae++){const ve=c[ae];if(ve.type==="kern")O+=ve.size;else{const we=ve.elem,Be=ve.wrapperClasses||[],Te=ve.wrapperStyle||{},ze=Ft(Be,[v,we],void 0,Te);ze.style.top=fe(-f-O-we.depth),ve.marginLeft&&(ze.style.marginLeft=ve.marginLeft),ve.marginRight&&(ze.style.marginRight=ve.marginRight),k.push(ze),O+=we.height+we.depth}T=Math.min(T,O),B=Math.max(B,O)}const R=Ft(["vlist"],k);R.style.height=fe(B);let H;if(T<0){const ae=Ft([],[]),ve=Ft(["vlist"],[ae]);ve.style.height=fe(-T);const we=Ft(["vlist-s"],[new ts("​")]);H=[Ft(["vlist-r"],[R,we]),Ft(["vlist-r"],[ve])]}else H=[Ft(["vlist-r"],[R])];const K=Ft(["vlist-t"],H);return H.length===2&&K.classes.push("vlist-t2"),K.height=B,K.depth=-T,K},yx=(o,i)=>{const c=Ft(["mspace"],[],i),d=Ye(o,i);return c.style.marginRight=fe(d),c},ya=function(o,i,c){let d="";switch(o){case"amsrm":d="AMS";break;case"textrm":d="Main";break;case"textsf":d="SansSerif";break;case"texttt":d="Typewriter";break;default:d=o}let f;return i==="textbf"&&c==="textit"?f="BoldItalic":i==="textbf"?f="Bold":i==="textit"?f="Italic":f="Regular",d+"-"+f},Zu={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},ed={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var Q={fontMap:Zu,makeSymbol:ps,mathsym:ox,makeSpan:Ft,makeSvgSpan:Yu,makeLineSpan:mx,makeAnchor:fx,makeFragment:Xu,wrapFragment:px,makeVList:gx,makeOrd:ux,makeGlue:yx,staticSvg:function(o,i){const[c,d,f]=ed[o],v=new ir(c),k=new Rs([v],{width:fe(d),height:fe(f),style:"width:"+fe(d),viewBox:"0 0 "+1e3*d+" "+1e3*f,preserveAspectRatio:"xMinYMin"}),T=Yu(["overlay"],[k],i);return T.height=f,T.style.height=fe(f),T.style.width=fe(d),T},svgData:ed,tryCombineChars:hx};const Ze={number:3,unit:"mu"},Lr={number:4,unit:"mu"},$s={number:5,unit:"mu"},vx={mord:{mop:Ze,mbin:Lr,mrel:$s,minner:Ze},mop:{mord:Ze,mop:Ze,mrel:$s,minner:Ze},mbin:{mord:Lr,mop:Lr,mopen:Lr,minner:Lr},mrel:{mord:$s,mop:$s,mopen:$s,minner:$s},mopen:{},mclose:{mop:Ze,mbin:Lr,mrel:$s,minner:Ze},mpunct:{mord:Ze,mop:Ze,mrel:$s,mopen:Ze,mclose:Ze,mpunct:Ze,minner:Ze},minner:{mord:Ze,mop:Ze,mbin:Lr,mrel:$s,mopen:Ze,mpunct:Ze,minner:Ze}},bx={mord:{mop:Ze},mop:{mord:Ze,mop:Ze},mbin:{},mrel:{},mopen:{},mclose:{mop:Ze},mpunct:{},minner:{mop:Ze}},td={},va={},ba={};function ge(o){let{type:i,names:c,props:d,handler:f,htmlBuilder:v,mathmlBuilder:k}=o;const T={type:i,numArgs:d.numArgs,argTypes:d.argTypes,allowedInArgument:!!d.allowedInArgument,allowedInText:!!d.allowedInText,allowedInMath:d.allowedInMath===void 0?!0:d.allowedInMath,numOptionalArgs:d.numOptionalArgs||0,infix:!!d.infix,primitive:!!d.primitive,handler:f};for(let B=0;B<c.length;++B)td[c[B]]=T;i&&(v&&(va[i]=v),k&&(ba[i]=k))}function Or(o){let{type:i,htmlBuilder:c,mathmlBuilder:d}=o;ge({type:i,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:c,mathmlBuilder:d})}const wa=function(o){return o.type==="ordgroup"&&o.body.length===1?o.body[0]:o},lt=function(o){return o.type==="ordgroup"?o.body:[o]},Us=Q.makeSpan,wx=["leftmost","mbin","mopen","mrel","mop","mpunct"],jx=["rightmost","mrel","mclose","mpunct"],Nx={display:ne.DISPLAY,text:ne.TEXT,script:ne.SCRIPT,scriptscript:ne.SCRIPTSCRIPT},kx={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},mt=function(o,i,c,d){d===void 0&&(d=[null,null]);const f=[];for(let O=0;O<o.length;O++){const R=Fe(o[O],i);if(R instanceof ti){const H=R.children;f.push(...H)}else f.push(R)}if(Q.tryCombineChars(f),!c)return f;let v=i;if(o.length===1){const O=o[0];O.type==="sizing"?v=i.havingSize(O.size):O.type==="styling"&&(v=i.havingStyle(Nx[O.style]))}const k=Us([d[0]||"leftmost"],[],i),T=Us([d[1]||"rightmost"],[],i),B=c==="root";return fo(f,(O,R)=>{const H=R.classes[0],K=O.classes[0];H==="mbin"&&j.contains(jx,K)?R.classes[0]="mord":K==="mbin"&&j.contains(wx,H)&&(O.classes[0]="mord")},{node:k},T,B),fo(f,(O,R)=>{const H=xo(R),K=xo(O),ae=H&&K?O.hasClass("mtight")?bx[H][K]:vx[H][K]:null;if(ae)return Q.makeGlue(ae,v)},{node:k},T,B),f},fo=function(o,i,c,d,f){d&&o.push(d);let v=0;for(;v<o.length;v++){const k=o[v],T=sd(k);if(T){fo(T.children,i,c,null,f);continue}const B=!k.hasClass("mspace");if(B){const O=i(k,c.node);O&&(c.insertAfter?c.insertAfter(O):(o.unshift(O),v++))}B?c.node=k:f&&k.hasClass("newline")&&(c.node=Us(["leftmost"])),c.insertAfter=(O=>R=>{o.splice(O+1,0,R),v++})(v)}d&&o.pop()},sd=function(o){return o instanceof ti||o instanceof co||o instanceof si&&o.hasClass("enclosing")?o:null},po=function(o,i){const c=sd(o);if(c){const d=c.children;if(d.length){if(i==="right")return po(d[d.length-1],"right");if(i==="left")return po(d[0],"left")}}return o},xo=function(o,i){return o?(i&&(o=po(o,i)),kx[o.classes[0]]||null):null},ri=function(o,i){const c=["nulldelimiter"].concat(o.baseSizingClasses());return Us(i.concat(c))},Fe=function(o,i,c){if(!o)return Us();if(va[o.type]){let d=va[o.type](o,i);if(c&&i.size!==c.size){d=Us(i.sizingClasses(c),[d],i);const f=i.sizeMultiplier/c.sizeMultiplier;d.height*=f,d.depth*=f}return d}else throw new l("Got group of unknown type: '"+o.type+"'")};function ja(o,i){const c=Us(["base"],o,i),d=Us(["strut"]);return d.style.height=fe(c.height+c.depth),c.depth&&(d.style.verticalAlign=fe(-c.depth)),c.children.unshift(d),c}function go(o,i){let c=null;o.length===1&&o[0].type==="tag"&&(c=o[0].tag,o=o[0].body);const d=mt(o,i,"root");let f;d.length===2&&d[1].hasClass("tag")&&(f=d.pop());const v=[];let k=[];for(let O=0;O<d.length;O++)if(k.push(d[O]),d[O].hasClass("mbin")||d[O].hasClass("mrel")||d[O].hasClass("allowbreak")){let R=!1;for(;O<d.length-1&&d[O+1].hasClass("mspace")&&!d[O+1].hasClass("newline");)O++,k.push(d[O]),d[O].hasClass("nobreak")&&(R=!0);R||(v.push(ja(k,i)),k=[])}else d[O].hasClass("newline")&&(k.pop(),k.length>0&&(v.push(ja(k,i)),k=[]),v.push(d[O]));k.length>0&&v.push(ja(k,i));let T;c?(T=ja(mt(c,i,!0)),T.classes=["tag"],v.push(T)):f&&v.push(f);const B=Us(["katex-html"],v);if(B.setAttribute("aria-hidden","true"),T){const O=T.children[0];O.style.height=fe(B.height+B.depth),B.depth&&(O.style.verticalAlign=fe(-B.depth))}return B}function rd(o){return new ti(o)}class ss{constructor(i,c,d){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=i,this.attributes={},this.children=c||[],this.classes=d||[]}setAttribute(i,c){this.attributes[i]=c}getAttribute(i){return this.attributes[i]}toNode(){const i=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&i.setAttribute(c,this.attributes[c]);this.classes.length>0&&(i.className=nr(this.classes));for(let c=0;c<this.children.length;c++)i.appendChild(this.children[c].toNode());return i}toMarkup(){let i="<"+this.type;for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(i+=" "+c+'="',i+=j.escape(this.attributes[c]),i+='"');this.classes.length>0&&(i+=' class ="'+j.escape(nr(this.classes))+'"'),i+=">";for(let c=0;c<this.children.length;c++)i+=this.children[c].toMarkup();return i+="</"+this.type+">",i}toText(){return this.children.map(i=>i.toText()).join("")}}class ni{constructor(i){this.text=void 0,this.text=i}toNode(){return document.createTextNode(this.text)}toMarkup(){return j.escape(this.toText())}toText(){return this.text}}class Sx{constructor(i){this.width=void 0,this.character=void 0,this.width=i,i>=.05555&&i<=.05556?this.character=" ":i>=.1666&&i<=.1667?this.character=" ":i>=.2222&&i<=.2223?this.character=" ":i>=.2777&&i<=.2778?this.character="  ":i>=-.05556&&i<=-.05555?this.character=" ⁣":i>=-.1667&&i<=-.1666?this.character=" ⁣":i>=-.2223&&i<=-.2222?this.character=" ⁣":i>=-.2778&&i<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);{const i=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return i.setAttribute("width",fe(this.width)),i}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+fe(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var oe={MathNode:ss,TextNode:ni,SpaceNode:Sx,newDocumentFragment:rd};const rs=function(o,i,c){return Xe[i][o]&&Xe[i][o].replace&&o.charCodeAt(0)!==55349&&!(Gu.hasOwnProperty(o)&&c&&(c.fontFamily&&c.fontFamily.slice(4,6)==="tt"||c.font&&c.font.slice(4,6)==="tt"))&&(o=Xe[i][o].replace),new oe.TextNode(o)},yo=function(o){return o.length===1?o[0]:new oe.MathNode("mrow",o)},vo=function(o,i){if(i.fontFamily==="texttt")return"monospace";if(i.fontFamily==="textsf")return i.fontShape==="textit"&&i.fontWeight==="textbf"?"sans-serif-bold-italic":i.fontShape==="textit"?"sans-serif-italic":i.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(i.fontShape==="textit"&&i.fontWeight==="textbf")return"bold-italic";if(i.fontShape==="textit")return"italic";if(i.fontWeight==="textbf")return"bold";const c=i.font;if(!c||c==="mathnormal")return null;const d=o.mode;if(c==="mathit")return"italic";if(c==="boldsymbol")return o.type==="textord"?"bold":"bold-italic";if(c==="mathbf")return"bold";if(c==="mathbb")return"double-struck";if(c==="mathfrak")return"fraktur";if(c==="mathscr"||c==="mathcal")return"script";if(c==="mathsf")return"sans-serif";if(c==="mathtt")return"monospace";let f=o.text;if(j.contains(["\\imath","\\jmath"],f))return null;Xe[d][f]&&Xe[d][f].replace&&(f=Xe[d][f].replace);const v=Q.fontMap[c].fontName;return ao(f,v,d)?Q.fontMap[c].variant:null},Pt=function(o,i,c){if(o.length===1){const v=qe(o[0],i);return c&&v instanceof ss&&v.type==="mo"&&(v.setAttribute("lspace","0em"),v.setAttribute("rspace","0em")),[v]}const d=[];let f;for(let v=0;v<o.length;v++){const k=qe(o[v],i);if(k instanceof ss&&f instanceof ss){if(k.type==="mtext"&&f.type==="mtext"&&k.getAttribute("mathvariant")===f.getAttribute("mathvariant")){f.children.push(...k.children);continue}else if(k.type==="mn"&&f.type==="mn"){f.children.push(...k.children);continue}else if(k.type==="mi"&&k.children.length===1&&f.type==="mn"){const T=k.children[0];if(T instanceof ni&&T.text==="."){f.children.push(...k.children);continue}}else if(f.type==="mi"&&f.children.length===1){const T=f.children[0];if(T instanceof ni&&T.text==="̸"&&(k.type==="mo"||k.type==="mi"||k.type==="mn")){const B=k.children[0];B instanceof ni&&B.text.length>0&&(B.text=B.text.slice(0,1)+"̸"+B.text.slice(1),d.pop())}}}d.push(k),f=k}return d},ar=function(o,i,c){return yo(Pt(o,i,c))},qe=function(o,i){if(!o)return new oe.MathNode("mrow");if(ba[o.type])return ba[o.type](o,i);throw new l("Got group of unknown type: '"+o.type+"'")};function nd(o,i,c,d,f){const v=Pt(o,c);let k;v.length===1&&v[0]instanceof ss&&j.contains(["mrow","mtable"],v[0].type)?k=v[0]:k=new oe.MathNode("mrow",v);const T=new oe.MathNode("annotation",[new oe.TextNode(i)]);T.setAttribute("encoding","application/x-tex");const B=new oe.MathNode("semantics",[k,T]),O=new oe.MathNode("math",[B]);O.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),d&&O.setAttribute("display","block");const R=f?"katex":"katex-mathml";return Q.makeSpan([R],[O])}const id=function(o){return new ex({style:o.displayMode?ne.DISPLAY:ne.TEXT,maxSize:o.maxSize,minRuleThickness:o.minRuleThickness})},ad=function(o,i){if(i.displayMode){const c=["katex-display"];i.leqno&&c.push("leqno"),i.fleqn&&c.push("fleqn"),o=Q.makeSpan(c,[o])}return o},_x=function(o,i,c){const d=id(c);let f;if(c.output==="mathml")return nd(o,i,d,c.displayMode,!0);if(c.output==="html"){const v=go(o,d);f=Q.makeSpan(["katex"],[v])}else{const v=nd(o,i,d,c.displayMode,!1),k=go(o,d);f=Q.makeSpan(["katex"],[v,k])}return ad(f,c)},Cx=function(o,i,c){const d=id(c),f=go(o,d),v=Q.makeSpan(["katex"],[f]);return ad(v,c)},Ex={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Tx=function(o){const i=new oe.MathNode("mo",[new oe.TextNode(Ex[o.replace(/^\\/,"")])]);return i.setAttribute("stretchy","true"),i},Dx={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Mx=function(o){return o.type==="ordgroup"?o.body.length:1};var Hs={encloseSpan:function(o,i,c,d,f){let v;const k=o.height+o.depth+c+d;if(/fbox|color|angl/.test(i)){if(v=Q.makeSpan(["stretchy",i],[],f),i==="fbox"){const T=f.color&&f.getColor();T&&(v.style.borderColor=T)}}else{const T=[];/^[bx]cancel$/.test(i)&&T.push(new uo({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(i)&&T.push(new uo({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const B=new Rs(T,{width:"100%",height:fe(k)});v=Q.makeSvgSpan([],[B],f)}return v.height=k,v.style.height=fe(k),v},mathMLnode:Tx,svgSpan:function(o,i){function c(){let k=4e5;const T=o.label.slice(1);if(j.contains(["widehat","widecheck","widetilde","utilde"],T)){const O=Mx(o.base);let R,H,K;if(O>5)T==="widehat"||T==="widecheck"?(R=420,k=2364,K=.42,H=T+"4"):(R=312,k=2340,K=.34,H="tilde4");else{const we=[1,1,2,2,3,3][O];T==="widehat"||T==="widecheck"?(k=[0,1062,2364,2364,2364][we],R=[0,239,300,360,420][we],K=[0,.24,.3,.3,.36,.42][we],H=T+we):(k=[0,600,1033,2339,2340][we],R=[0,260,286,306,312][we],K=[0,.26,.286,.3,.306,.34][we],H="tilde"+we)}const ae=new ir(H),ve=new Rs([ae],{width:"100%",height:fe(K),viewBox:"0 0 "+k+" "+R,preserveAspectRatio:"none"});return{span:Q.makeSvgSpan([],[ve],i),minWidth:0,height:K}}else{const B=[],O=Dx[T],[R,H,K]=O,ae=K/1e3,ve=R.length;let we,Be;if(ve===1){const Te=O[3];we=["hide-tail"],Be=[Te]}else if(ve===2)we=["halfarrow-left","halfarrow-right"],Be=["xMinYMin","xMaxYMin"];else if(ve===3)we=["brace-left","brace-center","brace-right"],Be=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+ve+" children.");for(let Te=0;Te<ve;Te++){const ze=new ir(R[Te]),Oe=new Rs([ze],{width:"400em",height:fe(ae),viewBox:"0 0 "+k+" "+K,preserveAspectRatio:Be[Te]+" slice"}),$e=Q.makeSvgSpan([we[Te]],[Oe],i);if(ve===1)return{span:$e,minWidth:H,height:ae};$e.style.height=fe(ae),B.push($e)}return{span:Q.makeSpan(["stretchy"],B,i),minWidth:H,height:ae}}}const{span:d,minWidth:f,height:v}=c();return d.height=v,d.style.height=fe(v),f>0&&(d.style.minWidth=fe(f)),d}};function Ee(o,i){if(!o||o.type!==i)throw new Error("Expected node of type "+i+", but got "+(o?"node of type "+o.type:String(o)));return o}function bo(o){const i=Na(o);if(!i)throw new Error("Expected node of symbol group type, but got "+(o?"node of type "+o.type:String(o)));return i}function Na(o){return o&&(o.type==="atom"||ax.hasOwnProperty(o.type))?o:null}const wo=(o,i)=>{let c,d,f;o&&o.type==="supsub"?(d=Ee(o.base,"accent"),c=d.base,o.base=c,f=nx(Fe(o,i)),o.base=d):(d=Ee(o,"accent"),c=d.base);const v=Fe(c,i.havingCrampedStyle()),k=d.isShifty&&j.isCharacterBox(c);let T=0;if(k){const K=j.getBaseElem(c),ae=Fe(K,i.havingCrampedStyle());T=Vu(ae).skew}const B=d.label==="\\c";let O=B?v.height+v.depth:Math.min(v.height,i.fontMetrics().xHeight),R;if(d.isStretchy)R=Hs.svgSpan(d,i),R=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:v},{type:"elem",elem:R,wrapperClasses:["svg-align"],wrapperStyle:T>0?{width:"calc(100% - "+fe(2*T)+")",marginLeft:fe(2*T)}:void 0}]},i);else{let K,ae;d.label==="\\vec"?(K=Q.staticSvg("vec",i),ae=Q.svgData.vec[1]):(K=Q.makeOrd({mode:d.mode,text:d.label},i,"textord"),K=Vu(K),K.italic=0,ae=K.width,B&&(O+=K.depth)),R=Q.makeSpan(["accent-body"],[K]);const ve=d.label==="\\textcircled";ve&&(R.classes.push("accent-full"),O=v.height);let we=T;ve||(we-=ae/2),R.style.left=fe(we),d.label==="\\textcircled"&&(R.style.top=".2em"),R=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:v},{type:"kern",size:-O},{type:"elem",elem:R}]},i)}const H=Q.makeSpan(["mord","accent"],[R],i);return f?(f.children[0]=H,f.height=Math.max(H.height,f.height),f.classes[0]="mord",f):H},ld=(o,i)=>{const c=o.isStretchy?Hs.mathMLnode(o.label):new oe.MathNode("mo",[rs(o.label,o.mode)]),d=new oe.MathNode("mover",[qe(o.base,i),c]);return d.setAttribute("accent","true"),d},Ax=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(o=>"\\"+o).join("|"));ge({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(o,i)=>{const c=wa(i[0]),d=!Ax.test(o.funcName),f=!d||o.funcName==="\\widehat"||o.funcName==="\\widetilde"||o.funcName==="\\widecheck";return{type:"accent",mode:o.parser.mode,label:o.funcName,isStretchy:d,isShifty:f,base:c}},htmlBuilder:wo,mathmlBuilder:ld}),ge({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(o,i)=>{const c=i[0];let d=o.parser.mode;return d==="math"&&(o.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+o.funcName+" works only in text mode"),d="text"),{type:"accent",mode:d,label:o.funcName,isStretchy:!1,isShifty:!0,base:c}},htmlBuilder:wo,mathmlBuilder:ld}),ge({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=i[0];return{type:"accentUnder",mode:c.mode,label:d,base:f}},htmlBuilder:(o,i)=>{const c=Fe(o.base,i),d=Hs.svgSpan(o,i),f=o.label==="\\utilde"?.12:0,v=Q.makeVList({positionType:"top",positionData:c.height,children:[{type:"elem",elem:d,wrapperClasses:["svg-align"]},{type:"kern",size:f},{type:"elem",elem:c}]},i);return Q.makeSpan(["mord","accentunder"],[v],i)},mathmlBuilder:(o,i)=>{const c=Hs.mathMLnode(o.label),d=new oe.MathNode("munder",[qe(o.base,i),c]);return d.setAttribute("accentunder","true"),d}});const ka=o=>{const i=new oe.MathNode("mpadded",o?[o]:[]);return i.setAttribute("width","+0.6em"),i.setAttribute("lspace","0.3em"),i};ge({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(o,i,c){let{parser:d,funcName:f}=o;return{type:"xArrow",mode:d.mode,label:f,body:i[0],below:c[0]}},htmlBuilder(o,i){const c=i.style;let d=i.havingStyle(c.sup());const f=Q.wrapFragment(Fe(o.body,d,i),i),v=o.label.slice(0,2)==="\\x"?"x":"cd";f.classes.push(v+"-arrow-pad");let k;o.below&&(d=i.havingStyle(c.sub()),k=Q.wrapFragment(Fe(o.below,d,i),i),k.classes.push(v+"-arrow-pad"));const T=Hs.svgSpan(o,i),B=-i.fontMetrics().axisHeight+.5*T.height;let O=-i.fontMetrics().axisHeight-.5*T.height-.111;(f.depth>.25||o.label==="\\xleftequilibrium")&&(O-=f.depth);let R;if(k){const H=-i.fontMetrics().axisHeight+k.height+.5*T.height+.111;R=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:O},{type:"elem",elem:T,shift:B},{type:"elem",elem:k,shift:H}]},i)}else R=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:O},{type:"elem",elem:T,shift:B}]},i);return R.children[0].children[0].children[1].classes.push("svg-align"),Q.makeSpan(["mrel","x-arrow"],[R],i)},mathmlBuilder(o,i){const c=Hs.mathMLnode(o.label);c.setAttribute("minsize",o.label.charAt(0)==="x"?"1.75em":"3.0em");let d;if(o.body){const f=ka(qe(o.body,i));if(o.below){const v=ka(qe(o.below,i));d=new oe.MathNode("munderover",[c,v,f])}else d=new oe.MathNode("mover",[c,f])}else if(o.below){const f=ka(qe(o.below,i));d=new oe.MathNode("munder",[c,f])}else d=ka(),d=new oe.MathNode("mover",[c,d]);return d}});const Bx=Q.makeSpan;function od(o,i){const c=mt(o.body,i,!0);return Bx([o.mclass],c,i)}function cd(o,i){let c;const d=Pt(o.body,i);return o.mclass==="minner"?c=new oe.MathNode("mpadded",d):o.mclass==="mord"?o.isCharacterBox?(c=d[0],c.type="mi"):c=new oe.MathNode("mi",d):(o.isCharacterBox?(c=d[0],c.type="mo"):c=new oe.MathNode("mo",d),o.mclass==="mbin"?(c.attributes.lspace="0.22em",c.attributes.rspace="0.22em"):o.mclass==="mpunct"?(c.attributes.lspace="0em",c.attributes.rspace="0.17em"):o.mclass==="mopen"||o.mclass==="mclose"?(c.attributes.lspace="0em",c.attributes.rspace="0em"):o.mclass==="minner"&&(c.attributes.lspace="0.0556em",c.attributes.width="+0.1111em")),c}ge({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(o,i){let{parser:c,funcName:d}=o;const f=i[0];return{type:"mclass",mode:c.mode,mclass:"m"+d.slice(5),body:lt(f),isCharacterBox:j.isCharacterBox(f)}},htmlBuilder:od,mathmlBuilder:cd});const Sa=o=>{const i=o.type==="ordgroup"&&o.body.length?o.body[0]:o;return i.type==="atom"&&(i.family==="bin"||i.family==="rel")?"m"+i.family:"mord"};ge({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(o,i){let{parser:c}=o;return{type:"mclass",mode:c.mode,mclass:Sa(i[0]),body:lt(i[1]),isCharacterBox:j.isCharacterBox(i[1])}}}),ge({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(o,i){let{parser:c,funcName:d}=o;const f=i[1],v=i[0];let k;d!=="\\stackrel"?k=Sa(f):k="mrel";const T={type:"op",mode:f.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:d!=="\\stackrel",body:lt(f)},B={type:"supsub",mode:v.mode,base:T,sup:d==="\\underset"?null:v,sub:d==="\\underset"?v:null};return{type:"mclass",mode:c.mode,mclass:k,body:[B],isCharacterBox:j.isCharacterBox(B)}},htmlBuilder:od,mathmlBuilder:cd}),ge({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(o,i){let{parser:c}=o;return{type:"pmb",mode:c.mode,mclass:Sa(i[0]),body:lt(i[0])}},htmlBuilder(o,i){const c=mt(o.body,i,!0),d=Q.makeSpan([o.mclass],c,i);return d.style.textShadow="0.02em 0.01em 0.04px",d},mathmlBuilder(o,i){const c=Pt(o.body,i),d=new oe.MathNode("mstyle",c);return d.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),d}});const zx={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},ud=()=>({type:"styling",body:[],mode:"math",style:"display"}),dd=o=>o.type==="textord"&&o.text==="@",Fx=(o,i)=>(o.type==="mathord"||o.type==="atom")&&o.text===i;function Px(o,i,c){const d=zx[o];switch(d){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return c.callFunction(d,[i[0]],[i[1]]);case"\\uparrow":case"\\downarrow":{const f=c.callFunction("\\\\cdleft",[i[0]],[]),v={type:"atom",text:d,mode:"math",family:"rel"},k=c.callFunction("\\Big",[v],[]),T=c.callFunction("\\\\cdright",[i[1]],[]),B={type:"ordgroup",mode:"math",body:[f,k,T]};return c.callFunction("\\\\cdparent",[B],[])}case"\\\\cdlongequal":return c.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const f={type:"textord",text:"\\Vert",mode:"math"};return c.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Lx(o){const i=[];for(o.gullet.beginGroup(),o.gullet.macros.set("\\cr","\\\\\\relax"),o.gullet.beginGroup();;){i.push(o.parseExpression(!1,"\\\\")),o.gullet.endGroup(),o.gullet.beginGroup();const v=o.fetch().text;if(v==="&"||v==="\\\\")o.consume();else if(v==="\\end"){i[i.length-1].length===0&&i.pop();break}else throw new l("Expected \\\\ or \\cr or \\end",o.nextToken)}let c=[];const d=[c];for(let v=0;v<i.length;v++){const k=i[v];let T=ud();for(let B=0;B<k.length;B++)if(!dd(k[B]))T.body.push(k[B]);else{c.push(T),B+=1;const O=bo(k[B]).text,R=new Array(2);if(R[0]={type:"ordgroup",mode:"math",body:[]},R[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(O)>-1))if("<>AV".indexOf(O)>-1)for(let ae=0;ae<2;ae++){let ve=!0;for(let we=B+1;we<k.length;we++){if(Fx(k[we],O)){ve=!1,B=we;break}if(dd(k[we]))throw new l("Missing a "+O+" character to complete a CD arrow.",k[we]);R[ae].body.push(k[we])}if(ve)throw new l("Missing a "+O+" character to complete a CD arrow.",k[B])}else throw new l('Expected one of "<>AV=|." after @',k[B]);const K={type:"styling",body:[Px(O,R,o)],mode:"math",style:"display"};c.push(K),T=ud()}v%2===0?c.push(T):c.shift(),c=[],d.push(c)}o.gullet.endGroup(),o.gullet.endGroup();const f=new Array(d[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:d,arraystretch:1,addJot:!0,rowGaps:[null],cols:f,colSeparationType:"CD",hLinesBeforeRow:new Array(d.length+1).fill([])}}ge({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(o,i){let{parser:c,funcName:d}=o;return{type:"cdlabel",mode:c.mode,side:d.slice(4),label:i[0]}},htmlBuilder(o,i){const c=i.havingStyle(i.style.sup()),d=Q.wrapFragment(Fe(o.label,c,i),i);return d.classes.push("cd-label-"+o.side),d.style.bottom=fe(.8-d.depth),d.height=0,d.depth=0,d},mathmlBuilder(o,i){let c=new oe.MathNode("mrow",[qe(o.label,i)]);return c=new oe.MathNode("mpadded",[c]),c.setAttribute("width","0"),o.side==="left"&&c.setAttribute("lspace","-1width"),c.setAttribute("voffset","0.7em"),c=new oe.MathNode("mstyle",[c]),c.setAttribute("displaystyle","false"),c.setAttribute("scriptlevel","1"),c}}),ge({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(o,i){let{parser:c}=o;return{type:"cdlabelparent",mode:c.mode,fragment:i[0]}},htmlBuilder(o,i){const c=Q.wrapFragment(Fe(o.fragment,i),i);return c.classes.push("cd-vert-arrow"),c},mathmlBuilder(o,i){return new oe.MathNode("mrow",[qe(o.fragment,i)])}}),ge({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(o,i){let{parser:c}=o;const f=Ee(i[0],"ordgroup").body;let v="";for(let B=0;B<f.length;B++){const O=Ee(f[B],"textord");v+=O.text}let k=parseInt(v),T;if(isNaN(k))throw new l("\\@char has non-numeric argument "+v);if(k<0||k>=1114111)throw new l("\\@char with invalid code point "+v);return k<=65535?T=String.fromCharCode(k):(k-=65536,T=String.fromCharCode((k>>10)+55296,(k&1023)+56320)),{type:"textord",mode:c.mode,text:T}}});const hd=(o,i)=>{const c=mt(o.body,i.withColor(o.color),!1);return Q.makeFragment(c)},md=(o,i)=>{const c=Pt(o.body,i.withColor(o.color)),d=new oe.MathNode("mstyle",c);return d.setAttribute("mathcolor",o.color),d};ge({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(o,i){let{parser:c}=o;const d=Ee(i[0],"color-token").color,f=i[1];return{type:"color",mode:c.mode,color:d,body:lt(f)}},htmlBuilder:hd,mathmlBuilder:md}),ge({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(o,i){let{parser:c,breakOnTokenText:d}=o;const f=Ee(i[0],"color-token").color;c.gullet.macros.set("\\current@color",f);const v=c.parseExpression(!0,d);return{type:"color",mode:c.mode,color:f,body:v}},htmlBuilder:hd,mathmlBuilder:md}),ge({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(o,i,c){let{parser:d}=o;const f=d.gullet.future().text==="["?d.parseSizeGroup(!0):null,v=!d.settings.displayMode||!d.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:d.mode,newLine:v,size:f&&Ee(f,"size").value}},htmlBuilder(o,i){const c=Q.makeSpan(["mspace"],[],i);return o.newLine&&(c.classes.push("newline"),o.size&&(c.style.marginTop=fe(Ye(o.size,i)))),c},mathmlBuilder(o,i){const c=new oe.MathNode("mspace");return o.newLine&&(c.setAttribute("linebreak","newline"),o.size&&c.setAttribute("height",fe(Ye(o.size,i)))),c}});const jo={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},fd=o=>{const i=o.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new l("Expected a control sequence",o);return i},Ox=o=>{let i=o.gullet.popToken();return i.text==="="&&(i=o.gullet.popToken(),i.text===" "&&(i=o.gullet.popToken())),i},pd=(o,i,c,d)=>{let f=o.gullet.macros.get(c.text);f==null&&(c.noexpand=!0,f={tokens:[c],numArgs:0,unexpandable:!o.gullet.isExpandable(c.text)}),o.gullet.macros.set(i,f,d)};ge({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(o){let{parser:i,funcName:c}=o;i.consumeSpaces();const d=i.fetch();if(jo[d.text])return(c==="\\global"||c==="\\\\globallong")&&(d.text=jo[d.text]),Ee(i.parseFunction(),"internal");throw new l("Invalid token after macro prefix",d)}}),ge({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){let{parser:i,funcName:c}=o,d=i.gullet.popToken();const f=d.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(f))throw new l("Expected a control sequence",d);let v=0,k;const T=[[]];for(;i.gullet.future().text!=="{";)if(d=i.gullet.popToken(),d.text==="#"){if(i.gullet.future().text==="{"){k=i.gullet.future(),T[v].push("{");break}if(d=i.gullet.popToken(),!/^[1-9]$/.test(d.text))throw new l('Invalid argument number "'+d.text+'"');if(parseInt(d.text)!==v+1)throw new l('Argument number "'+d.text+'" out of order');v++,T.push([])}else{if(d.text==="EOF")throw new l("Expected a macro definition");T[v].push(d.text)}let{tokens:B}=i.gullet.consumeArg();return k&&B.unshift(k),(c==="\\edef"||c==="\\xdef")&&(B=i.gullet.expandTokens(B),B.reverse()),i.gullet.macros.set(f,{tokens:B,numArgs:v,delimiters:T},c===jo[c]),{type:"internal",mode:i.mode}}}),ge({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){let{parser:i,funcName:c}=o;const d=fd(i.gullet.popToken());i.gullet.consumeSpaces();const f=Ox(i);return pd(i,d,f,c==="\\\\globallet"),{type:"internal",mode:i.mode}}}),ge({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){let{parser:i,funcName:c}=o;const d=fd(i.gullet.popToken()),f=i.gullet.popToken(),v=i.gullet.popToken();return pd(i,d,v,c==="\\\\globalfuture"),i.gullet.pushToken(v),i.gullet.pushToken(f),{type:"internal",mode:i.mode}}});const ii=function(o,i,c){const d=Xe.math[o]&&Xe.math[o].replace,f=ao(d||o,i,c);if(!f)throw new Error("Unsupported symbol "+o+" and font size "+i+".");return f},No=function(o,i,c,d){const f=c.havingBaseStyle(i),v=Q.makeSpan(d.concat(f.sizingClasses(c)),[o],c),k=f.sizeMultiplier/c.sizeMultiplier;return v.height*=k,v.depth*=k,v.maxFontSize=f.sizeMultiplier,v},xd=function(o,i,c){const d=i.havingBaseStyle(c),f=(1-i.sizeMultiplier/d.sizeMultiplier)*i.fontMetrics().axisHeight;o.classes.push("delimcenter"),o.style.top=fe(f),o.height-=f,o.depth+=f},Ix=function(o,i,c,d,f,v){const k=Q.makeSymbol(o,"Main-Regular",f,d),T=No(k,i,d,v);return c&&xd(T,d,i),T},Rx=function(o,i,c,d){return Q.makeSymbol(o,"Size"+i+"-Regular",c,d)},gd=function(o,i,c,d,f,v){const k=Rx(o,i,f,d),T=No(Q.makeSpan(["delimsizing","size"+i],[k],d),ne.TEXT,d,v);return c&&xd(T,d,ne.TEXT),T},ko=function(o,i,c){let d;return i==="Size1-Regular"?d="delim-size1":d="delim-size4",{type:"elem",elem:Q.makeSpan(["delimsizinginner",d],[Q.makeSpan([],[Q.makeSymbol(o,i,c)])])}},So=function(o,i,c){const d=Cs["Size4-Regular"][o.charCodeAt(0)]?Cs["Size4-Regular"][o.charCodeAt(0)][4]:Cs["Size1-Regular"][o.charCodeAt(0)][4],f=new ir("inner",K1(o,Math.round(1e3*i))),v=new Rs([f],{width:fe(d),height:fe(i),style:"width:"+fe(d),viewBox:"0 0 "+1e3*d+" "+Math.round(1e3*i),preserveAspectRatio:"xMinYMin"}),k=Q.makeSvgSpan([],[v],c);return k.height=i,k.style.height=fe(i),k.style.width=fe(d),{type:"elem",elem:k}},_o=.008,_a={type:"kern",size:-1*_o},qx=["|","\\lvert","\\rvert","\\vert"],$x=["\\|","\\lVert","\\rVert","\\Vert"],yd=function(o,i,c,d,f,v){let k,T,B,O,R="",H=0;k=B=O=o,T=null;let K="Size1-Regular";o==="\\uparrow"?B=O="⏐":o==="\\Uparrow"?B=O="‖":o==="\\downarrow"?k=B="⏐":o==="\\Downarrow"?k=B="‖":o==="\\updownarrow"?(k="\\uparrow",B="⏐",O="\\downarrow"):o==="\\Updownarrow"?(k="\\Uparrow",B="‖",O="\\Downarrow"):j.contains(qx,o)?(B="∣",R="vert",H=333):j.contains($x,o)?(B="∥",R="doublevert",H=556):o==="["||o==="\\lbrack"?(k="⎡",B="⎢",O="⎣",K="Size4-Regular",R="lbrack",H=667):o==="]"||o==="\\rbrack"?(k="⎤",B="⎥",O="⎦",K="Size4-Regular",R="rbrack",H=667):o==="\\lfloor"||o==="⌊"?(B=k="⎢",O="⎣",K="Size4-Regular",R="lfloor",H=667):o==="\\lceil"||o==="⌈"?(k="⎡",B=O="⎢",K="Size4-Regular",R="lceil",H=667):o==="\\rfloor"||o==="⌋"?(B=k="⎥",O="⎦",K="Size4-Regular",R="rfloor",H=667):o==="\\rceil"||o==="⌉"?(k="⎤",B=O="⎥",K="Size4-Regular",R="rceil",H=667):o==="("||o==="\\lparen"?(k="⎛",B="⎜",O="⎝",K="Size4-Regular",R="lparen",H=875):o===")"||o==="\\rparen"?(k="⎞",B="⎟",O="⎠",K="Size4-Regular",R="rparen",H=875):o==="\\{"||o==="\\lbrace"?(k="⎧",T="⎨",O="⎩",B="⎪",K="Size4-Regular"):o==="\\}"||o==="\\rbrace"?(k="⎫",T="⎬",O="⎭",B="⎪",K="Size4-Regular"):o==="\\lgroup"||o==="⟮"?(k="⎧",O="⎩",B="⎪",K="Size4-Regular"):o==="\\rgroup"||o==="⟯"?(k="⎫",O="⎭",B="⎪",K="Size4-Regular"):o==="\\lmoustache"||o==="⎰"?(k="⎧",O="⎭",B="⎪",K="Size4-Regular"):(o==="\\rmoustache"||o==="⎱")&&(k="⎫",O="⎩",B="⎪",K="Size4-Regular");const ae=ii(k,K,f),ve=ae.height+ae.depth,we=ii(B,K,f),Be=we.height+we.depth,Te=ii(O,K,f),ze=Te.height+Te.depth;let Oe=0,$e=1;if(T!==null){const it=ii(T,K,f);Oe=it.height+it.depth,$e=2}const Tt=ve+ze+Oe,ft=Math.max(0,Math.ceil((i-Tt)/($e*Be))),is=Tt+ft*$e*Be;let un=d.fontMetrics().axisHeight;c&&(un*=d.sizeMultiplier);const Pe=is/2-un,Ie=[];if(R.length>0){const it=is-ve-ze,et=Math.round(is*1e3),as=J1(R,Math.round(it*1e3)),fg=new ir(R,as),oh=(H/1e3).toFixed(3)+"em",ch=(et/1e3).toFixed(3)+"em",pg=new Rs([fg],{width:oh,height:ch,viewBox:"0 0 "+H+" "+et}),Ma=Q.makeSvgSpan([],[pg],d);Ma.height=et/1e3,Ma.style.width=oh,Ma.style.height=ch,Ie.push({type:"elem",elem:Ma})}else{if(Ie.push(ko(O,K,f)),Ie.push(_a),T===null){const it=is-ve-ze+2*_o;Ie.push(So(B,it,d))}else{const it=(is-ve-ze-Oe)/2+2*_o;Ie.push(So(B,it,d)),Ie.push(_a),Ie.push(ko(T,K,f)),Ie.push(_a),Ie.push(So(B,it,d))}Ie.push(_a),Ie.push(ko(k,K,f))}const We=d.havingBaseStyle(ne.TEXT),Ke=Q.makeVList({positionType:"bottom",positionData:Pe,children:Ie},We);return No(Q.makeSpan(["delimsizing","mult"],[Ke],We),ne.TEXT,d,v)},Co=80,Eo=.08,To=function(o,i,c,d,f){const v=Q1(o,d,c),k=new ir(o,v),T=new Rs([k],{width:"400em",height:fe(i),viewBox:"0 0 400000 "+c,preserveAspectRatio:"xMinYMin slice"});return Q.makeSvgSpan(["hide-tail"],[T],f)},Ux=function(o,i){const c=i.havingBaseSizing(),d=jd("\\surd",o*c.sizeMultiplier,wd,c);let f=c.sizeMultiplier;const v=Math.max(0,i.minRuleThickness-i.fontMetrics().sqrtRuleThickness);let k,T=0,B=0,O=0,R;return d.type==="small"?(O=1e3+1e3*v+Co,o<1?f=1:o<1.4&&(f=.7),T=(1+v+Eo)/f,B=(1+v)/f,k=To("sqrtMain",T,O,v,i),k.style.minWidth="0.853em",R=.833/f):d.type==="large"?(O=(1e3+Co)*ai[d.size],B=(ai[d.size]+v)/f,T=(ai[d.size]+v+Eo)/f,k=To("sqrtSize"+d.size,T,O,v,i),k.style.minWidth="1.02em",R=1/f):(T=o+v+Eo,B=o+v,O=Math.floor(1e3*o+v)+Co,k=To("sqrtTall",T,O,v,i),k.style.minWidth="0.742em",R=1.056),k.height=B,k.style.height=fe(T),{span:k,advanceWidth:R,ruleWidth:(i.fontMetrics().sqrtRuleThickness+v)*f}},vd=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Hx=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],bd=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],ai=[0,1.2,1.8,2.4,3],Wx=function(o,i,c,d,f){if(o==="<"||o==="\\lt"||o==="⟨"?o="\\langle":(o===">"||o==="\\gt"||o==="⟩")&&(o="\\rangle"),j.contains(vd,o)||j.contains(bd,o))return gd(o,i,!1,c,d,f);if(j.contains(Hx,o))return yd(o,ai[i],!1,c,d,f);throw new l("Illegal delimiter: '"+o+"'")},Vx=[{type:"small",style:ne.SCRIPTSCRIPT},{type:"small",style:ne.SCRIPT},{type:"small",style:ne.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Gx=[{type:"small",style:ne.SCRIPTSCRIPT},{type:"small",style:ne.SCRIPT},{type:"small",style:ne.TEXT},{type:"stack"}],wd=[{type:"small",style:ne.SCRIPTSCRIPT},{type:"small",style:ne.SCRIPT},{type:"small",style:ne.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Qx=function(o){if(o.type==="small")return"Main-Regular";if(o.type==="large")return"Size"+o.size+"-Regular";if(o.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+o.type+"' here.")},jd=function(o,i,c,d){const f=Math.min(2,3-d.style.size);for(let v=f;v<c.length&&c[v].type!=="stack";v++){const k=ii(o,Qx(c[v]),"math");let T=k.height+k.depth;if(c[v].type==="small"){const B=d.havingBaseStyle(c[v].style);T*=B.sizeMultiplier}if(T>i)return c[v]}return c[c.length-1]},Nd=function(o,i,c,d,f,v){o==="<"||o==="\\lt"||o==="⟨"?o="\\langle":(o===">"||o==="\\gt"||o==="⟩")&&(o="\\rangle");let k;j.contains(bd,o)?k=Vx:j.contains(vd,o)?k=wd:k=Gx;const T=jd(o,i,k,d);return T.type==="small"?Ix(o,T.style,c,d,f,v):T.type==="large"?gd(o,T.size,c,d,f,v):yd(o,i,c,d,f,v)};var Ws={sqrtImage:Ux,sizedDelim:Wx,sizeToMaxHeight:ai,customSizedDelim:Nd,leftRightDelim:function(o,i,c,d,f,v){const k=d.fontMetrics().axisHeight*d.sizeMultiplier,T=901,B=5/d.fontMetrics().ptPerEm,O=Math.max(i-k,c+k),R=Math.max(O/500*T,2*O-B);return Nd(o,R,!0,d,f,v)}};const kd={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Kx=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Ca(o,i){const c=Na(o);if(c&&j.contains(Kx,c.text))return c;throw c?new l("Invalid delimiter '"+c.text+"' after '"+i.funcName+"'",o):new l("Invalid delimiter type '"+o.type+"'",o)}ge({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(o,i)=>{const c=Ca(i[0],o);return{type:"delimsizing",mode:o.parser.mode,size:kd[o.funcName].size,mclass:kd[o.funcName].mclass,delim:c.text}},htmlBuilder:(o,i)=>o.delim==="."?Q.makeSpan([o.mclass]):Ws.sizedDelim(o.delim,o.size,i,o.mode,[o.mclass]),mathmlBuilder:o=>{const i=[];o.delim!=="."&&i.push(rs(o.delim,o.mode));const c=new oe.MathNode("mo",i);o.mclass==="mopen"||o.mclass==="mclose"?c.setAttribute("fence","true"):c.setAttribute("fence","false"),c.setAttribute("stretchy","true");const d=fe(Ws.sizeToMaxHeight[o.size]);return c.setAttribute("minsize",d),c.setAttribute("maxsize",d),c}});function Sd(o){if(!o.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ge({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(o,i)=>{const c=o.parser.gullet.macros.get("\\current@color");if(c&&typeof c!="string")throw new l("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:o.parser.mode,delim:Ca(i[0],o).text,color:c}}}),ge({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(o,i)=>{const c=Ca(i[0],o),d=o.parser;++d.leftrightDepth;const f=d.parseExpression(!1);--d.leftrightDepth,d.expect("\\right",!1);const v=Ee(d.parseFunction(),"leftright-right");return{type:"leftright",mode:d.mode,body:f,left:c.text,right:v.delim,rightColor:v.color}},htmlBuilder:(o,i)=>{Sd(o);const c=mt(o.body,i,!0,["mopen","mclose"]);let d=0,f=0,v=!1;for(let B=0;B<c.length;B++)c[B].isMiddle?v=!0:(d=Math.max(c[B].height,d),f=Math.max(c[B].depth,f));d*=i.sizeMultiplier,f*=i.sizeMultiplier;let k;if(o.left==="."?k=ri(i,["mopen"]):k=Ws.leftRightDelim(o.left,d,f,i,o.mode,["mopen"]),c.unshift(k),v)for(let B=1;B<c.length;B++){const R=c[B].isMiddle;R&&(c[B]=Ws.leftRightDelim(R.delim,d,f,R.options,o.mode,[]))}let T;if(o.right===".")T=ri(i,["mclose"]);else{const B=o.rightColor?i.withColor(o.rightColor):i;T=Ws.leftRightDelim(o.right,d,f,B,o.mode,["mclose"])}return c.push(T),Q.makeSpan(["minner"],c,i)},mathmlBuilder:(o,i)=>{Sd(o);const c=Pt(o.body,i);if(o.left!=="."){const d=new oe.MathNode("mo",[rs(o.left,o.mode)]);d.setAttribute("fence","true"),c.unshift(d)}if(o.right!=="."){const d=new oe.MathNode("mo",[rs(o.right,o.mode)]);d.setAttribute("fence","true"),o.rightColor&&d.setAttribute("mathcolor",o.rightColor),c.push(d)}return yo(c)}}),ge({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(o,i)=>{const c=Ca(i[0],o);if(!o.parser.leftrightDepth)throw new l("\\middle without preceding \\left",c);return{type:"middle",mode:o.parser.mode,delim:c.text}},htmlBuilder:(o,i)=>{let c;if(o.delim===".")c=ri(i,[]);else{c=Ws.sizedDelim(o.delim,1,i,o.mode,[]);const d={delim:o.delim,options:i};c.isMiddle=d}return c},mathmlBuilder:(o,i)=>{const c=o.delim==="\\vert"||o.delim==="|"?rs("|","text"):rs(o.delim,o.mode),d=new oe.MathNode("mo",[c]);return d.setAttribute("fence","true"),d.setAttribute("lspace","0.05em"),d.setAttribute("rspace","0.05em"),d}});const Do=(o,i)=>{const c=Q.wrapFragment(Fe(o.body,i),i),d=o.label.slice(1);let f=i.sizeMultiplier,v,k=0;const T=j.isCharacterBox(o.body);if(d==="sout")v=Q.makeSpan(["stretchy","sout"]),v.height=i.fontMetrics().defaultRuleThickness/f,k=-.5*i.fontMetrics().xHeight;else if(d==="phase"){const O=Ye({number:.6,unit:"pt"},i),R=Ye({number:.35,unit:"ex"},i),H=i.havingBaseSizing();f=f/H.sizeMultiplier;const K=c.height+c.depth+O+R;c.style.paddingLeft=fe(K/2+O);const ae=Math.floor(1e3*K*f),ve=nt(ae),we=new Rs([new ir("phase",ve)],{width:"400em",height:fe(ae/1e3),viewBox:"0 0 400000 "+ae,preserveAspectRatio:"xMinYMin slice"});v=Q.makeSvgSpan(["hide-tail"],[we],i),v.style.height=fe(K),k=c.depth+O+R}else{/cancel/.test(d)?T||c.classes.push("cancel-pad"):d==="angl"?c.classes.push("anglpad"):c.classes.push("boxpad");let O=0,R=0,H=0;/box/.test(d)?(H=Math.max(i.fontMetrics().fboxrule,i.minRuleThickness),O=i.fontMetrics().fboxsep+(d==="colorbox"?0:H),R=O):d==="angl"?(H=Math.max(i.fontMetrics().defaultRuleThickness,i.minRuleThickness),O=4*H,R=Math.max(0,.25-c.depth)):(O=T?.2:0,R=O),v=Hs.encloseSpan(c,d,O,R,i),/fbox|boxed|fcolorbox/.test(d)?(v.style.borderStyle="solid",v.style.borderWidth=fe(H)):d==="angl"&&H!==.049&&(v.style.borderTopWidth=fe(H),v.style.borderRightWidth=fe(H)),k=c.depth+R,o.backgroundColor&&(v.style.backgroundColor=o.backgroundColor,o.borderColor&&(v.style.borderColor=o.borderColor))}let B;if(o.backgroundColor)B=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:v,shift:k},{type:"elem",elem:c,shift:0}]},i);else{const O=/cancel|phase/.test(d)?["svg-align"]:[];B=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:v,shift:k,wrapperClasses:O}]},i)}return/cancel/.test(d)&&(B.height=c.height,B.depth=c.depth),/cancel/.test(d)&&!T?Q.makeSpan(["mord","cancel-lap"],[B],i):Q.makeSpan(["mord"],[B],i)},Mo=(o,i)=>{let c=0;const d=new oe.MathNode(o.label.indexOf("colorbox")>-1?"mpadded":"menclose",[qe(o.body,i)]);switch(o.label){case"\\cancel":d.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":d.setAttribute("notation","downdiagonalstrike");break;case"\\phase":d.setAttribute("notation","phasorangle");break;case"\\sout":d.setAttribute("notation","horizontalstrike");break;case"\\fbox":d.setAttribute("notation","box");break;case"\\angl":d.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(c=i.fontMetrics().fboxsep*i.fontMetrics().ptPerEm,d.setAttribute("width","+"+2*c+"pt"),d.setAttribute("height","+"+2*c+"pt"),d.setAttribute("lspace",c+"pt"),d.setAttribute("voffset",c+"pt"),o.label==="\\fcolorbox"){const f=Math.max(i.fontMetrics().fboxrule,i.minRuleThickness);d.setAttribute("style","border: "+f+"em solid "+String(o.borderColor))}break;case"\\xcancel":d.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return o.backgroundColor&&d.setAttribute("mathbackground",o.backgroundColor),d};ge({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(o,i,c){let{parser:d,funcName:f}=o;const v=Ee(i[0],"color-token").color,k=i[1];return{type:"enclose",mode:d.mode,label:f,backgroundColor:v,body:k}},htmlBuilder:Do,mathmlBuilder:Mo}),ge({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(o,i,c){let{parser:d,funcName:f}=o;const v=Ee(i[0],"color-token").color,k=Ee(i[1],"color-token").color,T=i[2];return{type:"enclose",mode:d.mode,label:f,backgroundColor:k,borderColor:v,body:T}},htmlBuilder:Do,mathmlBuilder:Mo}),ge({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(o,i){let{parser:c}=o;return{type:"enclose",mode:c.mode,label:"\\fbox",body:i[0]}}}),ge({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(o,i){let{parser:c,funcName:d}=o;const f=i[0];return{type:"enclose",mode:c.mode,label:d,body:f}},htmlBuilder:Do,mathmlBuilder:Mo}),ge({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(o,i){let{parser:c}=o;return{type:"enclose",mode:c.mode,label:"\\angl",body:i[0]}}});const _d={};function Es(o){let{type:i,names:c,props:d,handler:f,htmlBuilder:v,mathmlBuilder:k}=o;const T={type:i,numArgs:d.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:f};for(let B=0;B<c.length;++B)_d[c[B]]=T;v&&(va[i]=v),k&&(ba[i]=k)}const Cd={};function M(o,i){Cd[o]=i}class Vt{constructor(i,c,d){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=i,this.start=c,this.end=d}static range(i,c){return c?!i||!i.loc||!c.loc||i.loc.lexer!==c.loc.lexer?null:new Vt(i.loc.lexer,i.loc.start,c.loc.end):i&&i.loc}}class ns{constructor(i,c){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=i,this.loc=c}range(i,c){return new ns(c,Vt.range(this,i))}}function Ed(o){const i=[];o.consumeSpaces();let c=o.fetch().text;for(c==="\\relax"&&(o.consume(),o.consumeSpaces(),c=o.fetch().text);c==="\\hline"||c==="\\hdashline";)o.consume(),i.push(c==="\\hdashline"),o.consumeSpaces(),c=o.fetch().text;return i}const Ea=o=>{if(!o.parser.settings.displayMode)throw new l("{"+o.envName+"} can be used only in display mode.")};function Ao(o){if(o.indexOf("ed")===-1)return o.indexOf("*")===-1}function lr(o,i,c){let{hskipBeforeAndAfter:d,addJot:f,cols:v,arraystretch:k,colSeparationType:T,autoTag:B,singleRow:O,emptySingleRow:R,maxNumCols:H,leqno:K}=i;if(o.gullet.beginGroup(),O||o.gullet.macros.set("\\cr","\\\\\\relax"),!k){const $e=o.gullet.expandMacroAsText("\\arraystretch");if($e==null)k=1;else if(k=parseFloat($e),!k||k<0)throw new l("Invalid \\arraystretch: "+$e)}o.gullet.beginGroup();let ae=[];const ve=[ae],we=[],Be=[],Te=B!=null?[]:void 0;function ze(){B&&o.gullet.macros.set("\\@eqnsw","1",!0)}function Oe(){Te&&(o.gullet.macros.get("\\df@tag")?(Te.push(o.subparse([new ns("\\df@tag")])),o.gullet.macros.set("\\df@tag",void 0,!0)):Te.push(!!B&&o.gullet.macros.get("\\@eqnsw")==="1"))}for(ze(),Be.push(Ed(o));;){let $e=o.parseExpression(!1,O?"\\end":"\\\\");o.gullet.endGroup(),o.gullet.beginGroup(),$e={type:"ordgroup",mode:o.mode,body:$e},c&&($e={type:"styling",mode:o.mode,style:c,body:[$e]}),ae.push($e);const Tt=o.fetch().text;if(Tt==="&"){if(H&&ae.length===H){if(O||T)throw new l("Too many tab characters: &",o.nextToken);o.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}o.consume()}else if(Tt==="\\end"){Oe(),ae.length===1&&$e.type==="styling"&&$e.body[0].body.length===0&&(ve.length>1||!R)&&ve.pop(),Be.length<ve.length+1&&Be.push([]);break}else if(Tt==="\\\\"){o.consume();let ft;o.gullet.future().text!==" "&&(ft=o.parseSizeGroup(!0)),we.push(ft?ft.value:null),Oe(),Be.push(Ed(o)),ae=[],ve.push(ae),ze()}else throw new l("Expected & or \\\\ or \\cr or \\end",o.nextToken)}return o.gullet.endGroup(),o.gullet.endGroup(),{type:"array",mode:o.mode,addJot:f,arraystretch:k,body:ve,cols:v,rowGaps:we,hskipBeforeAndAfter:d,hLinesBeforeRow:Be,colSeparationType:T,tags:Te,leqno:K}}function Bo(o){return o.slice(0,1)==="d"?"display":"text"}const Ts=function(o,i){let c,d;const f=o.body.length,v=o.hLinesBeforeRow;let k=0,T=new Array(f);const B=[],O=Math.max(i.fontMetrics().arrayRuleWidth,i.minRuleThickness),R=1/i.fontMetrics().ptPerEm;let H=5*R;o.colSeparationType&&o.colSeparationType==="small"&&(H=.2778*(i.havingStyle(ne.SCRIPT).sizeMultiplier/i.sizeMultiplier));const K=o.colSeparationType==="CD"?Ye({number:3,unit:"ex"},i):12*R,ae=3*R,ve=o.arraystretch*K,we=.7*ve,Be=.3*ve;let Te=0;function ze(Pe){for(let Ie=0;Ie<Pe.length;++Ie)Ie>0&&(Te+=.25),B.push({pos:Te,isDashed:Pe[Ie]})}for(ze(v[0]),c=0;c<o.body.length;++c){const Pe=o.body[c];let Ie=we,We=Be;k<Pe.length&&(k=Pe.length);const Ke=new Array(Pe.length);for(d=0;d<Pe.length;++d){const as=Fe(Pe[d],i);We<as.depth&&(We=as.depth),Ie<as.height&&(Ie=as.height),Ke[d]=as}const it=o.rowGaps[c];let et=0;it&&(et=Ye(it,i),et>0&&(et+=Be,We<et&&(We=et),et=0)),o.addJot&&(We+=ae),Ke.height=Ie,Ke.depth=We,Te+=Ie,Ke.pos=Te,Te+=We+et,T[c]=Ke,ze(v[c+1])}const Oe=Te/2+i.fontMetrics().axisHeight,$e=o.cols||[],Tt=[];let ft,is;const un=[];if(o.tags&&o.tags.some(Pe=>Pe))for(c=0;c<f;++c){const Pe=T[c],Ie=Pe.pos-Oe,We=o.tags[c];let Ke;We===!0?Ke=Q.makeSpan(["eqn-num"],[],i):We===!1?Ke=Q.makeSpan([],[],i):Ke=Q.makeSpan([],mt(We,i,!0),i),Ke.depth=Pe.depth,Ke.height=Pe.height,un.push({type:"elem",elem:Ke,shift:Ie})}for(d=0,is=0;d<k||is<$e.length;++d,++is){let Pe=$e[is]||{},Ie=!0;for(;Pe.type==="separator";){if(Ie||(ft=Q.makeSpan(["arraycolsep"],[]),ft.style.width=fe(i.fontMetrics().doubleRuleSep),Tt.push(ft)),Pe.separator==="|"||Pe.separator===":"){const it=Pe.separator==="|"?"solid":"dashed",et=Q.makeSpan(["vertical-separator"],[],i);et.style.height=fe(Te),et.style.borderRightWidth=fe(O),et.style.borderRightStyle=it,et.style.margin="0 "+fe(-O/2);const as=Te-Oe;as&&(et.style.verticalAlign=fe(-as)),Tt.push(et)}else throw new l("Invalid separator type: "+Pe.separator);is++,Pe=$e[is]||{},Ie=!1}if(d>=k)continue;let We;(d>0||o.hskipBeforeAndAfter)&&(We=j.deflt(Pe.pregap,H),We!==0&&(ft=Q.makeSpan(["arraycolsep"],[]),ft.style.width=fe(We),Tt.push(ft)));let Ke=[];for(c=0;c<f;++c){const it=T[c],et=it[d];if(!et)continue;const as=it.pos-Oe;et.depth=it.depth,et.height=it.height,Ke.push({type:"elem",elem:et,shift:as})}Ke=Q.makeVList({positionType:"individualShift",children:Ke},i),Ke=Q.makeSpan(["col-align-"+(Pe.align||"c")],[Ke]),Tt.push(Ke),(d<k-1||o.hskipBeforeAndAfter)&&(We=j.deflt(Pe.postgap,H),We!==0&&(ft=Q.makeSpan(["arraycolsep"],[]),ft.style.width=fe(We),Tt.push(ft)))}if(T=Q.makeSpan(["mtable"],Tt),B.length>0){const Pe=Q.makeLineSpan("hline",i,O),Ie=Q.makeLineSpan("hdashline",i,O),We=[{type:"elem",elem:T,shift:0}];for(;B.length>0;){const Ke=B.pop(),it=Ke.pos-Oe;Ke.isDashed?We.push({type:"elem",elem:Ie,shift:it}):We.push({type:"elem",elem:Pe,shift:it})}T=Q.makeVList({positionType:"individualShift",children:We},i)}if(un.length===0)return Q.makeSpan(["mord"],[T],i);{let Pe=Q.makeVList({positionType:"individualShift",children:un},i);return Pe=Q.makeSpan(["tag"],[Pe],i),Q.makeFragment([T,Pe])}},Jx={c:"center ",l:"left ",r:"right "},Ds=function(o,i){const c=[],d=new oe.MathNode("mtd",[],["mtr-glue"]),f=new oe.MathNode("mtd",[],["mml-eqn-num"]);for(let H=0;H<o.body.length;H++){const K=o.body[H],ae=[];for(let ve=0;ve<K.length;ve++)ae.push(new oe.MathNode("mtd",[qe(K[ve],i)]));o.tags&&o.tags[H]&&(ae.unshift(d),ae.push(d),o.leqno?ae.unshift(f):ae.push(f)),c.push(new oe.MathNode("mtr",ae))}let v=new oe.MathNode("mtable",c);const k=o.arraystretch===.5?.1:.16+o.arraystretch-1+(o.addJot?.09:0);v.setAttribute("rowspacing",fe(k));let T="",B="";if(o.cols&&o.cols.length>0){const H=o.cols;let K="",ae=!1,ve=0,we=H.length;H[0].type==="separator"&&(T+="top ",ve=1),H[H.length-1].type==="separator"&&(T+="bottom ",we-=1);for(let Be=ve;Be<we;Be++)H[Be].type==="align"?(B+=Jx[H[Be].align],ae&&(K+="none "),ae=!0):H[Be].type==="separator"&&ae&&(K+=H[Be].separator==="|"?"solid ":"dashed ",ae=!1);v.setAttribute("columnalign",B.trim()),/[sd]/.test(K)&&v.setAttribute("columnlines",K.trim())}if(o.colSeparationType==="align"){const H=o.cols||[];let K="";for(let ae=1;ae<H.length;ae++)K+=ae%2?"0em ":"1em ";v.setAttribute("columnspacing",K.trim())}else o.colSeparationType==="alignat"||o.colSeparationType==="gather"?v.setAttribute("columnspacing","0em"):o.colSeparationType==="small"?v.setAttribute("columnspacing","0.2778em"):o.colSeparationType==="CD"?v.setAttribute("columnspacing","0.5em"):v.setAttribute("columnspacing","1em");let O="";const R=o.hLinesBeforeRow;T+=R[0].length>0?"left ":"",T+=R[R.length-1].length>0?"right ":"";for(let H=1;H<R.length-1;H++)O+=R[H].length===0?"none ":R[H][0]?"dashed ":"solid ";return/[sd]/.test(O)&&v.setAttribute("rowlines",O.trim()),T!==""&&(v=new oe.MathNode("menclose",[v]),v.setAttribute("notation",T.trim())),o.arraystretch&&o.arraystretch<1&&(v=new oe.MathNode("mstyle",[v]),v.setAttribute("scriptlevel","1")),v},Td=function(o,i){o.envName.indexOf("ed")===-1&&Ea(o);const c=[],d=o.envName.indexOf("at")>-1?"alignat":"align",f=o.envName==="split",v=lr(o.parser,{cols:c,addJot:!0,autoTag:f?void 0:Ao(o.envName),emptySingleRow:!0,colSeparationType:d,maxNumCols:f?2:void 0,leqno:o.parser.settings.leqno},"display");let k,T=0;const B={type:"ordgroup",mode:o.mode,body:[]};if(i[0]&&i[0].type==="ordgroup"){let R="";for(let H=0;H<i[0].body.length;H++){const K=Ee(i[0].body[H],"textord");R+=K.text}k=Number(R),T=k*2}const O=!T;v.body.forEach(function(R){for(let H=1;H<R.length;H+=2){const K=Ee(R[H],"styling");Ee(K.body[0],"ordgroup").body.unshift(B)}if(O)T<R.length&&(T=R.length);else{const H=R.length/2;if(k<H)throw new l("Too many math in a row: "+("expected "+k+", but got "+H),R[0])}});for(let R=0;R<T;++R){let H="r",K=0;R%2===1?H="l":R>0&&O&&(K=1),c[R]={type:"align",align:H,pregap:K,postgap:0}}return v.colSeparationType=O?"align":"alignat",v};Es({type:"array",names:["array","darray"],props:{numArgs:1},handler(o,i){const f=(Na(i[0])?[i[0]]:Ee(i[0],"ordgroup").body).map(function(k){const B=bo(k).text;if("lcr".indexOf(B)!==-1)return{type:"align",align:B};if(B==="|")return{type:"separator",separator:"|"};if(B===":")return{type:"separator",separator:":"};throw new l("Unknown column alignment: "+B,k)}),v={cols:f,hskipBeforeAndAfter:!0,maxNumCols:f.length};return lr(o.parser,v,Bo(o.envName))},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(o){const i={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[o.envName.replace("*","")];let c="c";const d={hskipBeforeAndAfter:!1,cols:[{type:"align",align:c}]};if(o.envName.charAt(o.envName.length-1)==="*"){const k=o.parser;if(k.consumeSpaces(),k.fetch().text==="["){if(k.consume(),k.consumeSpaces(),c=k.fetch().text,"lcr".indexOf(c)===-1)throw new l("Expected l or c or r",k.nextToken);k.consume(),k.consumeSpaces(),k.expect("]"),k.consume(),d.cols=[{type:"align",align:c}]}}const f=lr(o.parser,d,Bo(o.envName)),v=Math.max(0,...f.body.map(k=>k.length));return f.cols=new Array(v).fill({type:"align",align:c}),i?{type:"leftright",mode:o.mode,body:[f],left:i[0],right:i[1],rightColor:void 0}:f},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(o){const i={arraystretch:.5},c=lr(o.parser,i,"script");return c.colSeparationType="small",c},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["subarray"],props:{numArgs:1},handler(o,i){const f=(Na(i[0])?[i[0]]:Ee(i[0],"ordgroup").body).map(function(k){const B=bo(k).text;if("lc".indexOf(B)!==-1)return{type:"align",align:B};throw new l("Unknown column alignment: "+B,k)});if(f.length>1)throw new l("{subarray} can contain only one column");let v={cols:f,hskipBeforeAndAfter:!1,arraystretch:.5};if(v=lr(o.parser,v,"script"),v.body.length>0&&v.body[0].length>1)throw new l("{subarray} can contain only one column");return v},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(o){const i={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},c=lr(o.parser,i,Bo(o.envName));return{type:"leftright",mode:o.mode,body:[c],left:o.envName.indexOf("r")>-1?".":"\\{",right:o.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Td,htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(o){j.contains(["gather","gather*"],o.envName)&&Ea(o);const i={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Ao(o.envName),emptySingleRow:!0,leqno:o.parser.settings.leqno};return lr(o.parser,i,"display")},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Td,htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(o){Ea(o);const i={autoTag:Ao(o.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:o.parser.settings.leqno};return lr(o.parser,i,"display")},htmlBuilder:Ts,mathmlBuilder:Ds}),Es({type:"array",names:["CD"],props:{numArgs:0},handler(o){return Ea(o),Lx(o.parser)},htmlBuilder:Ts,mathmlBuilder:Ds}),M("\\nonumber","\\gdef\\@eqnsw{0}"),M("\\notag","\\nonumber"),ge({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(o,i){throw new l(o.funcName+" valid only within array environment")}});var Dd=_d;ge({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(o,i){let{parser:c,funcName:d}=o;const f=i[0];if(f.type!=="ordgroup")throw new l("Invalid environment name",f);let v="";for(let k=0;k<f.body.length;++k)v+=Ee(f.body[k],"textord").text;if(d==="\\begin"){if(!Dd.hasOwnProperty(v))throw new l("No such environment: "+v,f);const k=Dd[v],{args:T,optArgs:B}=c.parseArguments("\\begin{"+v+"}",k),O={mode:c.mode,envName:v,parser:c},R=k.handler(O,T,B);c.expect("\\end",!1);const H=c.nextToken,K=Ee(c.parseFunction(),"environment");if(K.name!==v)throw new l("Mismatch: \\begin{"+v+"} matched by \\end{"+K.name+"}",H);return R}return{type:"environment",mode:c.mode,name:v,nameGroup:f}}});const Md=(o,i)=>{const c=o.font,d=i.withFont(c);return Fe(o.body,d)},Ad=(o,i)=>{const c=o.font,d=i.withFont(c);return qe(o.body,d)},Bd={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ge({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=wa(i[0]);let v=d;return v in Bd&&(v=Bd[v]),{type:"font",mode:c.mode,font:v.slice(1),body:f}},htmlBuilder:Md,mathmlBuilder:Ad}),ge({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(o,i)=>{let{parser:c}=o;const d=i[0],f=j.isCharacterBox(d);return{type:"mclass",mode:c.mode,mclass:Sa(d),body:[{type:"font",mode:c.mode,font:"boldsymbol",body:d}],isCharacterBox:f}}}),ge({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(o,i)=>{let{parser:c,funcName:d,breakOnTokenText:f}=o;const{mode:v}=c,k=c.parseExpression(!0,f),T="math"+d.slice(1);return{type:"font",mode:v,font:T,body:{type:"ordgroup",mode:c.mode,body:k}}},htmlBuilder:Md,mathmlBuilder:Ad});const zd=(o,i)=>{let c=i;return o==="display"?c=c.id>=ne.SCRIPT.id?c.text():ne.DISPLAY:o==="text"&&c.size===ne.DISPLAY.size?c=ne.TEXT:o==="script"?c=ne.SCRIPT:o==="scriptscript"&&(c=ne.SCRIPTSCRIPT),c},zo=(o,i)=>{const c=zd(o.size,i.style),d=c.fracNum(),f=c.fracDen();let v;v=i.havingStyle(d);const k=Fe(o.numer,v,i);if(o.continued){const ze=8.5/i.fontMetrics().ptPerEm,Oe=3.5/i.fontMetrics().ptPerEm;k.height=k.height<ze?ze:k.height,k.depth=k.depth<Oe?Oe:k.depth}v=i.havingStyle(f);const T=Fe(o.denom,v,i);let B,O,R;o.hasBarLine?(o.barSize?(O=Ye(o.barSize,i),B=Q.makeLineSpan("frac-line",i,O)):B=Q.makeLineSpan("frac-line",i),O=B.height,R=B.height):(B=null,O=0,R=i.fontMetrics().defaultRuleThickness);let H,K,ae;c.size===ne.DISPLAY.size||o.size==="display"?(H=i.fontMetrics().num1,O>0?K=3*R:K=7*R,ae=i.fontMetrics().denom1):(O>0?(H=i.fontMetrics().num2,K=R):(H=i.fontMetrics().num3,K=3*R),ae=i.fontMetrics().denom2);let ve;if(B){const ze=i.fontMetrics().axisHeight;H-k.depth-(ze+.5*O)<K&&(H+=K-(H-k.depth-(ze+.5*O))),ze-.5*O-(T.height-ae)<K&&(ae+=K-(ze-.5*O-(T.height-ae)));const Oe=-(ze-.5*O);ve=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:T,shift:ae},{type:"elem",elem:B,shift:Oe},{type:"elem",elem:k,shift:-H}]},i)}else{const ze=H-k.depth-(T.height-ae);ze<K&&(H+=.5*(K-ze),ae+=.5*(K-ze)),ve=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:T,shift:ae},{type:"elem",elem:k,shift:-H}]},i)}v=i.havingStyle(c),ve.height*=v.sizeMultiplier/i.sizeMultiplier,ve.depth*=v.sizeMultiplier/i.sizeMultiplier;let we;c.size===ne.DISPLAY.size?we=i.fontMetrics().delim1:c.size===ne.SCRIPTSCRIPT.size?we=i.havingStyle(ne.SCRIPT).fontMetrics().delim2:we=i.fontMetrics().delim2;let Be,Te;return o.leftDelim==null?Be=ri(i,["mopen"]):Be=Ws.customSizedDelim(o.leftDelim,we,!0,i.havingStyle(c),o.mode,["mopen"]),o.continued?Te=Q.makeSpan([]):o.rightDelim==null?Te=ri(i,["mclose"]):Te=Ws.customSizedDelim(o.rightDelim,we,!0,i.havingStyle(c),o.mode,["mclose"]),Q.makeSpan(["mord"].concat(v.sizingClasses(i)),[Be,Q.makeSpan(["mfrac"],[ve]),Te],i)},Fo=(o,i)=>{let c=new oe.MathNode("mfrac",[qe(o.numer,i),qe(o.denom,i)]);if(!o.hasBarLine)c.setAttribute("linethickness","0px");else if(o.barSize){const f=Ye(o.barSize,i);c.setAttribute("linethickness",fe(f))}const d=zd(o.size,i.style);if(d.size!==i.style.size){c=new oe.MathNode("mstyle",[c]);const f=d.size===ne.DISPLAY.size?"true":"false";c.setAttribute("displaystyle",f),c.setAttribute("scriptlevel","0")}if(o.leftDelim!=null||o.rightDelim!=null){const f=[];if(o.leftDelim!=null){const v=new oe.MathNode("mo",[new oe.TextNode(o.leftDelim.replace("\\",""))]);v.setAttribute("fence","true"),f.push(v)}if(f.push(c),o.rightDelim!=null){const v=new oe.MathNode("mo",[new oe.TextNode(o.rightDelim.replace("\\",""))]);v.setAttribute("fence","true"),f.push(v)}return yo(f)}return c};ge({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=i[0],v=i[1];let k,T=null,B=null,O="auto";switch(d){case"\\dfrac":case"\\frac":case"\\tfrac":k=!0;break;case"\\\\atopfrac":k=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":k=!1,T="(",B=")";break;case"\\\\bracefrac":k=!1,T="\\{",B="\\}";break;case"\\\\brackfrac":k=!1,T="[",B="]";break;default:throw new Error("Unrecognized genfrac command")}switch(d){case"\\dfrac":case"\\dbinom":O="display";break;case"\\tfrac":case"\\tbinom":O="text";break}return{type:"genfrac",mode:c.mode,continued:!1,numer:f,denom:v,hasBarLine:k,leftDelim:T,rightDelim:B,size:O,barSize:null}},htmlBuilder:zo,mathmlBuilder:Fo}),ge({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=i[0],v=i[1];return{type:"genfrac",mode:c.mode,continued:!0,numer:f,denom:v,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),ge({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(o){let{parser:i,funcName:c,token:d}=o,f;switch(c){case"\\over":f="\\frac";break;case"\\choose":f="\\binom";break;case"\\atop":f="\\\\atopfrac";break;case"\\brace":f="\\\\bracefrac";break;case"\\brack":f="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:i.mode,replaceWith:f,token:d}}});const Fd=["display","text","script","scriptscript"],Pd=function(o){let i=null;return o.length>0&&(i=o,i=i==="."?null:i),i};ge({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(o,i){let{parser:c}=o;const d=i[4],f=i[5],v=wa(i[0]),k=v.type==="atom"&&v.family==="open"?Pd(v.text):null,T=wa(i[1]),B=T.type==="atom"&&T.family==="close"?Pd(T.text):null,O=Ee(i[2],"size");let R,H=null;O.isBlank?R=!0:(H=O.value,R=H.number>0);let K="auto",ae=i[3];if(ae.type==="ordgroup"){if(ae.body.length>0){const ve=Ee(ae.body[0],"textord");K=Fd[Number(ve.text)]}}else ae=Ee(ae,"textord"),K=Fd[Number(ae.text)];return{type:"genfrac",mode:c.mode,numer:d,denom:f,continued:!1,hasBarLine:R,barSize:H,leftDelim:k,rightDelim:B,size:K}},htmlBuilder:zo,mathmlBuilder:Fo}),ge({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(o,i){let{parser:c,funcName:d,token:f}=o;return{type:"infix",mode:c.mode,replaceWith:"\\\\abovefrac",size:Ee(i[0],"size").value,token:f}}}),ge({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=i[0],v=D(Ee(i[1],"infix").size),k=i[2],T=v.number>0;return{type:"genfrac",mode:c.mode,numer:f,denom:k,continued:!1,hasBarLine:T,barSize:v,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:zo,mathmlBuilder:Fo});const Ld=(o,i)=>{const c=i.style;let d,f;o.type==="supsub"?(d=o.sup?Fe(o.sup,i.havingStyle(c.sup()),i):Fe(o.sub,i.havingStyle(c.sub()),i),f=Ee(o.base,"horizBrace")):f=Ee(o,"horizBrace");const v=Fe(f.base,i.havingBaseStyle(ne.DISPLAY)),k=Hs.svgSpan(f,i);let T;if(f.isOver?(T=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:v},{type:"kern",size:.1},{type:"elem",elem:k}]},i),T.children[0].children[0].children[1].classes.push("svg-align")):(T=Q.makeVList({positionType:"bottom",positionData:v.depth+.1+k.height,children:[{type:"elem",elem:k},{type:"kern",size:.1},{type:"elem",elem:v}]},i),T.children[0].children[0].children[0].classes.push("svg-align")),d){const B=Q.makeSpan(["mord",f.isOver?"mover":"munder"],[T],i);f.isOver?T=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:B},{type:"kern",size:.2},{type:"elem",elem:d}]},i):T=Q.makeVList({positionType:"bottom",positionData:B.depth+.2+d.height+d.depth,children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:B}]},i)}return Q.makeSpan(["mord",f.isOver?"mover":"munder"],[T],i)};ge({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(o,i){let{parser:c,funcName:d}=o;return{type:"horizBrace",mode:c.mode,label:d,isOver:/^\\over/.test(d),base:i[0]}},htmlBuilder:Ld,mathmlBuilder:(o,i)=>{const c=Hs.mathMLnode(o.label);return new oe.MathNode(o.isOver?"mover":"munder",[qe(o.base,i),c])}}),ge({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(o,i)=>{let{parser:c}=o;const d=i[1],f=Ee(i[0],"url").url;return c.settings.isTrusted({command:"\\href",url:f})?{type:"href",mode:c.mode,href:f,body:lt(d)}:c.formatUnsupportedCmd("\\href")},htmlBuilder:(o,i)=>{const c=mt(o.body,i,!1);return Q.makeAnchor(o.href,[],c,i)},mathmlBuilder:(o,i)=>{let c=ar(o.body,i);return c instanceof ss||(c=new ss("mrow",[c])),c.setAttribute("href",o.href),c}}),ge({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(o,i)=>{let{parser:c}=o;const d=Ee(i[0],"url").url;if(!c.settings.isTrusted({command:"\\url",url:d}))return c.formatUnsupportedCmd("\\url");const f=[];for(let k=0;k<d.length;k++){let T=d[k];T==="~"&&(T="\\textasciitilde"),f.push({type:"textord",mode:"text",text:T})}const v={type:"text",mode:c.mode,font:"\\texttt",body:f};return{type:"href",mode:c.mode,href:d,body:lt(v)}}}),ge({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(o,i){let{parser:c}=o;return{type:"hbox",mode:c.mode,body:lt(i[0])}},htmlBuilder(o,i){const c=mt(o.body,i,!1);return Q.makeFragment(c)},mathmlBuilder(o,i){return new oe.MathNode("mrow",Pt(o.body,i))}}),ge({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(o,i)=>{let{parser:c,funcName:d,token:f}=o;const v=Ee(i[0],"raw").string,k=i[1];c.settings.strict&&c.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");let T;const B={};switch(d){case"\\htmlClass":B.class=v,T={command:"\\htmlClass",class:v};break;case"\\htmlId":B.id=v,T={command:"\\htmlId",id:v};break;case"\\htmlStyle":B.style=v,T={command:"\\htmlStyle",style:v};break;case"\\htmlData":{const O=v.split(",");for(let R=0;R<O.length;R++){const H=O[R].split("=");if(H.length!==2)throw new l("Error parsing key-value for \\htmlData");B["data-"+H[0].trim()]=H[1].trim()}T={command:"\\htmlData",attributes:B};break}default:throw new Error("Unrecognized html command")}return c.settings.isTrusted(T)?{type:"html",mode:c.mode,attributes:B,body:lt(k)}:c.formatUnsupportedCmd(d)},htmlBuilder:(o,i)=>{const c=mt(o.body,i,!1),d=["enclosing"];o.attributes.class&&d.push(...o.attributes.class.trim().split(/\s+/));const f=Q.makeSpan(d,c,i);for(const v in o.attributes)v!=="class"&&o.attributes.hasOwnProperty(v)&&f.setAttribute(v,o.attributes[v]);return f},mathmlBuilder:(o,i)=>ar(o.body,i)}),ge({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(o,i)=>{let{parser:c}=o;return{type:"htmlmathml",mode:c.mode,html:lt(i[0]),mathml:lt(i[1])}},htmlBuilder:(o,i)=>{const c=mt(o.html,i,!1);return Q.makeFragment(c)},mathmlBuilder:(o,i)=>ar(o.mathml,i)});const Po=function(o){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(o))return{number:+o,unit:"bp"};{const i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(o);if(!i)throw new l("Invalid size: '"+o+"' in \\includegraphics");const c={number:+(i[1]+i[2]),unit:i[3]};if(!$u(c))throw new l("Invalid unit: '"+c.unit+"' in \\includegraphics.");return c}};ge({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(o,i,c)=>{let{parser:d}=o,f={number:0,unit:"em"},v={number:.9,unit:"em"},k={number:0,unit:"em"},T="";if(c[0]){const R=Ee(c[0],"raw").string.split(",");for(let H=0;H<R.length;H++){const K=R[H].split("=");if(K.length===2){const ae=K[1].trim();switch(K[0].trim()){case"alt":T=ae;break;case"width":f=Po(ae);break;case"height":v=Po(ae);break;case"totalheight":k=Po(ae);break;default:throw new l("Invalid key: '"+K[0]+"' in \\includegraphics.")}}}}const B=Ee(i[0],"url").url;return T===""&&(T=B,T=T.replace(/^.*[\\/]/,""),T=T.substring(0,T.lastIndexOf("."))),d.settings.isTrusted({command:"\\includegraphics",url:B})?{type:"includegraphics",mode:d.mode,alt:T,width:f,height:v,totalheight:k,src:B}:d.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(o,i)=>{const c=Ye(o.height,i);let d=0;o.totalheight.number>0&&(d=Ye(o.totalheight,i)-c);let f=0;o.width.number>0&&(f=Ye(o.width,i));const v={height:fe(c+d)};f>0&&(v.width=fe(f)),d>0&&(v.verticalAlign=fe(-d));const k=new sx(o.src,o.alt,v);return k.height=c,k.depth=d,k},mathmlBuilder:(o,i)=>{const c=new oe.MathNode("mglyph",[]);c.setAttribute("alt",o.alt);const d=Ye(o.height,i);let f=0;if(o.totalheight.number>0&&(f=Ye(o.totalheight,i)-d,c.setAttribute("valign",fe(-f))),c.setAttribute("height",fe(d+f)),o.width.number>0){const v=Ye(o.width,i);c.setAttribute("width",fe(v))}return c.setAttribute("src",o.src),c}}),ge({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(o,i){let{parser:c,funcName:d}=o;const f=Ee(i[0],"size");if(c.settings.strict){const v=d[1]==="m",k=f.value.unit==="mu";v?(k||c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+d+" supports only mu units, "+("not "+f.value.unit+" units")),c.mode!=="math"&&c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+d+" works only in math mode")):k&&c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+d+" doesn't support mu units")}return{type:"kern",mode:c.mode,dimension:f.value}},htmlBuilder(o,i){return Q.makeGlue(o.dimension,i)},mathmlBuilder(o,i){const c=Ye(o.dimension,i);return new oe.SpaceNode(c)}}),ge({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=i[0];return{type:"lap",mode:c.mode,alignment:d.slice(5),body:f}},htmlBuilder:(o,i)=>{let c;o.alignment==="clap"?(c=Q.makeSpan([],[Fe(o.body,i)]),c=Q.makeSpan(["inner"],[c],i)):c=Q.makeSpan(["inner"],[Fe(o.body,i)]);const d=Q.makeSpan(["fix"],[]);let f=Q.makeSpan([o.alignment],[c,d],i);const v=Q.makeSpan(["strut"]);return v.style.height=fe(f.height+f.depth),f.depth&&(v.style.verticalAlign=fe(-f.depth)),f.children.unshift(v),f=Q.makeSpan(["thinbox"],[f],i),Q.makeSpan(["mord","vbox"],[f],i)},mathmlBuilder:(o,i)=>{const c=new oe.MathNode("mpadded",[qe(o.body,i)]);if(o.alignment!=="rlap"){const d=o.alignment==="llap"?"-1":"-0.5";c.setAttribute("lspace",d+"width")}return c.setAttribute("width","0px"),c}}),ge({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,i){let{funcName:c,parser:d}=o;const f=d.mode;d.switchMode("math");const v=c==="\\("?"\\)":"$",k=d.parseExpression(!1,v);return d.expect(v),d.switchMode(f),{type:"styling",mode:d.mode,style:"text",body:k}}}),ge({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,i){throw new l("Mismatched "+o.funcName)}});const Od=(o,i)=>{switch(i.style.size){case ne.DISPLAY.size:return o.display;case ne.TEXT.size:return o.text;case ne.SCRIPT.size:return o.script;case ne.SCRIPTSCRIPT.size:return o.scriptscript;default:return o.text}};ge({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(o,i)=>{let{parser:c}=o;return{type:"mathchoice",mode:c.mode,display:lt(i[0]),text:lt(i[1]),script:lt(i[2]),scriptscript:lt(i[3])}},htmlBuilder:(o,i)=>{const c=Od(o,i),d=mt(c,i,!1);return Q.makeFragment(d)},mathmlBuilder:(o,i)=>{const c=Od(o,i);return ar(c,i)}});const Id=(o,i,c,d,f,v,k)=>{o=Q.makeSpan([],[o]);const T=c&&j.isCharacterBox(c);let B,O;if(i){const K=Fe(i,d.havingStyle(f.sup()),d);O={elem:K,kern:Math.max(d.fontMetrics().bigOpSpacing1,d.fontMetrics().bigOpSpacing3-K.depth)}}if(c){const K=Fe(c,d.havingStyle(f.sub()),d);B={elem:K,kern:Math.max(d.fontMetrics().bigOpSpacing2,d.fontMetrics().bigOpSpacing4-K.height)}}let R;if(O&&B){const K=d.fontMetrics().bigOpSpacing5+B.elem.height+B.elem.depth+B.kern+o.depth+k;R=Q.makeVList({positionType:"bottom",positionData:K,children:[{type:"kern",size:d.fontMetrics().bigOpSpacing5},{type:"elem",elem:B.elem,marginLeft:fe(-v)},{type:"kern",size:B.kern},{type:"elem",elem:o},{type:"kern",size:O.kern},{type:"elem",elem:O.elem,marginLeft:fe(v)},{type:"kern",size:d.fontMetrics().bigOpSpacing5}]},d)}else if(B){const K=o.height-k;R=Q.makeVList({positionType:"top",positionData:K,children:[{type:"kern",size:d.fontMetrics().bigOpSpacing5},{type:"elem",elem:B.elem,marginLeft:fe(-v)},{type:"kern",size:B.kern},{type:"elem",elem:o}]},d)}else if(O){const K=o.depth+k;R=Q.makeVList({positionType:"bottom",positionData:K,children:[{type:"elem",elem:o},{type:"kern",size:O.kern},{type:"elem",elem:O.elem,marginLeft:fe(v)},{type:"kern",size:d.fontMetrics().bigOpSpacing5}]},d)}else return o;const H=[R];if(B&&v!==0&&!T){const K=Q.makeSpan(["mspace"],[],d);K.style.marginRight=fe(v),H.unshift(K)}return Q.makeSpan(["mop","op-limits"],H,d)},Rd=["\\smallint"],cn=(o,i)=>{let c,d,f=!1,v;o.type==="supsub"?(c=o.sup,d=o.sub,v=Ee(o.base,"op"),f=!0):v=Ee(o,"op");const k=i.style;let T=!1;k.size===ne.DISPLAY.size&&v.symbol&&!j.contains(Rd,v.name)&&(T=!0);let B;if(v.symbol){const H=T?"Size2-Regular":"Size1-Regular";let K="";if((v.name==="\\oiint"||v.name==="\\oiiint")&&(K=v.name.slice(1),v.name=K==="oiint"?"\\iint":"\\iiint"),B=Q.makeSymbol(v.name,H,"math",i,["mop","op-symbol",T?"large-op":"small-op"]),K.length>0){const ae=B.italic,ve=Q.staticSvg(K+"Size"+(T?"2":"1"),i);B=Q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:B,shift:0},{type:"elem",elem:ve,shift:T?.08:0}]},i),v.name="\\"+K,B.classes.unshift("mop"),B.italic=ae}}else if(v.body){const H=mt(v.body,i,!0);H.length===1&&H[0]instanceof ts?(B=H[0],B.classes[0]="mop"):B=Q.makeSpan(["mop"],H,i)}else{const H=[];for(let K=1;K<v.name.length;K++)H.push(Q.mathsym(v.name[K],v.mode,i));B=Q.makeSpan(["mop"],H,i)}let O=0,R=0;return(B instanceof ts||v.name==="\\oiint"||v.name==="\\oiiint")&&!v.suppressBaseShift&&(O=(B.height-B.depth)/2-i.fontMetrics().axisHeight,R=B.italic),f?Id(B,c,d,i,k,R,O):(O&&(B.style.position="relative",B.style.top=fe(O)),B)},li=(o,i)=>{let c;if(o.symbol)c=new ss("mo",[rs(o.name,o.mode)]),j.contains(Rd,o.name)&&c.setAttribute("largeop","false");else if(o.body)c=new ss("mo",Pt(o.body,i));else{c=new ss("mi",[new ni(o.name.slice(1))]);const d=new ss("mo",[rs("⁡","text")]);o.parentIsSupSub?c=new ss("mrow",[c,d]):c=rd([c,d])}return c},Yx={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};ge({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(o,i)=>{let{parser:c,funcName:d}=o,f=d;return f.length===1&&(f=Yx[f]),{type:"op",mode:c.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:f}},htmlBuilder:cn,mathmlBuilder:li}),ge({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(o,i)=>{let{parser:c}=o;const d=i[0];return{type:"op",mode:c.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:lt(d)}},htmlBuilder:cn,mathmlBuilder:li});const Xx={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};ge({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(o){let{parser:i,funcName:c}=o;return{type:"op",mode:i.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:c}},htmlBuilder:cn,mathmlBuilder:li}),ge({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(o){let{parser:i,funcName:c}=o;return{type:"op",mode:i.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:c}},htmlBuilder:cn,mathmlBuilder:li}),ge({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(o){let{parser:i,funcName:c}=o,d=c;return d.length===1&&(d=Xx[d]),{type:"op",mode:i.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:d}},htmlBuilder:cn,mathmlBuilder:li});const qd=(o,i)=>{let c,d,f=!1,v;o.type==="supsub"?(c=o.sup,d=o.sub,v=Ee(o.base,"operatorname"),f=!0):v=Ee(o,"operatorname");let k;if(v.body.length>0){const T=v.body.map(O=>{const R=O.text;return typeof R=="string"?{type:"textord",mode:O.mode,text:R}:O}),B=mt(T,i.withFont("mathrm"),!0);for(let O=0;O<B.length;O++){const R=B[O];R instanceof ts&&(R.text=R.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}k=Q.makeSpan(["mop"],B,i)}else k=Q.makeSpan(["mop"],[],i);return f?Id(k,c,d,i,i.style,0,0):k};ge({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(o,i)=>{let{parser:c,funcName:d}=o;const f=i[0];return{type:"operatorname",mode:c.mode,body:lt(f),alwaysHandleSupSub:d==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:qd,mathmlBuilder:(o,i)=>{let c=Pt(o.body,i.withFont("mathrm")),d=!0;for(let k=0;k<c.length;k++){const T=c[k];if(!(T instanceof oe.SpaceNode))if(T instanceof oe.MathNode)switch(T.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const B=T.children[0];T.children.length===1&&B instanceof oe.TextNode?B.text=B.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):d=!1;break}default:d=!1}else d=!1}if(d){const k=c.map(T=>T.toText()).join("");c=[new oe.TextNode(k)]}const f=new oe.MathNode("mi",c);f.setAttribute("mathvariant","normal");const v=new oe.MathNode("mo",[rs("⁡","text")]);return o.parentIsSupSub?new oe.MathNode("mrow",[f,v]):oe.newDocumentFragment([f,v])}}),M("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Or({type:"ordgroup",htmlBuilder(o,i){return o.semisimple?Q.makeFragment(mt(o.body,i,!1)):Q.makeSpan(["mord"],mt(o.body,i,!0),i)},mathmlBuilder(o,i){return ar(o.body,i,!0)}}),ge({type:"overline",names:["\\overline"],props:{numArgs:1},handler(o,i){let{parser:c}=o;const d=i[0];return{type:"overline",mode:c.mode,body:d}},htmlBuilder(o,i){const c=Fe(o.body,i.havingCrampedStyle()),d=Q.makeLineSpan("overline-line",i),f=i.fontMetrics().defaultRuleThickness,v=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:3*f},{type:"elem",elem:d},{type:"kern",size:f}]},i);return Q.makeSpan(["mord","overline"],[v],i)},mathmlBuilder(o,i){const c=new oe.MathNode("mo",[new oe.TextNode("‾")]);c.setAttribute("stretchy","true");const d=new oe.MathNode("mover",[qe(o.body,i),c]);return d.setAttribute("accent","true"),d}}),ge({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(o,i)=>{let{parser:c}=o;const d=i[0];return{type:"phantom",mode:c.mode,body:lt(d)}},htmlBuilder:(o,i)=>{const c=mt(o.body,i.withPhantom(),!1);return Q.makeFragment(c)},mathmlBuilder:(o,i)=>{const c=Pt(o.body,i);return new oe.MathNode("mphantom",c)}}),ge({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,i)=>{let{parser:c}=o;const d=i[0];return{type:"hphantom",mode:c.mode,body:d}},htmlBuilder:(o,i)=>{let c=Q.makeSpan([],[Fe(o.body,i.withPhantom())]);if(c.height=0,c.depth=0,c.children)for(let d=0;d<c.children.length;d++)c.children[d].height=0,c.children[d].depth=0;return c=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c}]},i),Q.makeSpan(["mord"],[c],i)},mathmlBuilder:(o,i)=>{const c=Pt(lt(o.body),i),d=new oe.MathNode("mphantom",c),f=new oe.MathNode("mpadded",[d]);return f.setAttribute("height","0px"),f.setAttribute("depth","0px"),f}}),ge({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,i)=>{let{parser:c}=o;const d=i[0];return{type:"vphantom",mode:c.mode,body:d}},htmlBuilder:(o,i)=>{const c=Q.makeSpan(["inner"],[Fe(o.body,i.withPhantom())]),d=Q.makeSpan(["fix"],[]);return Q.makeSpan(["mord","rlap"],[c,d],i)},mathmlBuilder:(o,i)=>{const c=Pt(lt(o.body),i),d=new oe.MathNode("mphantom",c),f=new oe.MathNode("mpadded",[d]);return f.setAttribute("width","0px"),f}}),ge({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(o,i){let{parser:c}=o;const d=Ee(i[0],"size").value,f=i[1];return{type:"raisebox",mode:c.mode,dy:d,body:f}},htmlBuilder(o,i){const c=Fe(o.body,i),d=Ye(o.dy,i);return Q.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:c}]},i)},mathmlBuilder(o,i){const c=new oe.MathNode("mpadded",[qe(o.body,i)]),d=o.dy.number+o.dy.unit;return c.setAttribute("voffset",d),c}}),ge({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(o){let{parser:i}=o;return{type:"internal",mode:i.mode}}}),ge({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(o,i,c){let{parser:d}=o;const f=c[0],v=Ee(i[0],"size"),k=Ee(i[1],"size");return{type:"rule",mode:d.mode,shift:f&&Ee(f,"size").value,width:v.value,height:k.value}},htmlBuilder(o,i){const c=Q.makeSpan(["mord","rule"],[],i),d=Ye(o.width,i),f=Ye(o.height,i),v=o.shift?Ye(o.shift,i):0;return c.style.borderRightWidth=fe(d),c.style.borderTopWidth=fe(f),c.style.bottom=fe(v),c.width=d,c.height=f+v,c.depth=-v,c.maxFontSize=f*1.125*i.sizeMultiplier,c},mathmlBuilder(o,i){const c=Ye(o.width,i),d=Ye(o.height,i),f=o.shift?Ye(o.shift,i):0,v=i.color&&i.getColor()||"black",k=new oe.MathNode("mspace");k.setAttribute("mathbackground",v),k.setAttribute("width",fe(c)),k.setAttribute("height",fe(d));const T=new oe.MathNode("mpadded",[k]);return f>=0?T.setAttribute("height",fe(f)):(T.setAttribute("height",fe(f)),T.setAttribute("depth",fe(-f))),T.setAttribute("voffset",fe(f)),T}});function $d(o,i,c){const d=mt(o,i,!1),f=i.sizeMultiplier/c.sizeMultiplier;for(let v=0;v<d.length;v++){const k=d[v].classes.indexOf("sizing");k<0?Array.prototype.push.apply(d[v].classes,i.sizingClasses(c)):d[v].classes[k+1]==="reset-size"+i.size&&(d[v].classes[k+1]="reset-size"+c.size),d[v].height*=f,d[v].depth*=f}return Q.makeFragment(d)}const Ud=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];ge({type:"sizing",names:Ud,props:{numArgs:0,allowedInText:!0},handler:(o,i)=>{let{breakOnTokenText:c,funcName:d,parser:f}=o;const v=f.parseExpression(!1,c);return{type:"sizing",mode:f.mode,size:Ud.indexOf(d)+1,body:v}},htmlBuilder:(o,i)=>{const c=i.havingSize(o.size);return $d(o.body,c,i)},mathmlBuilder:(o,i)=>{const c=i.havingSize(o.size),d=Pt(o.body,c),f=new oe.MathNode("mstyle",d);return f.setAttribute("mathsize",fe(c.sizeMultiplier)),f}}),ge({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(o,i,c)=>{let{parser:d}=o,f=!1,v=!1;const k=c[0]&&Ee(c[0],"ordgroup");if(k){let B="";for(let O=0;O<k.body.length;++O)if(B=k.body[O].text,B==="t")f=!0;else if(B==="b")v=!0;else{f=!1,v=!1;break}}else f=!0,v=!0;const T=i[0];return{type:"smash",mode:d.mode,body:T,smashHeight:f,smashDepth:v}},htmlBuilder:(o,i)=>{const c=Q.makeSpan([],[Fe(o.body,i)]);if(!o.smashHeight&&!o.smashDepth)return c;if(o.smashHeight&&(c.height=0,c.children))for(let f=0;f<c.children.length;f++)c.children[f].height=0;if(o.smashDepth&&(c.depth=0,c.children))for(let f=0;f<c.children.length;f++)c.children[f].depth=0;const d=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c}]},i);return Q.makeSpan(["mord"],[d],i)},mathmlBuilder:(o,i)=>{const c=new oe.MathNode("mpadded",[qe(o.body,i)]);return o.smashHeight&&c.setAttribute("height","0px"),o.smashDepth&&c.setAttribute("depth","0px"),c}}),ge({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(o,i,c){let{parser:d}=o;const f=c[0],v=i[0];return{type:"sqrt",mode:d.mode,body:v,index:f}},htmlBuilder(o,i){let c=Fe(o.body,i.havingCrampedStyle());c.height===0&&(c.height=i.fontMetrics().xHeight),c=Q.wrapFragment(c,i);const f=i.fontMetrics().defaultRuleThickness;let v=f;i.style.id<ne.TEXT.id&&(v=i.fontMetrics().xHeight);let k=f+v/4;const T=c.height+c.depth+k+f,{span:B,ruleWidth:O,advanceWidth:R}=Ws.sqrtImage(T,i),H=B.height-O;H>c.height+c.depth+k&&(k=(k+H-c.height-c.depth)/2);const K=B.height-c.height-k-O;c.style.paddingLeft=fe(R);const ae=Q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c,wrapperClasses:["svg-align"]},{type:"kern",size:-(c.height+K)},{type:"elem",elem:B},{type:"kern",size:O}]},i);if(o.index){const ve=i.havingStyle(ne.SCRIPTSCRIPT),we=Fe(o.index,ve,i),Be=.6*(ae.height-ae.depth),Te=Q.makeVList({positionType:"shift",positionData:-Be,children:[{type:"elem",elem:we}]},i),ze=Q.makeSpan(["root"],[Te]);return Q.makeSpan(["mord","sqrt"],[ze,ae],i)}else return Q.makeSpan(["mord","sqrt"],[ae],i)},mathmlBuilder(o,i){const{body:c,index:d}=o;return d?new oe.MathNode("mroot",[qe(c,i),qe(d,i)]):new oe.MathNode("msqrt",[qe(c,i)])}});const Hd={display:ne.DISPLAY,text:ne.TEXT,script:ne.SCRIPT,scriptscript:ne.SCRIPTSCRIPT};ge({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o,i){let{breakOnTokenText:c,funcName:d,parser:f}=o;const v=f.parseExpression(!0,c),k=d.slice(1,d.length-5);return{type:"styling",mode:f.mode,style:k,body:v}},htmlBuilder(o,i){const c=Hd[o.style],d=i.havingStyle(c).withFont("");return $d(o.body,d,i)},mathmlBuilder(o,i){const c=Hd[o.style],d=i.havingStyle(c),f=Pt(o.body,d),v=new oe.MathNode("mstyle",f),T={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[o.style];return v.setAttribute("scriptlevel",T[0]),v.setAttribute("displaystyle",T[1]),v}});const Zx=function(o,i){const c=o.base;return c?c.type==="op"?c.limits&&(i.style.size===ne.DISPLAY.size||c.alwaysHandleSupSub)?cn:null:c.type==="operatorname"?c.alwaysHandleSupSub&&(i.style.size===ne.DISPLAY.size||c.limits)?qd:null:c.type==="accent"?j.isCharacterBox(c.base)?wo:null:c.type==="horizBrace"&&!o.sub===c.isOver?Ld:null:null};Or({type:"supsub",htmlBuilder(o,i){const c=Zx(o,i);if(c)return c(o,i);const{base:d,sup:f,sub:v}=o,k=Fe(d,i);let T,B;const O=i.fontMetrics();let R=0,H=0;const K=d&&j.isCharacterBox(d);if(f){const Oe=i.havingStyle(i.style.sup());T=Fe(f,Oe,i),K||(R=k.height-Oe.fontMetrics().supDrop*Oe.sizeMultiplier/i.sizeMultiplier)}if(v){const Oe=i.havingStyle(i.style.sub());B=Fe(v,Oe,i),K||(H=k.depth+Oe.fontMetrics().subDrop*Oe.sizeMultiplier/i.sizeMultiplier)}let ae;i.style===ne.DISPLAY?ae=O.sup1:i.style.cramped?ae=O.sup3:ae=O.sup2;const ve=i.sizeMultiplier,we=fe(.5/O.ptPerEm/ve);let Be=null;if(B){const Oe=o.base&&o.base.type==="op"&&o.base.name&&(o.base.name==="\\oiint"||o.base.name==="\\oiiint");(k instanceof ts||Oe)&&(Be=fe(-k.italic))}let Te;if(T&&B){R=Math.max(R,ae,T.depth+.25*O.xHeight),H=Math.max(H,O.sub2);const $e=4*O.defaultRuleThickness;if(R-T.depth-(B.height-H)<$e){H=$e-(R-T.depth)+B.height;const ft=.8*O.xHeight-(R-T.depth);ft>0&&(R+=ft,H-=ft)}const Tt=[{type:"elem",elem:B,shift:H,marginRight:we,marginLeft:Be},{type:"elem",elem:T,shift:-R,marginRight:we}];Te=Q.makeVList({positionType:"individualShift",children:Tt},i)}else if(B){H=Math.max(H,O.sub1,B.height-.8*O.xHeight);const Oe=[{type:"elem",elem:B,marginLeft:Be,marginRight:we}];Te=Q.makeVList({positionType:"shift",positionData:H,children:Oe},i)}else if(T)R=Math.max(R,ae,T.depth+.25*O.xHeight),Te=Q.makeVList({positionType:"shift",positionData:-R,children:[{type:"elem",elem:T,marginRight:we}]},i);else throw new Error("supsub must have either sup or sub.");const ze=xo(k,"right")||"mord";return Q.makeSpan([ze],[k,Q.makeSpan(["msupsub"],[Te])],i)},mathmlBuilder(o,i){let c=!1,d,f;o.base&&o.base.type==="horizBrace"&&(f=!!o.sup,f===o.base.isOver&&(c=!0,d=o.base.isOver)),o.base&&(o.base.type==="op"||o.base.type==="operatorname")&&(o.base.parentIsSupSub=!0);const v=[qe(o.base,i)];o.sub&&v.push(qe(o.sub,i)),o.sup&&v.push(qe(o.sup,i));let k;if(c)k=d?"mover":"munder";else if(o.sub)if(o.sup){const T=o.base;T&&T.type==="op"&&T.limits&&i.style===ne.DISPLAY||T&&T.type==="operatorname"&&T.alwaysHandleSupSub&&(i.style===ne.DISPLAY||T.limits)?k="munderover":k="msubsup"}else{const T=o.base;T&&T.type==="op"&&T.limits&&(i.style===ne.DISPLAY||T.alwaysHandleSupSub)||T&&T.type==="operatorname"&&T.alwaysHandleSupSub&&(T.limits||i.style===ne.DISPLAY)?k="munder":k="msub"}else{const T=o.base;T&&T.type==="op"&&T.limits&&(i.style===ne.DISPLAY||T.alwaysHandleSupSub)||T&&T.type==="operatorname"&&T.alwaysHandleSupSub&&(T.limits||i.style===ne.DISPLAY)?k="mover":k="msup"}return new oe.MathNode(k,v)}}),Or({type:"atom",htmlBuilder(o,i){return Q.mathsym(o.text,o.mode,i,["m"+o.family])},mathmlBuilder(o,i){const c=new oe.MathNode("mo",[rs(o.text,o.mode)]);if(o.family==="bin"){const d=vo(o,i);d==="bold-italic"&&c.setAttribute("mathvariant",d)}else o.family==="punct"?c.setAttribute("separator","true"):(o.family==="open"||o.family==="close")&&c.setAttribute("stretchy","false");return c}});const Wd={mi:"italic",mn:"normal",mtext:"normal"};Or({type:"mathord",htmlBuilder(o,i){return Q.makeOrd(o,i,"mathord")},mathmlBuilder(o,i){const c=new oe.MathNode("mi",[rs(o.text,o.mode,i)]),d=vo(o,i)||"italic";return d!==Wd[c.type]&&c.setAttribute("mathvariant",d),c}}),Or({type:"textord",htmlBuilder(o,i){return Q.makeOrd(o,i,"textord")},mathmlBuilder(o,i){const c=rs(o.text,o.mode,i),d=vo(o,i)||"normal";let f;return o.mode==="text"?f=new oe.MathNode("mtext",[c]):/[0-9]/.test(o.text)?f=new oe.MathNode("mn",[c]):o.text==="\\prime"?f=new oe.MathNode("mo",[c]):f=new oe.MathNode("mi",[c]),d!==Wd[f.type]&&f.setAttribute("mathvariant",d),f}});const Lo={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Oo={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Or({type:"spacing",htmlBuilder(o,i){if(Oo.hasOwnProperty(o.text)){const c=Oo[o.text].className||"";if(o.mode==="text"){const d=Q.makeOrd(o,i,"textord");return d.classes.push(c),d}else return Q.makeSpan(["mspace",c],[Q.mathsym(o.text,o.mode,i)],i)}else{if(Lo.hasOwnProperty(o.text))return Q.makeSpan(["mspace",Lo[o.text]],[],i);throw new l('Unknown type of space "'+o.text+'"')}},mathmlBuilder(o,i){let c;if(Oo.hasOwnProperty(o.text))c=new oe.MathNode("mtext",[new oe.TextNode(" ")]);else{if(Lo.hasOwnProperty(o.text))return new oe.MathNode("mspace");throw new l('Unknown type of space "'+o.text+'"')}return c}});const Vd=()=>{const o=new oe.MathNode("mtd",[]);return o.setAttribute("width","50%"),o};Or({type:"tag",mathmlBuilder(o,i){const c=new oe.MathNode("mtable",[new oe.MathNode("mtr",[Vd(),new oe.MathNode("mtd",[ar(o.body,i)]),Vd(),new oe.MathNode("mtd",[ar(o.tag,i)])])]);return c.setAttribute("width","100%"),c}});const Gd={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Qd={"\\textbf":"textbf","\\textmd":"textmd"},eg={"\\textit":"textit","\\textup":"textup"},Kd=(o,i)=>{const c=o.font;if(c){if(Gd[c])return i.withTextFontFamily(Gd[c]);if(Qd[c])return i.withTextFontWeight(Qd[c]);if(c==="\\emph")return i.fontShape==="textit"?i.withTextFontShape("textup"):i.withTextFontShape("textit")}else return i;return i.withTextFontShape(eg[c])};ge({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(o,i){let{parser:c,funcName:d}=o;const f=i[0];return{type:"text",mode:c.mode,body:lt(f),font:d}},htmlBuilder(o,i){const c=Kd(o,i),d=mt(o.body,c,!0);return Q.makeSpan(["mord","text"],d,c)},mathmlBuilder(o,i){const c=Kd(o,i);return ar(o.body,c)}}),ge({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(o,i){let{parser:c}=o;return{type:"underline",mode:c.mode,body:i[0]}},htmlBuilder(o,i){const c=Fe(o.body,i),d=Q.makeLineSpan("underline-line",i),f=i.fontMetrics().defaultRuleThickness,v=Q.makeVList({positionType:"top",positionData:c.height,children:[{type:"kern",size:f},{type:"elem",elem:d},{type:"kern",size:3*f},{type:"elem",elem:c}]},i);return Q.makeSpan(["mord","underline"],[v],i)},mathmlBuilder(o,i){const c=new oe.MathNode("mo",[new oe.TextNode("‾")]);c.setAttribute("stretchy","true");const d=new oe.MathNode("munder",[qe(o.body,i),c]);return d.setAttribute("accentunder","true"),d}}),ge({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(o,i){let{parser:c}=o;return{type:"vcenter",mode:c.mode,body:i[0]}},htmlBuilder(o,i){const c=Fe(o.body,i),d=i.fontMetrics().axisHeight,f=.5*(c.height-d-(c.depth+d));return Q.makeVList({positionType:"shift",positionData:f,children:[{type:"elem",elem:c}]},i)},mathmlBuilder(o,i){return new oe.MathNode("mpadded",[qe(o.body,i)],["vcenter"])}}),ge({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(o,i,c){throw new l("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(o,i){const c=Jd(o),d=[],f=i.havingStyle(i.style.text());for(let v=0;v<c.length;v++){let k=c[v];k==="~"&&(k="\\textasciitilde"),d.push(Q.makeSymbol(k,"Typewriter-Regular",o.mode,f,["mord","texttt"]))}return Q.makeSpan(["mord","text"].concat(f.sizingClasses(i)),Q.tryCombineChars(d),f)},mathmlBuilder(o,i){const c=new oe.TextNode(Jd(o)),d=new oe.MathNode("mtext",[c]);return d.setAttribute("mathvariant","monospace"),d}});const Jd=o=>o.body.replace(/ /g,o.star?"␣":" ");var or=td;const Yd=`[ \r
	]`,tg="\\\\[a-zA-Z@]+",sg="\\\\[^\uD800-\uDFFF]",rg="("+tg+")"+Yd+"*",ng=`\\\\(
|[ \r	]+
?)[ \r	]*`,Io="[̀-ͯ]",ig=new RegExp(Io+"+$"),ag="("+Yd+"+)|"+(ng+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(Io+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Io+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+rg)+("|"+sg+")");class Xd{constructor(i,c){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=i,this.settings=c,this.tokenRegex=new RegExp(ag,"g"),this.catcodes={"%":14,"~":13}}setCatcode(i,c){this.catcodes[i]=c}lex(){const i=this.input,c=this.tokenRegex.lastIndex;if(c===i.length)return new ns("EOF",new Vt(this,c,c));const d=this.tokenRegex.exec(i);if(d===null||d.index!==c)throw new l("Unexpected character: '"+i[c]+"'",new ns(i[c],new Vt(this,c,c+1)));const f=d[6]||d[3]||(d[2]?"\\ ":" ");if(this.catcodes[f]===14){const v=i.indexOf(`
`,this.tokenRegex.lastIndex);return v===-1?(this.tokenRegex.lastIndex=i.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=v+1,this.lex()}return new ns(f,new Vt(this,c,this.tokenRegex.lastIndex))}}class lg{constructor(i,c){i===void 0&&(i={}),c===void 0&&(c={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=c,this.builtins=i,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new l("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const i=this.undefStack.pop();for(const c in i)i.hasOwnProperty(c)&&(i[c]==null?delete this.current[c]:this.current[c]=i[c])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(i){return this.current.hasOwnProperty(i)||this.builtins.hasOwnProperty(i)}get(i){return this.current.hasOwnProperty(i)?this.current[i]:this.builtins[i]}set(i,c,d){if(d===void 0&&(d=!1),d){for(let f=0;f<this.undefStack.length;f++)delete this.undefStack[f][i];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][i]=c)}else{const f=this.undefStack[this.undefStack.length-1];f&&!f.hasOwnProperty(i)&&(f[i]=this.current[i])}c==null?delete this.current[i]:this.current[i]=c}}var og=Cd;M("\\noexpand",function(o){const i=o.popToken();return o.isExpandable(i.text)&&(i.noexpand=!0,i.treatAsRelax=!0),{tokens:[i],numArgs:0}}),M("\\expandafter",function(o){const i=o.popToken();return o.expandOnce(!0),{tokens:[i],numArgs:0}}),M("\\@firstoftwo",function(o){return{tokens:o.consumeArgs(2)[0],numArgs:0}}),M("\\@secondoftwo",function(o){return{tokens:o.consumeArgs(2)[1],numArgs:0}}),M("\\@ifnextchar",function(o){const i=o.consumeArgs(3);o.consumeSpaces();const c=o.future();return i[0].length===1&&i[0][0].text===c.text?{tokens:i[1],numArgs:0}:{tokens:i[2],numArgs:0}}),M("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),M("\\TextOrMath",function(o){const i=o.consumeArgs(2);return o.mode==="text"?{tokens:i[0],numArgs:0}:{tokens:i[1],numArgs:0}});const Zd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};M("\\char",function(o){let i=o.popToken(),c,d="";if(i.text==="'")c=8,i=o.popToken();else if(i.text==='"')c=16,i=o.popToken();else if(i.text==="`")if(i=o.popToken(),i.text[0]==="\\")d=i.text.charCodeAt(1);else{if(i.text==="EOF")throw new l("\\char` missing argument");d=i.text.charCodeAt(0)}else c=10;if(c){if(d=Zd[i.text],d==null||d>=c)throw new l("Invalid base-"+c+" digit "+i.text);let f;for(;(f=Zd[o.future().text])!=null&&f<c;)d*=c,d+=f,o.popToken()}return"\\@char{"+d+"}"});const Ro=(o,i,c)=>{let d=o.consumeArg().tokens;if(d.length!==1)throw new l("\\newcommand's first argument must be a macro name");const f=d[0].text,v=o.isDefined(f);if(v&&!i)throw new l("\\newcommand{"+f+"} attempting to redefine "+(f+"; use \\renewcommand"));if(!v&&!c)throw new l("\\renewcommand{"+f+"} when command "+f+" does not yet exist; use \\newcommand");let k=0;if(d=o.consumeArg().tokens,d.length===1&&d[0].text==="["){let T="",B=o.expandNextToken();for(;B.text!=="]"&&B.text!=="EOF";)T+=B.text,B=o.expandNextToken();if(!T.match(/^\s*[0-9]+\s*$/))throw new l("Invalid number of arguments: "+T);k=parseInt(T),d=o.consumeArg().tokens}return o.macros.set(f,{tokens:d,numArgs:k}),""};M("\\newcommand",o=>Ro(o,!1,!0)),M("\\renewcommand",o=>Ro(o,!0,!1)),M("\\providecommand",o=>Ro(o,!0,!0)),M("\\message",o=>{const i=o.consumeArgs(1)[0];return console.log(i.reverse().map(c=>c.text).join("")),""}),M("\\errmessage",o=>{const i=o.consumeArgs(1)[0];return console.error(i.reverse().map(c=>c.text).join("")),""}),M("\\show",o=>{const i=o.popToken(),c=i.text;return console.log(i,o.macros.get(c),or[c],Xe.math[c],Xe.text[c]),""}),M("\\bgroup","{"),M("\\egroup","}"),M("~","\\nobreakspace"),M("\\lq","`"),M("\\rq","'"),M("\\aa","\\r a"),M("\\AA","\\r A"),M("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),M("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),M("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),M("ℬ","\\mathscr{B}"),M("ℰ","\\mathscr{E}"),M("ℱ","\\mathscr{F}"),M("ℋ","\\mathscr{H}"),M("ℐ","\\mathscr{I}"),M("ℒ","\\mathscr{L}"),M("ℳ","\\mathscr{M}"),M("ℛ","\\mathscr{R}"),M("ℭ","\\mathfrak{C}"),M("ℌ","\\mathfrak{H}"),M("ℨ","\\mathfrak{Z}"),M("\\Bbbk","\\Bbb{k}"),M("·","\\cdotp"),M("\\llap","\\mathllap{\\textrm{#1}}"),M("\\rlap","\\mathrlap{\\textrm{#1}}"),M("\\clap","\\mathclap{\\textrm{#1}}"),M("\\mathstrut","\\vphantom{(}"),M("\\underbar","\\underline{\\text{#1}}"),M("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),M("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),M("\\ne","\\neq"),M("≠","\\neq"),M("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),M("∉","\\notin"),M("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),M("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),M("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),M("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),M("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),M("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),M("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),M("⟂","\\perp"),M("‼","\\mathclose{!\\mkern-0.8mu!}"),M("∌","\\notni"),M("⌜","\\ulcorner"),M("⌝","\\urcorner"),M("⌞","\\llcorner"),M("⌟","\\lrcorner"),M("©","\\copyright"),M("®","\\textregistered"),M("️","\\textregistered"),M("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),M("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),M("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),M("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),M("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),M("⋮","\\vdots"),M("\\varGamma","\\mathit{\\Gamma}"),M("\\varDelta","\\mathit{\\Delta}"),M("\\varTheta","\\mathit{\\Theta}"),M("\\varLambda","\\mathit{\\Lambda}"),M("\\varXi","\\mathit{\\Xi}"),M("\\varPi","\\mathit{\\Pi}"),M("\\varSigma","\\mathit{\\Sigma}"),M("\\varUpsilon","\\mathit{\\Upsilon}"),M("\\varPhi","\\mathit{\\Phi}"),M("\\varPsi","\\mathit{\\Psi}"),M("\\varOmega","\\mathit{\\Omega}"),M("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),M("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),M("\\boxed","\\fbox{$\\displaystyle{#1}$}"),M("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),M("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),M("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");const eh={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};M("\\dots",function(o){let i="\\dotso";const c=o.expandAfterFuture().text;return c in eh?i=eh[c]:(c.slice(0,4)==="\\not"||c in Xe.math&&j.contains(["bin","rel"],Xe.math[c].group))&&(i="\\dotsb"),i});const qo={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};M("\\dotso",function(o){return o.future().text in qo?"\\ldots\\,":"\\ldots"}),M("\\dotsc",function(o){const i=o.future().text;return i in qo&&i!==","?"\\ldots\\,":"\\ldots"}),M("\\cdots",function(o){return o.future().text in qo?"\\@cdots\\,":"\\@cdots"}),M("\\dotsb","\\cdots"),M("\\dotsm","\\cdots"),M("\\dotsi","\\!\\cdots"),M("\\dotsx","\\ldots\\,"),M("\\DOTSI","\\relax"),M("\\DOTSB","\\relax"),M("\\DOTSX","\\relax"),M("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),M("\\,","\\tmspace+{3mu}{.1667em}"),M("\\thinspace","\\,"),M("\\>","\\mskip{4mu}"),M("\\:","\\tmspace+{4mu}{.2222em}"),M("\\medspace","\\:"),M("\\;","\\tmspace+{5mu}{.2777em}"),M("\\thickspace","\\;"),M("\\!","\\tmspace-{3mu}{.1667em}"),M("\\negthinspace","\\!"),M("\\negmedspace","\\tmspace-{4mu}{.2222em}"),M("\\negthickspace","\\tmspace-{5mu}{.277em}"),M("\\enspace","\\kern.5em "),M("\\enskip","\\hskip.5em\\relax"),M("\\quad","\\hskip1em\\relax"),M("\\qquad","\\hskip2em\\relax"),M("\\tag","\\@ifstar\\tag@literal\\tag@paren"),M("\\tag@paren","\\tag@literal{({#1})}"),M("\\tag@literal",o=>{if(o.macros.get("\\df@tag"))throw new l("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),M("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),M("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),M("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),M("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),M("\\newline","\\\\\\relax"),M("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const th=fe(Cs["Main-Regular"][84][1]-.7*Cs["Main-Regular"][65][1]);M("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+th+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),M("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+th+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),M("\\hspace","\\@ifstar\\@hspacer\\@hspace"),M("\\@hspace","\\hskip #1\\relax"),M("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),M("\\ordinarycolon",":"),M("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),M("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),M("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),M("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),M("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),M("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),M("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),M("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),M("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),M("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),M("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),M("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),M("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),M("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),M("∷","\\dblcolon"),M("∹","\\eqcolon"),M("≔","\\coloneqq"),M("≕","\\eqqcolon"),M("⩴","\\Coloneqq"),M("\\ratio","\\vcentcolon"),M("\\coloncolon","\\dblcolon"),M("\\colonequals","\\coloneqq"),M("\\coloncolonequals","\\Coloneqq"),M("\\equalscolon","\\eqqcolon"),M("\\equalscoloncolon","\\Eqqcolon"),M("\\colonminus","\\coloneq"),M("\\coloncolonminus","\\Coloneq"),M("\\minuscolon","\\eqcolon"),M("\\minuscoloncolon","\\Eqcolon"),M("\\coloncolonapprox","\\Colonapprox"),M("\\coloncolonsim","\\Colonsim"),M("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),M("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),M("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),M("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),M("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),M("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),M("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),M("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),M("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),M("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),M("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),M("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),M("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),M("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),M("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),M("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),M("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),M("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),M("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),M("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),M("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),M("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),M("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),M("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),M("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),M("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),M("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),M("\\imath","\\html@mathml{\\@imath}{ı}"),M("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),M("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),M("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),M("⟦","\\llbracket"),M("⟧","\\rrbracket"),M("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),M("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),M("⦃","\\lBrace"),M("⦄","\\rBrace"),M("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),M("⦵","\\minuso"),M("\\darr","\\downarrow"),M("\\dArr","\\Downarrow"),M("\\Darr","\\Downarrow"),M("\\lang","\\langle"),M("\\rang","\\rangle"),M("\\uarr","\\uparrow"),M("\\uArr","\\Uparrow"),M("\\Uarr","\\Uparrow"),M("\\N","\\mathbb{N}"),M("\\R","\\mathbb{R}"),M("\\Z","\\mathbb{Z}"),M("\\alef","\\aleph"),M("\\alefsym","\\aleph"),M("\\Alpha","\\mathrm{A}"),M("\\Beta","\\mathrm{B}"),M("\\bull","\\bullet"),M("\\Chi","\\mathrm{X}"),M("\\clubs","\\clubsuit"),M("\\cnums","\\mathbb{C}"),M("\\Complex","\\mathbb{C}"),M("\\Dagger","\\ddagger"),M("\\diamonds","\\diamondsuit"),M("\\empty","\\emptyset"),M("\\Epsilon","\\mathrm{E}"),M("\\Eta","\\mathrm{H}"),M("\\exist","\\exists"),M("\\harr","\\leftrightarrow"),M("\\hArr","\\Leftrightarrow"),M("\\Harr","\\Leftrightarrow"),M("\\hearts","\\heartsuit"),M("\\image","\\Im"),M("\\infin","\\infty"),M("\\Iota","\\mathrm{I}"),M("\\isin","\\in"),M("\\Kappa","\\mathrm{K}"),M("\\larr","\\leftarrow"),M("\\lArr","\\Leftarrow"),M("\\Larr","\\Leftarrow"),M("\\lrarr","\\leftrightarrow"),M("\\lrArr","\\Leftrightarrow"),M("\\Lrarr","\\Leftrightarrow"),M("\\Mu","\\mathrm{M}"),M("\\natnums","\\mathbb{N}"),M("\\Nu","\\mathrm{N}"),M("\\Omicron","\\mathrm{O}"),M("\\plusmn","\\pm"),M("\\rarr","\\rightarrow"),M("\\rArr","\\Rightarrow"),M("\\Rarr","\\Rightarrow"),M("\\real","\\Re"),M("\\reals","\\mathbb{R}"),M("\\Reals","\\mathbb{R}"),M("\\Rho","\\mathrm{P}"),M("\\sdot","\\cdot"),M("\\sect","\\S"),M("\\spades","\\spadesuit"),M("\\sub","\\subset"),M("\\sube","\\subseteq"),M("\\supe","\\supseteq"),M("\\Tau","\\mathrm{T}"),M("\\thetasym","\\vartheta"),M("\\weierp","\\wp"),M("\\Zeta","\\mathrm{Z}"),M("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),M("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),M("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),M("\\bra","\\mathinner{\\langle{#1}|}"),M("\\ket","\\mathinner{|{#1}\\rangle}"),M("\\braket","\\mathinner{\\langle{#1}\\rangle}"),M("\\Bra","\\left\\langle#1\\right|"),M("\\Ket","\\left|#1\\right\\rangle");const sh=o=>i=>{const c=i.consumeArg().tokens,d=i.consumeArg().tokens,f=i.consumeArg().tokens,v=i.consumeArg().tokens,k=i.macros.get("|"),T=i.macros.get("\\|");i.macros.beginGroup();const B=H=>K=>{o&&(K.macros.set("|",k),f.length&&K.macros.set("\\|",T));let ae=H;return!H&&f.length&&K.future().text==="|"&&(K.popToken(),ae=!0),{tokens:ae?f:d,numArgs:0}};i.macros.set("|",B(!1)),f.length&&i.macros.set("\\|",B(!0));const O=i.consumeArg().tokens,R=i.expandTokens([...v,...O,...c]);return i.macros.endGroup(),{tokens:R.reverse(),numArgs:0}};M("\\bra@ket",sh(!1)),M("\\bra@set",sh(!0)),M("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),M("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),M("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),M("\\angln","{\\angl n}"),M("\\blue","\\textcolor{##6495ed}{#1}"),M("\\orange","\\textcolor{##ffa500}{#1}"),M("\\pink","\\textcolor{##ff00af}{#1}"),M("\\red","\\textcolor{##df0030}{#1}"),M("\\green","\\textcolor{##28ae7b}{#1}"),M("\\gray","\\textcolor{gray}{#1}"),M("\\purple","\\textcolor{##9d38bd}{#1}"),M("\\blueA","\\textcolor{##ccfaff}{#1}"),M("\\blueB","\\textcolor{##80f6ff}{#1}"),M("\\blueC","\\textcolor{##63d9ea}{#1}"),M("\\blueD","\\textcolor{##11accd}{#1}"),M("\\blueE","\\textcolor{##0c7f99}{#1}"),M("\\tealA","\\textcolor{##94fff5}{#1}"),M("\\tealB","\\textcolor{##26edd5}{#1}"),M("\\tealC","\\textcolor{##01d1c1}{#1}"),M("\\tealD","\\textcolor{##01a995}{#1}"),M("\\tealE","\\textcolor{##208170}{#1}"),M("\\greenA","\\textcolor{##b6ffb0}{#1}"),M("\\greenB","\\textcolor{##8af281}{#1}"),M("\\greenC","\\textcolor{##74cf70}{#1}"),M("\\greenD","\\textcolor{##1fab54}{#1}"),M("\\greenE","\\textcolor{##0d923f}{#1}"),M("\\goldA","\\textcolor{##ffd0a9}{#1}"),M("\\goldB","\\textcolor{##ffbb71}{#1}"),M("\\goldC","\\textcolor{##ff9c39}{#1}"),M("\\goldD","\\textcolor{##e07d10}{#1}"),M("\\goldE","\\textcolor{##a75a05}{#1}"),M("\\redA","\\textcolor{##fca9a9}{#1}"),M("\\redB","\\textcolor{##ff8482}{#1}"),M("\\redC","\\textcolor{##f9685d}{#1}"),M("\\redD","\\textcolor{##e84d39}{#1}"),M("\\redE","\\textcolor{##bc2612}{#1}"),M("\\maroonA","\\textcolor{##ffbde0}{#1}"),M("\\maroonB","\\textcolor{##ff92c6}{#1}"),M("\\maroonC","\\textcolor{##ed5fa6}{#1}"),M("\\maroonD","\\textcolor{##ca337c}{#1}"),M("\\maroonE","\\textcolor{##9e034e}{#1}"),M("\\purpleA","\\textcolor{##ddd7ff}{#1}"),M("\\purpleB","\\textcolor{##c6b9fc}{#1}"),M("\\purpleC","\\textcolor{##aa87ff}{#1}"),M("\\purpleD","\\textcolor{##7854ab}{#1}"),M("\\purpleE","\\textcolor{##543b78}{#1}"),M("\\mintA","\\textcolor{##f5f9e8}{#1}"),M("\\mintB","\\textcolor{##edf2df}{#1}"),M("\\mintC","\\textcolor{##e0e5cc}{#1}"),M("\\grayA","\\textcolor{##f6f7f7}{#1}"),M("\\grayB","\\textcolor{##f0f1f2}{#1}"),M("\\grayC","\\textcolor{##e3e5e6}{#1}"),M("\\grayD","\\textcolor{##d6d8da}{#1}"),M("\\grayE","\\textcolor{##babec2}{#1}"),M("\\grayF","\\textcolor{##888d93}{#1}"),M("\\grayG","\\textcolor{##626569}{#1}"),M("\\grayH","\\textcolor{##3b3e40}{#1}"),M("\\grayI","\\textcolor{##21242c}{#1}"),M("\\kaBlue","\\textcolor{##314453}{#1}"),M("\\kaGreen","\\textcolor{##71B307}{#1}");const rh={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class cg{constructor(i,c,d){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=c,this.expansionCount=0,this.feed(i),this.macros=new lg(og,c.macros),this.mode=d,this.stack=[]}feed(i){this.lexer=new Xd(i,this.settings)}switchMode(i){this.mode=i}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(i){this.stack.push(i)}pushTokens(i){this.stack.push(...i)}scanArgument(i){let c,d,f;if(i){if(this.consumeSpaces(),this.future().text!=="[")return null;c=this.popToken(),{tokens:f,end:d}=this.consumeArg(["]"])}else({tokens:f,start:c,end:d}=this.consumeArg());return this.pushToken(new ns("EOF",d.loc)),this.pushTokens(f),c.range(d,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(i){const c=[],d=i&&i.length>0;d||this.consumeSpaces();const f=this.future();let v,k=0,T=0;do{if(v=this.popToken(),c.push(v),v.text==="{")++k;else if(v.text==="}"){if(--k,k===-1)throw new l("Extra }",v)}else if(v.text==="EOF")throw new l("Unexpected end of input in a macro argument, expected '"+(i&&d?i[T]:"}")+"'",v);if(i&&d)if((k===0||k===1&&i[T]==="{")&&v.text===i[T]){if(++T,T===i.length){c.splice(-T,T);break}}else T=0}while(k!==0||d);return f.text==="{"&&c[c.length-1].text==="}"&&(c.pop(),c.shift()),c.reverse(),{tokens:c,start:f,end:v}}consumeArgs(i,c){if(c){if(c.length!==i+1)throw new l("The length of delimiters doesn't match the number of args!");const f=c[0];for(let v=0;v<f.length;v++){const k=this.popToken();if(f[v]!==k.text)throw new l("Use of the macro doesn't match its definition",k)}}const d=[];for(let f=0;f<i;f++)d.push(this.consumeArg(c&&c[f+1]).tokens);return d}countExpansion(i){if(this.expansionCount+=i,this.expansionCount>this.settings.maxExpand)throw new l("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(i){const c=this.popToken(),d=c.text,f=c.noexpand?null:this._getExpansion(d);if(f==null||i&&f.unexpandable){if(i&&f==null&&d[0]==="\\"&&!this.isDefined(d))throw new l("Undefined control sequence: "+d);return this.pushToken(c),!1}this.countExpansion(1);let v=f.tokens;const k=this.consumeArgs(f.numArgs,f.delimiters);if(f.numArgs){v=v.slice();for(let T=v.length-1;T>=0;--T){let B=v[T];if(B.text==="#"){if(T===0)throw new l("Incomplete placeholder at end of macro body",B);if(B=v[--T],B.text==="#")v.splice(T+1,1);else if(/^[1-9]$/.test(B.text))v.splice(T,2,...k[+B.text-1]);else throw new l("Not a valid argument number",B)}}}return this.pushTokens(v),v.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const i=this.stack.pop();return i.treatAsRelax&&(i.text="\\relax"),i}throw new Error}expandMacro(i){return this.macros.has(i)?this.expandTokens([new ns(i)]):void 0}expandTokens(i){const c=[],d=this.stack.length;for(this.pushTokens(i);this.stack.length>d;)if(this.expandOnce(!0)===!1){const f=this.stack.pop();f.treatAsRelax&&(f.noexpand=!1,f.treatAsRelax=!1),c.push(f)}return this.countExpansion(c.length),c}expandMacroAsText(i){const c=this.expandMacro(i);return c&&c.map(d=>d.text).join("")}_getExpansion(i){const c=this.macros.get(i);if(c==null)return c;if(i.length===1){const f=this.lexer.catcodes[i];if(f!=null&&f!==13)return}const d=typeof c=="function"?c(this):c;if(typeof d=="string"){let f=0;if(d.indexOf("#")!==-1){const O=d.replace(/##/g,"");for(;O.indexOf("#"+(f+1))!==-1;)++f}const v=new Xd(d,this.settings),k=[];let T=v.lex();for(;T.text!=="EOF";)k.push(T),T=v.lex();return k.reverse(),{tokens:k,numArgs:f}}return d}isDefined(i){return this.macros.has(i)||or.hasOwnProperty(i)||Xe.math.hasOwnProperty(i)||Xe.text.hasOwnProperty(i)||rh.hasOwnProperty(i)}isExpandable(i){const c=this.macros.get(i);return c!=null?typeof c=="string"||typeof c=="function"||!c.unexpandable:or.hasOwnProperty(i)&&!or[i].primitive}}const nh=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,Ta=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),$o={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},ih={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class Da{constructor(i,c){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new cg(i,c,this.mode),this.settings=c,this.leftrightDepth=0}expect(i,c){if(c===void 0&&(c=!0),this.fetch().text!==i)throw new l("Expected '"+i+"', got '"+this.fetch().text+"'",this.fetch());c&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(i){this.mode=i,this.gullet.switchMode(i)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const i=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),i}finally{this.gullet.endGroups()}}subparse(i){const c=this.nextToken;this.consume(),this.gullet.pushToken(new ns("}")),this.gullet.pushTokens(i);const d=this.parseExpression(!1);return this.expect("}"),this.nextToken=c,d}parseExpression(i,c){const d=[];for(;;){this.mode==="math"&&this.consumeSpaces();const f=this.fetch();if(Da.endOfExpression.indexOf(f.text)!==-1||c&&f.text===c||i&&or[f.text]&&or[f.text].infix)break;const v=this.parseAtom(c);if(v){if(v.type==="internal")continue}else break;d.push(v)}return this.mode==="text"&&this.formLigatures(d),this.handleInfixNodes(d)}handleInfixNodes(i){let c=-1,d;for(let f=0;f<i.length;f++)if(i[f].type==="infix"){if(c!==-1)throw new l("only one infix operator per group",i[f].token);c=f,d=i[f].replaceWith}if(c!==-1&&d){let f,v;const k=i.slice(0,c),T=i.slice(c+1);k.length===1&&k[0].type==="ordgroup"?f=k[0]:f={type:"ordgroup",mode:this.mode,body:k},T.length===1&&T[0].type==="ordgroup"?v=T[0]:v={type:"ordgroup",mode:this.mode,body:T};let B;return d==="\\\\abovefrac"?B=this.callFunction(d,[f,i[c],v],[]):B=this.callFunction(d,[f,v],[]),[B]}else return i}handleSupSubscript(i){const c=this.fetch(),d=c.text;this.consume(),this.consumeSpaces();const f=this.parseGroup(i);if(!f)throw new l("Expected group after '"+d+"'",c);return f}formatUnsupportedCmd(i){const c=[];for(let v=0;v<i.length;v++)c.push({type:"textord",mode:"text",text:i[v]});const d={type:"text",mode:this.mode,body:c};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[d]}}parseAtom(i){const c=this.parseGroup("atom",i);if(this.mode==="text")return c;let d,f;for(;;){this.consumeSpaces();const v=this.fetch();if(v.text==="\\limits"||v.text==="\\nolimits"){if(c&&c.type==="op"){const k=v.text==="\\limits";c.limits=k,c.alwaysHandleSupSub=!0}else if(c&&c.type==="operatorname")c.alwaysHandleSupSub&&(c.limits=v.text==="\\limits");else throw new l("Limit controls must follow a math operator",v);this.consume()}else if(v.text==="^"){if(d)throw new l("Double superscript",v);d=this.handleSupSubscript("superscript")}else if(v.text==="_"){if(f)throw new l("Double subscript",v);f=this.handleSupSubscript("subscript")}else if(v.text==="'"){if(d)throw new l("Double superscript",v);const k={type:"textord",mode:this.mode,text:"\\prime"},T=[k];for(this.consume();this.fetch().text==="'";)T.push(k),this.consume();this.fetch().text==="^"&&T.push(this.handleSupSubscript("superscript")),d={type:"ordgroup",mode:this.mode,body:T}}else if(Ta[v.text]){const k=nh.test(v.text),T=[];for(T.push(new ns(Ta[v.text])),this.consume();;){const O=this.fetch().text;if(!Ta[O]||nh.test(O)!==k)break;T.unshift(new ns(Ta[O])),this.consume()}const B=this.subparse(T);k?f={type:"ordgroup",mode:"math",body:B}:d={type:"ordgroup",mode:"math",body:B}}else break}return d||f?{type:"supsub",mode:this.mode,base:c,sup:d,sub:f}:c}parseFunction(i,c){const d=this.fetch(),f=d.text,v=or[f];if(!v)return null;if(this.consume(),c&&c!=="atom"&&!v.allowedInArgument)throw new l("Got function '"+f+"' with no arguments"+(c?" as "+c:""),d);if(this.mode==="text"&&!v.allowedInText)throw new l("Can't use function '"+f+"' in text mode",d);if(this.mode==="math"&&v.allowedInMath===!1)throw new l("Can't use function '"+f+"' in math mode",d);const{args:k,optArgs:T}=this.parseArguments(f,v);return this.callFunction(f,k,T,d,i)}callFunction(i,c,d,f,v){const k={funcName:i,parser:this,token:f,breakOnTokenText:v},T=or[i];if(T&&T.handler)return T.handler(k,c,d);throw new l("No function handler for "+i)}parseArguments(i,c){const d=c.numArgs+c.numOptionalArgs;if(d===0)return{args:[],optArgs:[]};const f=[],v=[];for(let k=0;k<d;k++){let T=c.argTypes&&c.argTypes[k];const B=k<c.numOptionalArgs;(c.primitive&&T==null||c.type==="sqrt"&&k===1&&v[0]==null)&&(T="primitive");const O=this.parseGroupOfType("argument to '"+i+"'",T,B);if(B)v.push(O);else if(O!=null)f.push(O);else throw new l("Null argument, please report this as a bug")}return{args:f,optArgs:v}}parseGroupOfType(i,c,d){switch(c){case"color":return this.parseColorGroup(d);case"size":return this.parseSizeGroup(d);case"url":return this.parseUrlGroup(d);case"math":case"text":return this.parseArgumentGroup(d,c);case"hbox":{const f=this.parseArgumentGroup(d,"text");return f!=null?{type:"styling",mode:f.mode,body:[f],style:"text"}:null}case"raw":{const f=this.parseStringGroup("raw",d);return f!=null?{type:"raw",mode:"text",string:f.text}:null}case"primitive":{if(d)throw new l("A primitive argument cannot be optional");const f=this.parseGroup(i);if(f==null)throw new l("Expected group as "+i,this.fetch());return f}case"original":case null:case void 0:return this.parseArgumentGroup(d);default:throw new l("Unknown group type as "+i,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(i,c){const d=this.gullet.scanArgument(c);if(d==null)return null;let f="",v;for(;(v=this.fetch()).text!=="EOF";)f+=v.text,this.consume();return this.consume(),d.text=f,d}parseRegexGroup(i,c){const d=this.fetch();let f=d,v="",k;for(;(k=this.fetch()).text!=="EOF"&&i.test(v+k.text);)f=k,v+=f.text,this.consume();if(v==="")throw new l("Invalid "+c+": '"+d.text+"'",d);return d.range(f,v)}parseColorGroup(i){const c=this.parseStringGroup("color",i);if(c==null)return null;const d=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(c.text);if(!d)throw new l("Invalid color: '"+c.text+"'",c);let f=d[0];return/^[0-9a-f]{6}$/i.test(f)&&(f="#"+f),{type:"color-token",mode:this.mode,color:f}}parseSizeGroup(i){let c,d=!1;if(this.gullet.consumeSpaces(),!i&&this.gullet.future().text!=="{"?c=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):c=this.parseStringGroup("size",i),!c)return null;!i&&c.text.length===0&&(c.text="0pt",d=!0);const f=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(c.text);if(!f)throw new l("Invalid size: '"+c.text+"'",c);const v={number:+(f[1]+f[2]),unit:f[3]};if(!$u(v))throw new l("Invalid unit: '"+v.unit+"'",c);return{type:"size",mode:this.mode,value:v,isBlank:d}}parseUrlGroup(i){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const c=this.parseStringGroup("url",i);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),c==null)return null;const d=c.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:d}}parseArgumentGroup(i,c){const d=this.gullet.scanArgument(i);if(d==null)return null;const f=this.mode;c&&this.switchMode(c),this.gullet.beginGroup();const v=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const k={type:"ordgroup",mode:this.mode,loc:d.loc,body:v};return c&&this.switchMode(f),k}parseGroup(i,c){const d=this.fetch(),f=d.text;let v;if(f==="{"||f==="\\begingroup"){this.consume();const k=f==="{"?"}":"\\endgroup";this.gullet.beginGroup();const T=this.parseExpression(!1,k),B=this.fetch();this.expect(k),this.gullet.endGroup(),v={type:"ordgroup",mode:this.mode,loc:Vt.range(d,B),body:T,semisimple:f==="\\begingroup"||void 0}}else if(v=this.parseFunction(c,i)||this.parseSymbol(),v==null&&f[0]==="\\"&&!rh.hasOwnProperty(f)){if(this.settings.throwOnError)throw new l("Undefined control sequence: "+f,d);v=this.formatUnsupportedCmd(f),this.consume()}return v}formLigatures(i){let c=i.length-1;for(let d=0;d<c;++d){const f=i[d],v=f.text;v==="-"&&i[d+1].text==="-"&&(d+1<c&&i[d+2].text==="-"?(i.splice(d,3,{type:"textord",mode:"text",loc:Vt.range(f,i[d+2]),text:"---"}),c-=2):(i.splice(d,2,{type:"textord",mode:"text",loc:Vt.range(f,i[d+1]),text:"--"}),c-=1)),(v==="'"||v==="`")&&i[d+1].text===v&&(i.splice(d,2,{type:"textord",mode:"text",loc:Vt.range(f,i[d+1]),text:v+v}),c-=1)}}parseSymbol(){const i=this.fetch();let c=i.text;if(/^\\verb[^a-zA-Z]/.test(c)){this.consume();let v=c.slice(5);const k=v.charAt(0)==="*";if(k&&(v=v.slice(1)),v.length<2||v.charAt(0)!==v.slice(-1))throw new l(`\\verb assertion failed --
                    please report what input caused this bug`);return v=v.slice(1,-1),{type:"verb",mode:"text",body:v,star:k}}ih.hasOwnProperty(c[0])&&!Xe[this.mode][c[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+c[0]+'" used in math mode',i),c=ih[c[0]]+c.slice(1));const d=ig.exec(c);d&&(c=c.substring(0,d.index),c==="i"?c="ı":c==="j"&&(c="ȷ"));let f;if(Xe[this.mode][c]){this.settings.strict&&this.mode==="math"&&ho.indexOf(c)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+c[0]+'" used in math mode',i);const v=Xe[this.mode][c].group,k=Vt.range(i);let T;if(ix.hasOwnProperty(v)){const B=v;T={type:"atom",mode:this.mode,family:B,loc:k,text:c}}else T={type:v,mode:this.mode,loc:k,text:c};f=T}else if(c.charCodeAt(0)>=128)this.settings.strict&&(te(c.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+c[0]+'" used in math mode',i):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+c[0]+'"'+(" ("+c.charCodeAt(0)+")"),i)),f={type:"textord",mode:"text",loc:Vt.range(i),text:c};else return null;if(this.consume(),d)for(let v=0;v<d[0].length;v++){const k=d[0][v];if(!$o[k])throw new l("Unknown accent ' "+k+"'",i);const T=$o[k][this.mode]||$o[k].text;if(!T)throw new l("Accent "+k+" unsupported in "+this.mode+" mode",i);f={type:"accent",mode:this.mode,loc:Vt.range(i),label:T,isStretchy:!1,isShifty:!0,base:f}}return f}}Da.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Uo=function(o,i){if(!(typeof o=="string"||o instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const c=new Da(o,i);delete c.gullet.macros.current["\\df@tag"];let d=c.parse();if(delete c.gullet.macros.current["\\current@color"],delete c.gullet.macros.current["\\color"],c.gullet.macros.get("\\df@tag")){if(!i.displayMode)throw new l("\\tag works only in display equations");d=[{type:"tag",mode:"text",body:d,tag:c.subparse([new ns("\\df@tag")])}]}return d};let ah=function(o,i,c){i.textContent="";const d=Ho(o,c).toNode();i.appendChild(d)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ah=function(){throw new l("KaTeX doesn't work in quirks mode.")});const ug=function(o,i){return Ho(o,i).toMarkup()},dg=function(o,i){const c=new z(i);return Uo(o,c)},lh=function(o,i,c){if(c.throwOnError||!(o instanceof l))throw o;const d=Q.makeSpan(["katex-error"],[new ts(i)]);return d.setAttribute("title",o.toString()),d.setAttribute("style","color:"+c.errorColor),d},Ho=function(o,i){const c=new z(i);try{const d=Uo(o,c);return _x(d,o,c)}catch(d){return lh(d,o,c)}};var hg={version:"0.16.11",render:ah,renderToString:ug,ParseError:l,SETTINGS_SCHEMA:b,__parse:dg,__renderToDomTree:Ho,__renderToHTMLTree:function(o,i){const c=new z(i);try{const d=Uo(o,c);return Cx(d,o,c)}catch(d){return lh(d,o,c)}},__setFontMetrics:Y1,__defineSymbol:p,__defineFunction:ge,__defineMacro:M,__domTree:{Span:si,Anchor:co,SymbolNode:ts,SvgNode:Rs,PathNode:ir,LineNode:uo}},mg=hg;return n=n.default,n}()})}(Ec)),Ec.exports}(function(e,t){(function(r,n){n(t,F,lb(),ob())})(Ht,function(r,n,a,l){Object.defineProperty(r,"__esModule",{value:!0});function u(A,j){for(var b in j)Object.defineProperty(A,b,{enumerable:!0,get:j[b]})}u(r,{BlockMath:()=>S,InlineMath:()=>D}),n=x(n),a=h(a),l=h(l);function h(A){return A&&A.__esModule?A:{default:A}}function m(A){if(typeof WeakMap!="function")return null;var j=new WeakMap,b=new WeakMap;return(m=function(C){return C?b:j})(A)}function x(A,j){if(A&&A.__esModule)return A;if(A===null||typeof A!="object"&&typeof A!="function")return{default:A};var b=m(j);if(b&&b.has(A))return b.get(A);var C={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in A)if($!=="default"&&Object.prototype.hasOwnProperty.call(A,$)){var U=z?Object.getOwnPropertyDescriptor(A,$):null;U&&(U.get||U.set)?Object.defineProperty(C,$,U):C[$]=A[$]}return C.default=A,b&&b.set(A,C),C}const g=(A,{displayMode:j})=>{const b=({children:C,errorColor:z,math:$,renderError:U})=>{const Y=$??C,{html:Z,error:X}=(0,n.useMemo)(()=>{try{return{html:l.default.renderToString(Y,{displayMode:j,errorColor:z,throwOnError:!!U}),error:void 0}}catch(ee){if(ee instanceof l.default.ParseError||ee instanceof TypeError)return{error:ee};throw ee}},[Y,z,U]);return X?U?U(X):n.default.createElement(A,{html:`${X.message}`}):n.default.createElement(A,{html:Z})};return b.propTypes={children:a.default.string,errorColor:a.default.string,math:a.default.string,renderError:a.default.func},b},N={html:a.default.string.isRequired},w=({html:A})=>n.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:A}});w.propTypes=N;const E=({html:A})=>n.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:A}});E.propTypes=N;const S=g(w,{displayMode:!0}),D=g(E,{displayMode:!1})})})(F0,F0.exports);var Xt=F0.exports;const cb=[{icon:bt,label:"Cours disponibles",value:"24",color:"bg-[#4F6D0B]"},{icon:Mr,label:"Élèves actifs",value:"2 847",color:"bg-[#C19620]"},{icon:ky,label:"Taux de réussite",value:"94%",color:"bg-[#462D12]"},{icon:At,label:"Heures d'études",value:"168",color:"bg-[#4F6D0B]/80"}],ub=["Mathématiques","Physique-Chimie"];function $m({onViewChange:e}){const[t,r]=F.useState([]);F.useEffect(()=>{n()},[]);const n=async()=>{try{const{data:u,error:h}=await pe.from("questions").select("*").order("created_at",{ascending:!1}).limit(10);if(h)throw h;r(u||[])}catch(u){console.error("Erreur:",u)}},a=u=>{sessionStorage.setItem("previewQuestionId",u),e("affichage")},l=u=>u.split(/(\$\$[^$]+\$\$|\$[^$]+\$)/g).map((m,x)=>{if(m.startsWith("$$")&&m.endsWith("$$")){const g=m.slice(2,-2);return s.jsx(Xt.BlockMath,{math:g},x)}else if(m.startsWith("$")&&m.endsWith("$")){const g=m.slice(1,-1);return s.jsx(Xt.InlineMath,{math:g},x)}return s.jsx("span",{children:m},x)});return s.jsxs("div",{className:"p-8",children:[s.jsxs("header",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-[#462D12]",children:"Bienvenue sur KN"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Votre plateforme d'apprentissage personnalisée"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:cb.map(u=>s.jsx(rb,{...u},u.label))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-[#462D12] mb-4",children:"Examens majeurs"}),s.jsx("div",{className:"space-y-4",children:ub.map(u=>s.jsx(nb,{title:u},u))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-[#462D12] mb-4",children:"Questions disponibles"}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.map(u=>s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:l(u.text)}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.subject," - ",u.level]})]}),s.jsx("button",{onClick:()=>a(u.id),className:"ml-4 px-3 py-1.5 text-sm text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:"Aperçu"})]})},u.id))})]})]})]})}function db({time:e,label:t}){const r=n=>{const a=Math.floor(n/60),l=n%60;return`${a}:${l.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ny,{className:"h-5 w-5 text-[#4F6D0B]"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-700",children:t}),s.jsx("div",{className:"font-medium text-gray-900",children:r(e)})]})]})}function Tc({id:e,text:t,isSelected:r,onSelect:n}){return s.jsxs("button",{onClick:()=>n(e),className:"w-full flex items-center space-x-4 p-2 rounded-lg hover:bg-[#F5EFE3] transition-colors",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-medium transition-colors
        ${r?"bg-[#4F6D0B] text-white border-2 border-[#4F6D0B]":"bg-white border-2 border-gray-300 text-gray-700"}`,children:e}),s.jsx("span",{className:"text-gray-800",children:t})]})}function hb({questionTime:e,selectedAnswer:t,onRequestHint:r,onSubmitAnswer:n}){const a=l=>{const u=Math.floor(l/60),h=l%60;return`${u}:${h.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"w-64 bg-white border border-gray-200 rounded-lg p-4 space-y-4 self-stretch",children:[s.jsx("button",{onClick:r,className:"w-full py-3 bg-white border border-gray-200 rounded-lg text-center text-gray-700 hover:bg-gray-50",children:"Demander une astuce"}),s.jsx("button",{onClick:n,disabled:!t,className:`w-full py-3 rounded-lg text-center transition-colors
          ${t?"bg-[#4F6D0B] text-white hover:bg-[#4F6D0B]/90":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Répondre"}),s.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Temps de réponse à cette question",s.jsx("div",{className:"font-medium text-gray-900 mt-1",children:a(e)})]})]})}function mb({subject:e,level:t,module:r,difficulty:n,onComplete:a,onBack:l,previewQuestion:u}){const[h,m]=F.useState(0),[x,g]=F.useState(0),[N,w]=F.useState(0),[E,S]=F.useState(null),[D,A]=F.useState([]),[j,b]=F.useState(!0),[C,z]=F.useState(null);F.useEffect(()=>{u?(A([u]),b(!1)):$()},[e,t,r,n,u]),F.useEffect(()=>{const q=setInterval(()=>{g(se=>se+1),w(se=>se+1)},1e3);return()=>clearInterval(q)},[]);const $=async()=>{try{b(!0),z(null);const q={maths:"Mathématiques",physics:"Physique-Chimie"};let se=pe.from("questions").select("*").eq("subject",q[e]||e).eq("level",t).eq("module",r);if(n!=="random"){const J={beginner:"Débutant",progressive:"Progressif",medium:"Moyen",difficult:"Difficile",advanced:"Approfondi",legend:"Légende"};se=se.eq("difficulty",J[n]||n)}const{data:W,error:re}=await se.limit(10);if(re){console.error("Erreur lors du chargement des questions:",re),z("Impossible de charger les questions");return}if(!W||W.length===0){z("Aucune question disponible pour ces critères");return}A(W)}catch(q){console.error("Erreur:",q),z("Une erreur est survenue")}finally{b(!1)}},U=()=>{h<D.length-1?(m(q=>q+1),w(0),S(null)):a()},Y=q=>{S(q)},Z=()=>{E&&U()},X=()=>{console.log("Demande d'astuce")},ee=q=>q.split(/(\$[^$]+\$)/g).map((se,W)=>{if(se.startsWith("$")&&se.endsWith("$"))try{const re=se.slice(1,-1);return s.jsx("span",{className:"inline-flex items-center",children:s.jsx(Xt.InlineMath,{math:re})},W)}catch{return s.jsx("span",{children:se},W)}return s.jsx("span",{children:se},W)}),G=q=>{if(!q||!Array.isArray(q)||q.length===0)return null;let se=1/0,W=1/0,re=-1/0,J=-1/0;q.forEach(_e=>{_e.points&&_e.points.forEach(Ae=>{se=Math.min(se,Ae.x),W=Math.min(W,Ae.y),re=Math.max(re,Ae.x),J=Math.max(J,Ae.y)}),_e.vertices&&_e.vertices.forEach(Ae=>{se=Math.min(se,Ae.x),W=Math.min(W,Ae.y),re=Math.max(re,Ae.x),J=Math.max(J,Ae.y)})});const de=30,ce=re-se+de*2,ne=J-W+de*2,Se=`${se-de} ${W-de} ${ce} ${ne}`;return s.jsx("div",{className:"my-4 flex justify-center",children:s.jsx("svg",{width:"400",height:"300",viewBox:Se,preserveAspectRatio:"xMidYMid meet",style:{background:"white"},children:q.map((_e,Ae)=>{const te={stroke:_e.strokeColor,strokeWidth:_e.strokeWidth,strokeDasharray:_e.strokeDasharray==="none"?"":_e.strokeDasharray,fill:_e.backgroundColor||"transparent",fillOpacity:_e.opacity,vectorEffect:"non-scaling-stroke"};if(_e.type==="line"&&_e.points){const[he,me]=_e.points;return s.jsx("line",{x1:he.x,y1:he.y,x2:me.x,y2:me.y,...te},Ae)}if(_e.type==="circle"&&_e.points&&_e.width){const he=_e.points[0],me=_e.width/2;return s.jsx("circle",{cx:he.x,cy:he.y,r:me,...te},Ae)}if(_e.type==="ellipse"&&_e.points&&_e.width&&_e.height){const he=_e.points[0];return s.jsx("ellipse",{cx:he.x,cy:he.y,rx:_e.width/2,ry:_e.height/2,...te},Ae)}if(_e.vertices){const he=_e.vertices.map((me,je)=>`${je===0?"M":"L"} ${me.x},${me.y}`).join(" ")+" Z";return s.jsx("path",{d:he,...te},Ae)}return null})})})};if(j)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4F6D0B] mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des questions..."})]})});if(C||D.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:C||"Aucune question disponible"}),s.jsx("button",{onClick:l,className:"px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Retour"})]})});const V=D[h],ie=q=>({Débutant:"bg-green-100 text-green-800",Progressif:"bg-blue-100 text-blue-800",Moyen:"bg-yellow-100 text-yellow-800",Difficile:"bg-orange-100 text-orange-800",Approfondi:"bg-red-100 text-red-800",Légende:"bg-purple-100 text-purple-800"})[q]||"bg-gray-100 text-gray-800";return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"sticky top-0 bg-white border-b shadow-sm -mx-4 px-4 py-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(db,{time:x,label:"Temps de réponse au quiz"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Quitter"}),s.jsx("button",{onClick:U,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:h<D.length-1?"Passer":"Terminer"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Question ",h+1," sur ",D.length]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Niveau de difficulté :"}),s.jsx("span",{className:`ml-2 px-3 py-1 rounded-full text-sm font-medium ${ie(V.difficulty)}`,children:V.difficulty})]})]}),s.jsxs("div",{className:"min-h-[200px] border-t border-b py-6 my-6",children:[s.jsx("div",{className:"text-gray-600 whitespace-pre-wrap",children:ee(V.text)}),V.figure_data&&G(V.figure_data)]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"flex-1 bg-[#FBF7EF] p-6 rounded-lg",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold mb-2",children:"Q."}),s.jsx("p",{className:"text-gray-800",children:V.text})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Tc,{id:"A",text:"Option A",isSelected:E==="A",onSelect:Y}),s.jsx(Tc,{id:"B",text:"Option B",isSelected:E==="B",onSelect:Y}),s.jsx(Tc,{id:"C",text:"Option C",isSelected:E==="C",onSelect:Y})]})]}),s.jsx(hb,{questionTime:N,selectedAnswer:E,onRequestHint:X,onSubmitAnswer:Z})]})]})]})})}const fb=[{id:"beginner",label:"Débutant",color:"bg-green-100 text-green-800"},{id:"progressive",label:"Progressif",color:"bg-blue-100 text-blue-800"},{id:"medium",label:"Moyen",color:"bg-yellow-100 text-yellow-800"},{id:"difficult",label:"Difficile",color:"bg-orange-100 text-orange-800"},{id:"advanced",label:"Approfondi",color:"bg-red-100 text-red-800"},{id:"legend",label:"Légende",color:"bg-purple-100 text-purple-800"},{id:"random",label:"Aléatoire",color:"bg-gray-100 text-gray-800"}],pb=[{id:"maths",label:"Mathématiques"},{id:"physics",label:"Physique-Chimie"}],Dc={college:["6e","5e","4e","3e"],lycee:["2nd","1ere","Tle"]},xb={maths:{college:{"6e":["Nombres et calculs","Géométrie","Grandeurs et mesures"],"5e":["Nombres et calculs","Géométrie","Organisation et gestion de données"],"4e":["Nombres et calculs","Géométrie","Fonctions"],"3e":["Nombres et calculs","Géométrie","Fonctions","Probabilités"]},lycee:{"2nd":["Algèbre","Analyse","Géométrie","Probabilités et statistiques"],"1ere":["Algèbre","Analyse","Géométrie","Probabilités"],Tle:["Algèbre","Analyse","Géométrie","Probabilités et statistiques"]}}};function gb(){const[e,t]=F.useState(null),[r,n]=F.useState(1),[a,l]=F.useState({subject:"",level:"",module:"",difficulty:""}),[u,h]=F.useState(!1),[m,x]=F.useState(null);F.useEffect(()=>{g();const z=sessionStorage.getItem("previewQuestionId");z&&(N(z),sessionStorage.removeItem("previewQuestionId"))},[]);const g=async()=>{try{const z=sessionStorage.getItem("currentUser");if(z){const $=JSON.parse(z);if(console.log("DEBUG - User from sessionStorage:",$),$.id){const{data:U}=await pe.from("local_users").select("*").eq("id",$.id).maybeSingle();U&&(console.log("DEBUG - Profile loaded from DB:",U),t(U))}else t($)}}catch(z){console.error("Erreur chargement utilisateur:",z)}},N=async z=>{try{const U=JSON.parse(sessionStorage.getItem("allQuestions")||"[]").find(Y=>Y.id===z);U&&(x(U),h(!0))}catch($){console.error("Erreur:",$)}},w=()=>{const z=[...Dc.college,...Dc.lycee];if(console.log("DEBUG - currentUser:",e),!e)return console.log("DEBUG - Pas d'utilisateur, affichage de tous les niveaux"),z;const $=e.current_class||e.currentClass;if(console.log("DEBUG - userLevel:",$),!$)return console.log("DEBUG - Pas de classe définie, affichage de tous les niveaux"),z;const U=z.indexOf($);if(console.log("DEBUG - userLevelIndex:",U),U===-1)return console.log("DEBUG - Classe non trouvée, affichage de tous les niveaux"),z;const Y=z.slice(0,U+1);return console.log("DEBUG - Niveaux filtrés:",Y),Y},E=()=>{var Y,Z;const{subject:z,level:$}=a;if(!z||!$)return[];const U=Dc.college.includes($)?"college":"lycee";return((Z=(Y=xb[z])==null?void 0:Y[U])==null?void 0:Z[$])||[]},S=z=>{l({...a,subject:z}),n(2)},D=z=>{l({...a,level:z}),n(3)},A=z=>{l({...a,module:z}),n(4)},j=z=>{l({...a,difficulty:z}),h(!0)},b=()=>{h(!1),n(1),l({subject:"",level:"",module:"",difficulty:""})};if(u)return s.jsx(mb,{...a,onComplete:b,onBack:()=>{h(!1),x(null)},previewQuestion:m});const C=()=>{switch(r){case 1:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Choisissez une matière"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:pb.map(z=>s.jsx("button",{onClick:()=>S(z.id),className:"p-4 text-left border rounded-lg hover:bg-gray-50 transition-colors",children:s.jsx("span",{className:"font-medium",children:z.label})},z.id))})]});case 2:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Choisissez un niveau"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:w().map(z=>s.jsx("button",{onClick:()=>D(z),className:"p-4 text-left border rounded-lg hover:bg-gray-50 transition-colors",children:s.jsx("span",{className:"font-medium",children:z})},z))})]});case 3:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Choisissez un module"}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:E().map(z=>s.jsx("button",{onClick:()=>A(z),className:"p-4 text-left border rounded-lg hover:bg-gray-50 transition-colors",children:s.jsx("span",{className:"font-medium",children:z})},z))})]});case 4:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Choisissez un niveau de difficulté"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:fb.map(z=>s.jsx("button",{onClick:()=>j(z.id),className:`p-4 rounded-lg transition-colors ${z.color} ${z.id==="random"?"col-span-2":""}`,children:s.jsxs("div",{className:"flex items-center justify-center",children:[z.id==="random"&&s.jsx(jy,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"font-medium",children:z.label})]})},z.id))})]});default:return null}};return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6 flex items-center",children:r>1&&s.jsxs("button",{onClick:()=>n(r-1),className:"flex items-center text-gray-600 hover:text-gray-900",children:[s.jsx(Os,{className:"h-5 w-5 mr-2"}),"Retour"]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quick Quiz"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Testez vos connaissances avec des quiz rapides et adaptés à votre niveau"})]}),C()]})]})})}function yb({onSymbolsClick:e}){return s.jsx("div",{className:"border-b border-gray-200 p-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex items-center space-x-1 border-r pr-2",children:[s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(h1,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(v1,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(w1,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center space-x-1 border-r pr-2",children:[s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(u1,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(c1,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(d1,{className:"h-4 w-4"})})]}),s.jsxs("button",{onClick:e,className:"flex items-center px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded",children:[s.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Symboles mathématiques"]})]})})}const vb=[{name:"Opérations",symbols:[{label:"+",value:"+",latex:"+"},{label:"−",value:"-",latex:"-"},{label:"×",value:"\\times",latex:"\\times"},{label:"÷",value:"\\div",latex:"\\div"},{label:"±",value:"\\pm",latex:"\\pm"},{label:"Fraction",value:"\\frac{a}{b}",latex:"\\frac{a}{b}"}]},{name:"Exposants & Racines",symbols:[{label:"x²",value:"x^2",latex:"x^2"},{label:"x³",value:"x^3",latex:"x^3"},{label:"xⁿ",value:"x^n",latex:"x^n"},{label:"Indice",value:"x_i",latex:"x_i"},{label:"√",value:"\\sqrt{x}",latex:"\\sqrt{x}"},{label:"ⁿ√",value:"\\sqrt[n]{x}",latex:"\\sqrt[n]{x}"}]},{name:"Calcul",symbols:[{label:"∫",value:"\\int_{a}^{b}",latex:"\\int_{a}^{b}"},{label:"∬",value:"\\iint_{D}",latex:"\\iint_{D}"},{label:"∭",value:"\\iiint_{E}",latex:"\\iiint_{E}"},{label:"∑",value:"\\sum_{i=1}^{n}",latex:"\\sum_{i=1}^{n}"},{label:"∏",value:"\\prod_{i=1}^{n}",latex:"\\prod_{i=1}^{n}"},{label:"lim",value:"\\lim_{x \\to \\infty}",latex:"\\lim_{x \\to \\infty}"},{label:"d/dx",value:"\\frac{d}{dx}",latex:"\\frac{d}{dx}"},{label:"∂/∂x",value:"\\frac{\\partial}{\\partial x}",latex:"\\frac{\\partial}{\\partial x}"}]},{name:"Relations",symbols:[{label:"=",value:"=",latex:"="},{label:"≈",value:"\\approx",latex:"\\approx"},{label:"≠",value:"\\neq",latex:"\\neq"},{label:"<",value:"<",latex:"<"},{label:">",value:">",latex:">"},{label:"≤",value:"\\leq",latex:"\\leq"},{label:"≥",value:"\\geq",latex:"\\geq"},{label:"≡",value:"\\equiv",latex:"\\equiv"}]},{name:"Systèmes & Matrices",symbols:[{label:"Système 2 lignes",value:"\\begin{cases} x^2-1, & x>0 \\\\ x+2, & x<0 \\end{cases}",latex:"\\begin{cases} x^2-1, & x>0 \\\\ x+2, & x<0 \\end{cases}"},{label:"Système 3 lignes",value:"\\begin{cases} x+y+z=6 \\\\ 2x-y+z=3 \\\\ x+2y-z=1 \\end{cases}",latex:"\\begin{cases} x+y+z=6 \\\\ 2x-y+z=3 \\\\ x+2y-z=1 \\end{cases}"},{label:"Matrice 2×2",value:"\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}",latex:"\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}"},{label:"Matrice 3×3",value:"\\begin{pmatrix} a & b & c \\\\ d & e & f \\\\ g & h & i \\end{pmatrix}",latex:"\\begin{pmatrix} a & b & c \\\\ d & e & f \\\\ g & h & i \\end{pmatrix}"},{label:"Déterminant 2×2",value:"\\begin{vmatrix} a & b \\\\ c & d \\end{vmatrix}",latex:"\\begin{vmatrix} a & b \\\\ c & d \\end{vmatrix}"},{label:"Vecteur",value:"\\begin{pmatrix} x \\\\ y \\\\ z \\end{pmatrix}",latex:"\\begin{pmatrix} x \\\\ y \\\\ z \\end{pmatrix}"}]},{name:"Ensembles",symbols:[{label:"ℝ",value:"\\mathbb{R}",latex:"\\mathbb{R}"},{label:"ℕ",value:"\\mathbb{N}",latex:"\\mathbb{N}"},{label:"ℤ",value:"\\mathbb{Z}",latex:"\\mathbb{Z}"},{label:"ℚ",value:"\\mathbb{Q}",latex:"\\mathbb{Q}"},{label:"ℂ",value:"\\mathbb{C}",latex:"\\mathbb{C}"},{label:"∈",value:"\\in",latex:"\\in"},{label:"∉",value:"\\notin",latex:"\\notin"},{label:"∪",value:"\\cup",latex:"\\cup"},{label:"∩",value:"\\cap",latex:"\\cap"},{label:"∅",value:"\\emptyset",latex:"\\emptyset"},{label:"⊂",value:"\\subset",latex:"\\subset"},{label:"⊆",value:"\\subseteq",latex:"\\subseteq"}]},{name:"Lettres grecques",symbols:[{label:"α",value:"\\alpha",latex:"\\alpha"},{label:"β",value:"\\beta",latex:"\\beta"},{label:"γ",value:"\\gamma",latex:"\\gamma"},{label:"δ",value:"\\delta",latex:"\\delta"},{label:"ε",value:"\\epsilon",latex:"\\epsilon"},{label:"θ",value:"\\theta",latex:"\\theta"},{label:"λ",value:"\\lambda",latex:"\\lambda"},{label:"μ",value:"\\mu",latex:"\\mu"},{label:"π",value:"\\pi",latex:"\\pi"},{label:"σ",value:"\\sigma",latex:"\\sigma"},{label:"φ",value:"\\phi",latex:"\\phi"},{label:"ω",value:"\\omega",latex:"\\omega"}]},{name:"Fonctions",symbols:[{label:"sin",value:"\\sin",latex:"\\sin(x)"},{label:"cos",value:"\\cos",latex:"\\cos(x)"},{label:"tan",value:"\\tan",latex:"\\tan(x)"},{label:"log",value:"\\log",latex:"\\log(x)"},{label:"ln",value:"\\ln",latex:"\\ln(x)"},{label:"exp",value:"e^{x}",latex:"e^{x}"},{label:"Binôme",value:"\\binom{n}{k}",latex:"\\binom{n}{k}"},{label:"|x|",value:"|x|",latex:"|x|"}]},{name:"Flèches",symbols:[{label:"→",value:"\\rightarrow",latex:"\\rightarrow"},{label:"←",value:"\\leftarrow",latex:"\\leftarrow"},{label:"↔",value:"\\leftrightarrow",latex:"\\leftrightarrow"},{label:"⇒",value:"\\Rightarrow",latex:"\\Rightarrow"},{label:"⇐",value:"\\Leftarrow",latex:"\\Leftarrow"},{label:"⇔",value:"\\Leftrightarrow",latex:"\\Leftrightarrow"}]}];function bb({onSymbolSelect:e}){return s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-lg shadow-lg z-10 w-[700px]",children:s.jsx("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:vb.map(t=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-3 px-2 bg-gray-50 py-2 rounded",children:t.name}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.symbols.map(r=>s.jsx("button",{onClick:()=>e(r.value),className:"p-3 text-center hover:bg-[#4F6D0B]/5 rounded-lg border border-gray-100 hover:border-[#4F6D0B] transition-colors flex items-center justify-center min-h-[52px]",title:r.label,children:s.jsx(Xt.InlineMath,{math:r.latex})},r.label))})]},t.name))})})}function wb({onChange:e,onInsertSymbol:t}){const r=F.useRef(null);return F.useEffect(()=>typeof window>"u"?void 0:((async()=>{try{const{MathfieldElement:a}=await Xn(async()=>{const{MathfieldElement:l}=await import("./mathlive.min-DdZiGqxG.js");return{MathfieldElement:l}},[]);if(customElements.get("math-field")||customElements.define("math-field",a),!r.current)return;r.current.setOptions({virtualKeyboardMode:"manual",virtualKeyboards:"all",virtualKeyboardTheme:"material",virtualKeyboardLayout:"standard",defaultMode:"math",letterShapeStyle:"tex",smartMode:!0,smartFence:!0,smartSuperscript:!0,removeExtraneousParentheses:!0,mathModeSpace:"\\;",macros:{"\\RR":"\\mathbb{R}","\\NN":"\\mathbb{N}","\\ZZ":"\\mathbb{Z}","\\QQ":"\\mathbb{Q}","\\CC":"\\mathbb{C}","\\vec":"\\vec{#1}","\\mat":"\\begin{pmatrix}#1\\end{pmatrix}"},customVirtualKeyboards:{basic:{label:"Basic",tooltip:"Basic operations",layer:"basic"},greek:{label:"Greek",tooltip:"Greek letters",layer:"greek"},functions:{label:"Functions",tooltip:"Mathematical functions",layer:"functions"},operators:{label:"Operators",tooltip:"Mathematical operators",layer:"operators"}},virtualKeyboardToolbar:{standard:["basic","greek","functions","operators"]},onKeystroke:(l,u,h)=>u==="Backspace"||u==="Delete"?(h.stopPropagation(),!1):!0}),r.current.addEventListener("input",()=>{e(r.current.value)}),r.current.addEventListener("focus",()=>{const l=r.current.getValue();r.current.executeCommand(["insert","",{position:l.length}])}),r.current.addEventListener("keydown",l=>{(l.key==="Backspace"||l.key==="Delete")&&l.stopPropagation()})}catch(a){console.error("Error loading MathLive:",a)}})(),()=>{r.current&&(r.current.removeEventListener("input",()=>{}),r.current.removeEventListener("focus",()=>{}),r.current.removeEventListener("keydown",()=>{}))}),[e]),F.useEffect(()=>{t&&r.current&&(r.current.executeCommand(["insert",t]),e(r.current.value),r.current.focus())},[t,e]),s.jsxs("div",{className:"relative",children:[s.jsx("math-field",{ref:r,className:"w-full min-h-[100px] p-4 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"}),s.jsx("div",{className:"absolute right-2 top-2",children:s.jsx("button",{type:"button",onClick:()=>{var n;return(n=r.current)==null?void 0:n.executeCommand("toggleVirtualKeyboard")},className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Afficher/masquer le clavier virtuel (Ctrl/Alt + Espace)",children:"⌨️"})})]})}function jb({content:e,figures:t=[]}){const r=()=>e?e.split(/(\$[^$]+\$)/g).map((a,l)=>{if(a.startsWith("$")&&a.endsWith("$"))try{const u=a.slice(1,-1);return s.jsx("span",{className:"inline-flex items-center",children:s.jsx(Xt.InlineMath,{math:u})},l)}catch{return s.jsxs("span",{className:"text-red-500 bg-red-50 px-1 rounded",children:["Erreur de syntaxe: ",a]},l)}return s.jsx("span",{children:a},l)}):null;return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"prose max-w-none whitespace-pre-wrap",children:e?r():s.jsx("div",{className:"text-gray-400 italic",children:"L'aperçu de votre contenu apparaîtra ici..."})}),t.length>0&&s.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Figures"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((n,a)=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-white flex items-center justify-center",dangerouslySetInnerHTML:{__html:n}},a))})]})]})}function Nb({basicShapes:e,polygons:t,selectedTool:r,mode:n,onToolSelect:a,onModeChange:l}){var g,N;const[u,h]=F.useState(!1),m=[{title:"Formes de base",shapes:e},{title:"Polygones",shapes:t}],x=()=>{const E=[...e,...t].find(S=>S.id===r);return(E==null?void 0:E.label)||"Sélectionner une forme"};return s.jsx("div",{className:"border-b border-gray-200 p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Mode"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>l("select"),className:`flex items-center px-3 py-2 rounded-lg border ${n==="select"?"border-[#4F6D0B] bg-[#4F6D0B]/5 text-[#4F6D0B]":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(xy,{className:"h-4 w-4 mr-2"}),"Sélection"]}),s.jsxs("button",{onClick:()=>l("draw"),className:`flex items-center px-3 py-2 rounded-lg border ${n==="draw"?"border-[#4F6D0B] bg-[#4F6D0B]/5 text-[#4F6D0B]":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(gy,{className:"h-4 w-4 mr-2"}),"Dessin"]}),s.jsxs("button",{onClick:()=>l("text"),className:`flex items-center px-3 py-2 rounded-lg border ${n==="text"?"border-[#4F6D0B] bg-[#4F6D0B]/5 text-[#4F6D0B]":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Texte"]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!u),className:`w-full flex items-center justify-between px-3 py-2 border rounded-lg ${r?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200 hover:bg-gray-50"}`,children:[s.jsxs("span",{className:"flex items-center",children:[r&&s.jsx("span",{className:"mr-2 text-2xl",children:(g=[...e,...t].find(w=>w.id===r))==null?void 0:g.icon}),s.jsx("span",{className:"text-sm font-medium",children:x()})]}),s.jsx(Wn,{className:`h-4 w-4 transition-transform ${u?"rotate-180":""}`})]}),u&&s.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-lg shadow-lg",children:m.map((w,E)=>s.jsxs("div",{className:E>0?"border-t":"",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 bg-gray-50",children:w.title}),s.jsx("div",{className:"p-2 grid grid-cols-4 gap-2",children:w.shapes.map(S=>s.jsx("button",{onClick:()=>{a(S.id),l("draw"),h(!1)},className:`p-3 text-2xl border rounded-lg hover:bg-gray-50 flex items-center justify-center ${r===S.id?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200"}`,title:S.label,children:S.icon},S.id))})]},w.title))})]}),r&&s.jsx("div",{className:"px-2 py-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Forme sélectionnée : ",(N=[...e,...t].find(w=>w.id===r))==null?void 0:N.label]})})]})})}function kb({shape:e,onResizeStart:t}){if(e.type==="text")return null;if(e.type==="line")return s.jsx(s.Fragment,{children:e.points.map((r,n)=>s.jsx("div",{onMouseDown:a=>{a.stopPropagation(),t(`point-${n}`)},style:{position:"absolute",left:r.x-5,top:r.y-5,width:10,height:10,backgroundColor:"#4F6D0B",border:"2px solid white",borderRadius:"50%",cursor:"pointer",zIndex:10}},`handle-${n}`))});if(e.type==="circle"||e.type==="ellipse"){const r=e.points[0],n=e.width/2,a=e.type==="circle"?n:e.height/2,l=[{id:"n",x:r.x,y:r.y-a},{id:"e",x:r.x+n,y:r.y},{id:"s",x:r.x,y:r.y+a},{id:"w",x:r.x-n,y:r.y}];return s.jsx(s.Fragment,{children:l.map(u=>s.jsx("div",{onMouseDown:h=>{h.stopPropagation(),t(u.id)},style:{position:"absolute",left:u.x-5,top:u.y-5,width:10,height:10,backgroundColor:"#4F6D0B",border:"2px solid white",borderRadius:"50%",cursor:`${u.id}-resize`,zIndex:10}},u.id))})}return e.vertices?s.jsx(s.Fragment,{children:e.vertices.map((r,n)=>s.jsx("div",{onMouseDown:a=>{a.stopPropagation(),t(`vertex-${n}`)},style:{position:"absolute",left:r.x-5,top:r.y-5,width:10,height:10,backgroundColor:"#4F6D0B",border:"2px solid white",borderRadius:"50%",cursor:"pointer",zIndex:10}},`vertex-${n}`))}):null}function Um({shape:e,isPreview:t=!1}){const r=()=>{const n={stroke:e.strokeColor,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray==="none"?void 0:e.strokeDasharray,fill:e.backgroundColor||"transparent",fillOpacity:e.opacity,vectorEffect:"non-scaling-stroke"};switch(e.type){case"line":return s.jsx("line",{x1:e.points[0].x,y1:e.points[0].y,x2:e.points[1].x,y2:e.points[1].y,...n});case"circle":const a=e.width/2;return s.jsx("circle",{cx:e.points[0].x,cy:e.points[0].y,r:a,...n});case"ellipse":return s.jsx("ellipse",{cx:e.points[0].x,cy:e.points[0].y,rx:e.width/2,ry:e.height/2,...n});case"text":return s.jsx("text",{x:e.points[0].x,y:e.points[0].y,fill:e.strokeColor,fontSize:e.fontSize||16,fontFamily:e.fontFamily||"Arial",textAnchor:"middle",dominantBaseline:"middle",children:e.text});default:if(e.vertices){const l=e.vertices.map((u,h)=>`${h===0?"M":"L"} ${u.x},${u.y}`).join(" ")+" Z";return s.jsx("path",{d:l,...n})}return null}};return s.jsx("svg",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"},children:r()})}function Sb(e,t,r,n){const a={...e};if(e.type==="line"){const l=parseInt(n.split("-")[1]);return a.points=[...e.points],a.points[l]=t,a}if(e.type==="circle"||e.type==="ellipse"){const l=e.points[0],u=Math.abs(t.x-l.x),h=Math.abs(t.y-l.y);switch(n){case"n":case"s":e.type==="circle"&&(a.width=h*2),a.height=h*2;break;case"e":case"w":e.type==="circle"?(a.width=u*2,a.height=u*2):a.width=u*2;break}return a}if(e.vertices){const l=parseInt(n.split("-")[1]);return a.vertices=[...e.vertices],a.vertices[l]=t,a}return a}function _b({shapes:e,selectedTool:t,mode:r,onShapeAdd:n,onShapeUpdate:a,onShapeSelect:l,onShapeDelete:u,onDrawComplete:h}){const m=F.useRef(null),[x,g]=F.useState(!1),[N,w]=F.useState(null),[E,S]=F.useState(null),[D,A]=F.useState(!1),[j,b]=F.useState({x:0,y:0}),[C,z]=F.useState(!1),[$,U]=F.useState(null),Y=q=>{var W;const se=(W=m.current)==null?void 0:W.getBoundingClientRect();return se?{x:q.clientX-se.left,y:q.clientY-se.top}:{x:0,y:0}},Z=q=>{const W=`shape-${Date.now()}`;switch(t){case"line":return{id:W,type:"line",points:[q,q],selected:!0,strokeColor:"#000000",strokeWidth:2,strokeDasharray:"none"};case"circle":return{id:W,type:"circle",points:[q],width:100,height:100,selected:!0,strokeColor:"#000000",strokeWidth:2,strokeDasharray:"none",backgroundColor:"transparent",opacity:1};case"ellipse":return{id:W,type:"ellipse",points:[q],width:100*1.5,height:100,selected:!0,strokeColor:"#000000",strokeWidth:2,strokeDasharray:"none",backgroundColor:"transparent",opacity:1};default:{let re=[];switch(t){case"rectangle":re=[q,{x:q.x+100,y:q.y},{x:q.x+100,y:q.y+100},{x:q.x,y:q.y+100}];break;case"square":re=[q,{x:q.x+100,y:q.y},{x:q.x+100,y:q.y+100},{x:q.x,y:q.y+100}];break;case"triangle":re=[q,{x:q.x+100,y:q.y+100},{x:q.x-100,y:q.y+100}];break;case"right-triangle":re=[q,{x:q.x,y:q.y+100},{x:q.x+100,y:q.y+100}];break;case"parallelogram":{const ce=33.333333333333336;re=[{x:q.x+ce,y:q.y},{x:q.x+100+ce,y:q.y},{x:q.x+100,y:q.y+100},{x:q.x,y:q.y+100}];break}case"rhombus":re=[{x:q.x,y:q.y-100/2},{x:q.x+100/2,y:q.y},{x:q.x,y:q.y+100/2},{x:q.x-100/2,y:q.y}];break;case"trapezoid":{re=[{x:q.x+25,y:q.y},{x:q.x+100-25,y:q.y},{x:q.x+100,y:q.y+100},{x:q.x,y:q.y+100}];break}}return{id:W,type:t,vertices:re,points:[],selected:!0,strokeColor:"#000000",strokeWidth:2,strokeDasharray:"none",backgroundColor:"transparent",opacity:1}}}},X=q=>{var W,re;const se=Y(q);if(r==="text"){const J=prompt("Entrez le texte :");if(J){const de={id:`shape-${Date.now()}`,type:"text",points:[se],text:J,fontSize:16,fontFamily:"Arial",selected:!0,strokeColor:"#000000",strokeWidth:2,backgroundColor:"transparent",opacity:1};n(de)}return}if(r==="draw"&&t){w(se),g(!0);const J=Z(se);S(J),l(null)}else if(r==="select"){const J=e.find(de=>V(se,de));if(J){l(J.id),A(!0);const de=((W=J.points)==null?void 0:W[0])??((re=J.vertices)==null?void 0:re[0]);b({x:se.x-de.x,y:se.y-de.y})}else l(null)}},ee=q=>{var W,re,J,de;const se=Y(q);if(x&&E&&N){const ce={...E};if(ce.type==="line")ce.points=[N,se];else if(ce.type==="circle"||ce.type==="ellipse"){const ne=se.x-N.x,Se=se.y-N.y;ce.width=Math.abs(ne)*2,ce.height=ce.type==="circle"?ce.width:Math.abs(Se)*2}S(ce)}else if(D){const ce=e.find(ne=>ne.selected);if(ce){const ne={...ce},Se=se.x-j.x-(((re=(W=ce.points)==null?void 0:W[0])==null?void 0:re.x)??ce.vertices[0].x),_e=se.y-j.y-(((de=(J=ce.points)==null?void 0:J[0])==null?void 0:de.y)??ce.vertices[0].y);ne.points&&ne.points.length>0?ne.points=ne.points.map(Ae=>({x:Ae.x+Se,y:Ae.y+_e})):ne.vertices&&(ne.vertices=ne.vertices.map(Ae=>({x:Ae.x+Se,y:Ae.y+_e}))),a(ne)}}else if(C&&$){const ce=e.find(ne=>ne.selected);if(ce&&N){const ne=Sb(ce,se,N,$);a(ne)}}},G=()=>{x&&E&&(n(E),h()),g(!1),A(!1),z(!1),w(null),S(null)},V=(q,se)=>{if(se.type==="text"){const W=se.points[0],re=se.fontSize||16,J=(se.text||"").length*re*.6,de=re*1.2;return q.x>=W.x-J/2&&q.x<=W.x+J/2&&q.y>=W.y-de/2&&q.y<=W.y+de/2}if(se.type==="line"){const[re,J]=se.points;return Math.abs((J.y-re.y)*q.x-(J.x-re.x)*q.y+J.x*re.y-J.y*re.x)/Math.sqrt(Math.pow(J.y-re.y,2)+Math.pow(J.x-re.x,2))<5}if(se.type==="circle"||se.type==="ellipse"){const W=se.points[0],re=se.width/2,J=se.type==="circle"?re:se.height/2,de=(q.x-W.x)/re,ce=(q.y-W.y)/J;return de*de+ce*ce<=1}if(se.vertices){let W=!1;for(let re=0,J=se.vertices.length-1;re<se.vertices.length;J=re++){const de=se.vertices[re].x,ce=se.vertices[re].y,ne=se.vertices[J].x,Se=se.vertices[J].y;ce>q.y!=Se>q.y&&q.x<(ne-de)*(q.y-ce)/(Se-ce)+de&&(W=!W)}return W}return!1},ie=q=>{z(!0),U(q),w(Y({clientX:0,clientY:0}))};return s.jsxs("div",{ref:m,className:"bg-white border-2 border-dashed border-gray-200 rounded-lg h-[500px] relative",style:{cursor:r==="draw"?"crosshair":r==="text"?"text":"default"},onMouseDown:X,onMouseMove:ee,onMouseUp:G,onMouseLeave:G,children:[e.map(q=>s.jsxs(Bg.Fragment,{children:[s.jsx(Um,{shape:q}),q.selected&&s.jsx(kb,{shape:q,onResizeStart:ie})]},q.id)),E&&x&&s.jsx("div",{className:"absolute inset-0",children:s.jsx(Um,{shape:E,isPreview:!0})})]})}function Cb({strokeColor:e,strokeWidth:t,strokeDasharray:r,backgroundColor:n,opacity:a,selectedShape:l,onStrokeColorChange:u,onStrokeWidthChange:h,onStrokeDasharrayChange:m,onBackgroundColorChange:x,onOpacityChange:g,onShapeUpdate:N}){const w=["#000000","#4F6D0B","#C19620","#462D12","#DC2626","#2563EB","#7C3AED","#059669","#FFFFFF","#F3F4F6","#FEF3C7","#ECFDF5"],E=[1,2,3,4,5],S=[{label:"Continu",value:"none"},{label:"Pointillé",value:"4"},{label:"Tiret",value:"8"},{label:"Tiret-point",value:"12,4"}],D=[.1,.25,.5,.75,1],A=()=>{if((l==null?void 0:l.type)==="text"&&N){const b=prompt("Modifier le texte :",l.text||"");b!==null&&N({...l,text:b})}},j=b=>{(l==null?void 0:l.type)==="text"&&N&&N({...l,fontSize:b})};return s.jsx("div",{className:"border-t border-gray-200 p-4",children:s.jsxs("div",{className:"space-y-6",children:[(l==null?void 0:l.type)==="text"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texte"}),s.jsx("button",{onClick:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:l.text||"Cliquer pour modifier"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taille de police"}),s.jsx("div",{className:"flex gap-2",children:[12,16,20,24,32].map(b=>s.jsx("button",{onClick:()=>j(b),className:`px-3 py-2 border rounded-lg hover:bg-gray-50 ${l.fontSize===b?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200"}`,children:b},b))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur du contour"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:w.slice(0,8).map(b=>s.jsx("button",{onClick:()=>u(b),className:`w-8 h-8 rounded-full border-2 ${e===b?"border-gray-400 ring-2 ring-offset-2 ring-gray-400":"border-transparent"}`,style:{backgroundColor:b},title:b},`stroke-${b}`))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur de fond"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>x("transparent"),className:`w-8 h-8 rounded-full border-2 relative ${n==="transparent"?"border-gray-400 ring-2 ring-offset-2 ring-gray-400":"border-gray-300"}`,title:"Sans remplissage",children:s.jsx(Ss,{className:"w-5 h-5 text-gray-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),w.map(b=>s.jsx("button",{onClick:()=>x(b),className:`w-8 h-8 rounded-full border-2 ${n===b?"border-gray-400 ring-2 ring-offset-2 ring-gray-400":"border-transparent"}`,style:{backgroundColor:b},title:b},`fill-${b}`))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opacité du fond"}),s.jsx("div",{className:"flex gap-2",children:D.map(b=>s.jsxs("button",{onClick:()=>g(b),className:`px-3 py-2 border rounded-lg hover:bg-gray-50 ${a===b?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200"}`,children:[Math.round(b*100),"%"]},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Style de ligne"}),s.jsx("div",{className:"flex gap-2",children:S.map(b=>s.jsx("button",{onClick:()=>m(b.value),className:`px-3 py-2 border rounded-lg hover:bg-gray-50 ${r===b.value?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{width:"32",height:"2",children:s.jsx("line",{x1:"0",y1:"1",x2:"32",y2:"1",stroke:e,strokeWidth:t,strokeDasharray:b.value==="none"?void 0:b.value})}),s.jsx("span",{className:"text-sm",children:b.label})]})},b.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Épaisseur du contour"}),s.jsx("div",{className:"flex gap-2",children:E.map(b=>s.jsx("button",{onClick:()=>h(b),className:`p-2 border rounded-lg hover:bg-gray-50 ${t===b?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200"}`,children:s.jsx(sy,{className:"h-4 w-4",style:{strokeWidth:b*2,color:e}})},b))})]})]})})}function Eb({onSave:e,onShapesChange:t,shapes:r=[]}){const[n,a]=F.useState(null),[l,u]=F.useState(r),[h,m]=F.useState("select"),[x,g]=F.useState("#000000"),[N,w]=F.useState(2),[E,S]=F.useState("none"),[D,A]=F.useState("transparent"),[j,b]=F.useState(1),[C,z]=F.useState(!1),[$,U]=F.useState("");F.useRef(null);const[Y,Z]=F.useState({x:0,y:0,width:800,height:500});F.useEffect(()=>{const te=sessionStorage.getItem("mathEditorText");te&&U(te)},[C]),F.useEffect(()=>{if(l.length>0){let te=1/0,he=1/0,me=-1/0,je=-1/0;l.forEach(nt=>{nt.points&&nt.points.forEach(fs=>{te=Math.min(te,fs.x),he=Math.min(he,fs.y),me=Math.max(me,fs.x),je=Math.max(je,fs.y)}),nt.vertices&&nt.vertices.forEach(fs=>{te=Math.min(te,fs.x),he=Math.min(he,fs.y),me=Math.max(me,fs.x),je=Math.max(je,fs.y)}),nt.width&&(me=Math.max(me,nt.points[0].x+nt.width/2),te=Math.min(te,nt.points[0].x-nt.width/2)),nt.height&&(je=Math.max(je,nt.points[0].y+nt.height/2),he=Math.min(he,nt.points[0].y-nt.height/2))});const _s=30,ln=me-te+_s*2,Pr=je-he+_s*2;Z({x:te-_s,y:he-_s,width:ln,height:Pr})}},[l]);const X=[{id:"line",label:"Ligne",icon:"—"},{id:"circle",label:"Cercle",icon:"○"},{id:"ellipse",label:"Ellipse",icon:"⬭"}],ee=[{id:"triangle",label:"Triangle",icon:"△"},{id:"right-triangle",label:"Triangle rectangle",icon:"◿"},{id:"rectangle",label:"Rectangle",icon:"▭"},{id:"square",label:"Carré",icon:"□"},{id:"parallelogram",label:"Parallélogramme",icon:"▱"},{id:"rhombus",label:"Losange",icon:"◇"},{id:"trapezoid",label:"Trapèze",icon:"⏢"}],G=te=>{const he={...te,strokeColor:x,strokeWidth:N,strokeDasharray:E,backgroundColor:D,opacity:j};u(me=>{const je=[...me.map(_s=>({..._s,selected:!1})),he];return t==null||t(je),je})},V=te=>{u(he=>{const me=he.map(je=>je.id===te.id?te:je);return t==null||t(me),me})},ie=te=>{u(me=>me.map(je=>({...je,selected:je.id===te})));const he=l.find(me=>me.id===te);he&&(g(he.strokeColor),w(he.strokeWidth),S(he.strokeDasharray||"none"),A(he.backgroundColor||"transparent"),b(he.opacity||1))},q=te=>{u(he=>{const me=he.filter(je=>je.id!==te);return t==null||t(me),me})},se=()=>{m("select")},W=()=>{u([]),a(null),m("select")},re=()=>{if(l.length===0)return"";const te="http://www.w3.org/2000/svg",he=document.createElementNS(te,"svg");return he.setAttribute("width","300"),he.setAttribute("height","200"),he.setAttribute("viewBox",`${Y.x} ${Y.y} ${Y.width} ${Y.height}`),he.setAttribute("xmlns",te),l.forEach(me=>{var ln;let je=null;const _s={stroke:me.strokeColor,"stroke-width":me.strokeWidth.toString(),"stroke-dasharray":me.strokeDasharray==="none"?"":me.strokeDasharray,fill:me.backgroundColor||"transparent","fill-opacity":((ln=me.opacity)==null?void 0:ln.toString())||"1"};switch(me.type){case"line":je=document.createElementNS(te,"line"),je.setAttribute("x1",me.points[0].x.toString()),je.setAttribute("y1",me.points[0].y.toString()),je.setAttribute("x2",me.points[1].x.toString()),je.setAttribute("y2",me.points[1].y.toString());break;case"circle":je=document.createElementNS(te,"circle"),je.setAttribute("cx",me.points[0].x.toString()),je.setAttribute("cy",me.points[0].y.toString()),je.setAttribute("r",(me.width/2).toString());break;case"ellipse":je=document.createElementNS(te,"ellipse"),je.setAttribute("cx",me.points[0].x.toString()),je.setAttribute("cy",me.points[0].y.toString()),je.setAttribute("rx",(me.width/2).toString()),je.setAttribute("ry",(me.height/2).toString());break;case"text":je=document.createElementNS(te,"text"),je.setAttribute("x",me.points[0].x.toString()),je.setAttribute("y",me.points[0].y.toString()),je.setAttribute("fill",me.strokeColor),je.setAttribute("font-size",(me.fontSize||16).toString()),je.setAttribute("font-family",me.fontFamily||"Arial"),je.setAttribute("text-anchor","middle"),je.setAttribute("dominant-baseline","middle"),je.textContent=me.text||"";break;case"rectangle":case"square":je=document.createElementNS(te,"rect"),je.setAttribute("x",me.points[0].x.toString()),je.setAttribute("y",me.points[0].y.toString()),je.setAttribute("width",me.width.toString()),je.setAttribute("height",me.height.toString());break;case"triangle":case"polygon":je=document.createElementNS(te,"polygon");const Pr=me.vertices.map(nt=>`${nt.x},${nt.y}`).join(" ");je.setAttribute("points",Pr);break}je&&(Object.entries(_s).forEach(([Pr,nt])=>{nt&&je.setAttribute(Pr,nt)}),he.appendChild(je))}),he.outerHTML},J=()=>{const te=re();te&&e&&e(te),z(!0)},de=te=>{g(te);const he=l.find(me=>me.selected);he&&V({...he,strokeColor:te})},ce=te=>{w(te);const he=l.find(me=>me.selected);he&&V({...he,strokeWidth:te})},ne=te=>{S(te);const he=l.find(me=>me.selected);he&&V({...he,strokeDasharray:te})},Se=te=>{A(te);const he=l.find(me=>me.selected);he&&V({...he,backgroundColor:te})},_e=te=>{b(te);const he=l.find(me=>me.selected);he&&V({...he,opacity:te})},Ae=()=>{u(te=>{const he=te.filter(me=>!me.selected);return t==null||t(he),he})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[s.jsx(Nb,{basicShapes:X,polygons:ee,selectedTool:n,mode:h,onToolSelect:a,onModeChange:m}),s.jsx("div",{className:"p-4",children:s.jsx(_b,{shapes:l,selectedTool:n,mode:h,onShapeAdd:G,onShapeUpdate:V,onShapeSelect:ie,onShapeDelete:q,onDrawComplete:se})}),s.jsx(Cb,{strokeColor:x,strokeWidth:N,strokeDasharray:E,backgroundColor:D,opacity:j,selectedShape:l.find(te=>te.selected),onStrokeColorChange:de,onStrokeWidthChange:ce,onStrokeDasharrayChange:ne,onBackgroundColorChange:Se,onOpacityChange:_e,onShapeUpdate:V}),s.jsx("div",{className:"border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:Ae,disabled:!l.some(te=>te.selected),className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Supprimer sélection"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:W,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Réinitialiser"}),s.jsxs("button",{onClick:J,className:"flex items-center px-4 py-2 text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})]})]})})]}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>z(!1),children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:te=>te.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Aperçu de la figure"}),s.jsx("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:"×"})]}),$&&s.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("div",{className:"prose max-w-none whitespace-pre-wrap",children:$.split(/(\$[^$]+\$)/g).map((te,he)=>{if(te.startsWith("$")&&te.endsWith("$"))try{const me=te.slice(1,-1);return s.jsx("span",{className:"inline-flex items-center",children:s.jsx(Xt.InlineMath,{math:me})},he)}catch{return s.jsxs("span",{className:"text-red-500 bg-red-50 px-1 rounded",children:["Erreur: ",te]},he)}return s.jsx("span",{children:te},he)})})}),s.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-8 flex items-center justify-center",style:{minHeight:"400px"},children:s.jsx("svg",{width:"100%",height:"100%",viewBox:`${Y.x} ${Y.y} ${Y.width} ${Y.height}`,preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",children:l.map(te=>{if(te.type==="line"&&te.points){const[he,me]=te.points;return s.jsx("line",{x1:he.x,y1:he.y,x2:me.x,y2:me.y,stroke:te.strokeColor,strokeWidth:te.strokeWidth,strokeDasharray:te.strokeDasharray==="none"?"":te.strokeDasharray,vectorEffect:"non-scaling-stroke"},te.id)}if(te.type==="circle"&&te.points&&te.width){const he=te.points[0],me=te.width/2;return s.jsx("circle",{cx:he.x,cy:he.y,r:me,stroke:te.strokeColor,strokeWidth:te.strokeWidth,strokeDasharray:te.strokeDasharray==="none"?"":te.strokeDasharray,fill:te.backgroundColor||"transparent",fillOpacity:te.opacity,vectorEffect:"non-scaling-stroke"},te.id)}if(te.type==="ellipse"&&te.points&&te.width&&te.height){const he=te.points[0];return s.jsx("ellipse",{cx:he.x,cy:he.y,rx:te.width/2,ry:te.height/2,stroke:te.strokeColor,strokeWidth:te.strokeWidth,strokeDasharray:te.strokeDasharray==="none"?"":te.strokeDasharray,fill:te.backgroundColor||"transparent",fillOpacity:te.opacity,vectorEffect:"non-scaling-stroke"},te.id)}if(te.vertices){const he=te.vertices.map((me,je)=>`${je===0?"M":"L"} ${me.x},${me.y}`).join(" ")+" Z";return s.jsx("path",{d:he,stroke:te.strokeColor,strokeWidth:te.strokeWidth,strokeDasharray:te.strokeDasharray==="none"?"":te.strokeDasharray,fill:te.backgroundColor||"transparent",fillOpacity:te.opacity,vectorEffect:"non-scaling-stroke"},te.id)}return null})})}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:"Fermer"})})]})})]})}function Tb({onSave:e}){const[t,r]=F.useState(3),[n,a]=F.useState(3),[l,u]=F.useState(Array(3).fill(null).map(()=>Array(3).fill(null).map(()=>({content:"",isHeader:!1})))),[h,m]=F.useState(null),[x,g]=F.useState(""),[N,w]=F.useState(!1),[E,S]=F.useState(!1),D=()=>{r(t+1),u([...l,Array(n).fill(null).map(()=>({content:"",isHeader:!1}))])},A=()=>{a(n+1),u(l.map(ee=>[...ee,{content:"",isHeader:!1}]))},j=ee=>{t>1&&(r(t-1),u(l.filter((G,V)=>V!==ee)))},b=ee=>{n>1&&(a(n-1),u(l.map(G=>G.filter((V,ie)=>ie!==ee))))},C=(ee,G)=>{m({row:ee,col:G}),g(l[ee][G].content)},z=()=>{if(h){const ee=l.map((G,V)=>G.map((ie,q)=>V===h.row&&q===h.col?{...ie,content:x}:ie));u(ee),m(null),g("")}},$=()=>{const ee=!N;if(w(ee),ee&&l.length>0){const G=[...l];G[0]=G[0].map(V=>({...V,isHeader:!0})),u(G)}else if(l.length>0){const G=[...l];G[0]=G[0].map(V=>({...V,isHeader:!1})),u(G)}},U=()=>{const ee=!E;S(ee);const G=l.map(V=>{const ie=[...V];return ie.length>0&&(ie[0]={...ie[0],isHeader:ee}),ie});u(G)},Y=ee=>ee?ee.split(/(\$[^$]+\$)/g).map((V,ie)=>{if(V.startsWith("$")&&V.endsWith("$"))try{const q=V.slice(1,-1);return s.jsx("span",{className:"inline-flex items-center",children:s.jsx(Xt.InlineMath,{math:q})},ie)}catch{return s.jsx("span",{className:"text-red-500",children:V},ie)}return s.jsx("span",{children:V},ie)}):null,Z=()=>{let ee='<table class="min-w-full border-collapse border border-gray-300">';return l.forEach((G,V)=>{ee+="<tr>",G.forEach((ie,q)=>{const se=ie.isHeader?"th":"td",W=ie.isHeader?"border border-gray-300 px-4 py-2 bg-gray-100 font-semibold":"border border-gray-300 px-4 py-2";ee+=`<${se} class="${W}">${ie.content||""}</${se}>`}),ee+="</tr>"}),ee+="</table>",ee},X=()=>{const ee=Z();e&&e(ee)};return s.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Éditeur de Tableaux"}),s.jsxs("div",{className:"mb-4 flex gap-4 items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:D,className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center",children:[s.jsx(ct,{className:"h-4 w-4 mr-1"}),"Ajouter ligne"]}),s.jsxs("button",{onClick:A,className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center",children:[s.jsx(ct,{className:"h-4 w-4 mr-1"}),"Ajouter colonne"]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:N,onChange:$,className:"rounded"}),s.jsx("span",{className:"text-sm",children:"Ligne d'en-tête"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:U,className:"rounded"}),s.jsx("span",{className:"text-sm",children:"Colonne d'en-tête"})]})]})]}),s.jsx("div",{className:"overflow-auto border rounded-lg mb-4",children:s.jsx("table",{className:"min-w-full border-collapse",children:s.jsxs("tbody",{children:[l.map((ee,G)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border-r border-gray-300 bg-gray-50 px-2 py-1 w-10 text-center",children:t>1&&s.jsx("button",{onClick:()=>j(G),className:"text-red-600 hover:bg-red-50 p-1 rounded",title:"Supprimer ligne",children:s.jsx(Jt,{className:"h-3 w-3"})})}),ee.map((V,ie)=>s.jsx("td",{className:`border border-gray-300 px-4 py-2 cursor-pointer hover:bg-gray-50 ${V.isHeader?"bg-gray-100 font-semibold":""}`,onClick:()=>C(G,ie),children:V.content?Y(V.content):s.jsx("span",{className:"text-gray-400 italic",children:"Cliquer pour éditer"})},ie))]},G)),n>0&&s.jsxs("tr",{children:[s.jsx("td",{className:"border-r border-gray-300 bg-gray-50"}),Array(n).fill(null).map((ee,G)=>s.jsx("td",{className:"border-t border-gray-300 bg-gray-50 px-2 py-1 text-center",children:n>1&&s.jsx("button",{onClick:()=>b(G),className:"text-red-600 hover:bg-red-50 p-1 rounded",title:"Supprimer colonne",children:s.jsx(Jt,{className:"h-3 w-3"})})},G))]})]})})}),h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Éditer cellule (",h.row+1,", ",h.col+1,")"]}),s.jsx("textarea",{value:x,onChange:ee=>g(ee.target.value),className:"w-full p-2 border rounded mb-4 h-32",placeholder:"Entrez du texte ou des équations avec $...$"}),s.jsxs("div",{className:"mb-4 p-3 border rounded bg-gray-50",children:[s.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Aperçu:"}),x?Y(x):s.jsx("span",{className:"text-gray-400 italic",children:"Vide"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{m(null),g("")},className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{onClick:z,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Enregistrer"})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:X,className:"flex items-center px-6 py-3 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(Yn,{className:"h-5 w-5 mr-2"}),"Enregistrer le tableau"]})})]})}function Xs({initialContent:e="",onChange:t,hideSendButton:r=!1}){const[n,a]=F.useState(!1),[l,u]=F.useState(e),[h,m]=F.useState(""),[x,g]=F.useState(0),[N,w]=F.useState(null),[E,S]=F.useState("math"),[D,A]=F.useState([]),[j,b]=F.useState([]);F.useEffect(()=>{if(t){let G=l;D.length>0&&(G+=`
`+D.join(`
`)),t(G)}},[l,D]);const C=G=>{w(G),a(!1)},z=()=>{sessionStorage.setItem("mathEditorText",l),console.log("Contenu sauvegardé:",l)},$=async()=>{try{if(!l.trim()){alert("Veuillez saisir du contenu avant d'envoyer");return}const{data:{user:G}}=await pe.auth.getUser(),{data:V,error:ie}=await pe.from("questions").insert([{text:l,figure_data:j.length>0?j:null,subject:"Mathématiques",level:"3e",module:"Algèbre",difficulty:"Moyen",created_by:(G==null?void 0:G.id)||null}]).select();if(ie){console.error("Supabase error:",ie),alert("Erreur lors de l'enregistrement: "+ie.message);return}alert("Question enregistrée avec succès!"),u(""),b([])}catch(G){console.error("Erreur:",G),alert("Erreur lors de l'enregistrement de la question")}},U=G=>{const V=G.target;g(V.selectionStart)},Y=()=>{if(!h)return;const G=`$${h}$`,V=l.slice(0,x)+G+l.slice(x);u(V),m("")},Z=G=>{A(V=>[...V,G]),S("math")},X=G=>{b(G)},ee=G=>{const V=l+`
`+G;u(V),S("math")};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:s.jsxs("div",{className:"flex border-b",children:[s.jsx("button",{onClick:()=>S("math"),className:`flex-1 px-4 py-3 text-sm font-medium text-center ${E==="math"?"border-b-2 border-[#4F6D0B] text-[#4F6D0B]":"text-gray-500 hover:text-gray-700"}`,children:"Éditeur d'équations"}),s.jsx("button",{onClick:()=>S("figure"),className:`flex-1 px-4 py-3 text-sm font-medium text-center ${E==="figure"?"border-b-2 border-[#4F6D0B] text-[#4F6D0B]":"text-gray-500 hover:text-gray-700"}`,children:"Éditeur de figures"}),s.jsx("button",{onClick:()=>S("table"),className:`flex-1 px-4 py-3 text-sm font-medium text-center ${E==="table"?"border-b-2 border-[#4F6D0B] text-[#4F6D0B]":"text-gray-500 hover:text-gray-700"}`,children:"Éditeur de tableaux"})]})}),E==="math"?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[s.jsxs("div",{className:"relative",children:[s.jsx(yb,{onSymbolsClick:()=>a(!n)}),n&&s.jsx(bb,{onSymbolSelect:C})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texte"}),s.jsx("textarea",{value:l,onChange:G=>u(G.target.value),onClick:U,className:"w-full min-h-[200px] p-4 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B] resize-none font-mono",placeholder:"Commencez à écrire votre texte..."})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Équation"}),s.jsx("button",{onClick:Y,disabled:!h,className:"px-3 py-1.5 text-sm text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Insérer l'équation"})]}),s.jsx(wb,{onChange:m,onInsertSymbol:N})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aperçu"}),s.jsx("div",{className:"border rounded-lg p-4 min-h-[200px] bg-gray-50",children:s.jsx(jb,{content:l,figures:D})})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsxs("button",{onClick:z,className:"flex items-center px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Enregistrer"]}),!r&&s.jsxs("button",{onClick:$,className:"flex items-center px-4 py-2 text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ea,{className:"h-4 w-4 mr-2"}),"Envoyer"]})]})})]}):E==="figure"?s.jsx(Eb,{onSave:Z,onShapesChange:X,shapes:j}):s.jsx(Tb,{onSave:ee})]})})}function Db({onBack:e}){const[t,r]=F.useState(null),[n,a]=F.useState(!0);F.useEffect(()=>{const m=sessionStorage.getItem("previewQuestionId");m?l(m):a(!1)},[]);const l=async m=>{try{const{data:x,error:g}=await pe.from("questions").select("*").eq("id",m).maybeSingle();if(g)throw g;r(x)}catch(x){console.error("Erreur:",x)}finally{a(!1)}},u=m=>m.split(/(\$\$[^$]+\$\$|\$[^$]+\$)/g).map((g,N)=>{if(g.startsWith("$$")&&g.endsWith("$$")){const w=g.slice(2,-2);return s.jsx(Xt.BlockMath,{math:w},N)}else if(g.startsWith("$")&&g.endsWith("$")){const w=g.slice(1,-1);return s.jsx(Xt.InlineMath,{math:w},N)}return s.jsx("span",{children:g},N)}),h=m=>({beginner:"Débutant",progressive:"Progressif",medium:"Moyen",difficult:"Difficile",advanced:"Approfondi",legend:"Légende"})[m||""]||"Difficile";return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"text-lg text-gray-600",children:"Chargement..."})}):t?s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Question 1 sur 10"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-gray-700",children:"Niveau de difficulté :"}),s.jsx("span",{className:"px-4 py-1.5 bg-orange-50 text-orange-700 rounded-lg text-sm font-medium",children:h(t.difficulty)})]})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-8 mb-8",children:[s.jsx("div",{className:"text-gray-800 text-lg leading-relaxed",children:u(t.text)}),t.figure_data&&t.figure_data.length>0&&(()=>{const x=(()=>{let g=1/0,N=1/0,w=-1/0,E=-1/0;t.figure_data.forEach(j=>{const b=j.points||[];switch(j.type){case"line":b.length>=2&&(g=Math.min(g,b[0].x,b[1].x),w=Math.max(w,b[0].x,b[1].x),N=Math.min(N,b[0].y,b[1].y),E=Math.max(E,b[0].y,b[1].y));break;case"circle":if(b.length>=1){const C=j.width?j.width/2:50;g=Math.min(g,b[0].x-C),w=Math.max(w,b[0].x+C),N=Math.min(N,b[0].y-C),E=Math.max(E,b[0].y+C)}break;case"rectangle":if(b.length>=1){const C=j.width||100,z=j.height||100;g=Math.min(g,b[0].x),w=Math.max(w,b[0].x+C),N=Math.min(N,b[0].y),E=Math.max(E,b[0].y+z)}break;case"triangle":if(b.length>=1){const C=j.width||100,z=j.height||100;g=Math.min(g,b[0].x),w=Math.max(w,b[0].x+C),N=Math.min(N,b[0].y),E=Math.max(E,b[0].y+z)}break;case"polygon":b.length>=3&&b.forEach(C=>{g=Math.min(g,C.x),w=Math.max(w,C.x),N=Math.min(N,C.y),E=Math.max(E,C.y)});break}});const S=20,D=w-g+S*2,A=E-N+S*2;return{x:g-S,y:N-S,width:D,height:A}})();return s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx("svg",{width:"600",height:"400",viewBox:`${x.x} ${x.y} ${x.width} ${x.height}`,preserveAspectRatio:"xMidYMid meet",children:t.figure_data.map((g,N)=>{const w=g.points||[];switch(g.type){case"line":return w.length>=2?s.jsx("line",{x1:w[0].x,y1:w[0].y,x2:w[1].x,y2:w[1].y,stroke:g.strokeColor||"#000",strokeWidth:g.strokeWidth||2,strokeDasharray:g.strokeDasharray==="dashed"?"5,5":"none",opacity:g.opacity||1},g.id||N):null;case"circle":if(w.length>=1){const E=g.width?g.width/2:50;return s.jsx("circle",{cx:w[0].x,cy:w[0].y,r:E,fill:g.backgroundColor!=="transparent"?g.backgroundColor:"none",stroke:g.strokeColor||"#000",strokeWidth:g.strokeWidth||2,strokeDasharray:g.strokeDasharray==="dashed"?"5,5":"none",opacity:g.opacity||1},g.id||N)}return null;case"rectangle":return w.length>=1?s.jsx("rect",{x:w[0].x,y:w[0].y,width:g.width||100,height:g.height||100,fill:g.backgroundColor!=="transparent"?g.backgroundColor:"none",stroke:g.strokeColor||"#000",strokeWidth:g.strokeWidth||2,strokeDasharray:g.strokeDasharray==="dashed"?"5,5":"none",opacity:g.opacity||1},g.id||N):null;case"triangle":if(w.length>=1){const E=g.width||100,S=g.height||100,D=w[0].x,A=w[0].y,j=`${D},${A+S} ${D+E/2},${A} ${D+E},${A+S}`;return s.jsx("polygon",{points:j,fill:g.backgroundColor!=="transparent"?g.backgroundColor:"none",stroke:g.strokeColor||"#000",strokeWidth:g.strokeWidth||2,strokeDasharray:g.strokeDasharray==="dashed"?"5,5":"none",opacity:g.opacity||1},g.id||N)}return null;case"polygon":if(w.length>=3){const E=w.map(S=>`${S.x},${S.y}`).join(" ");return s.jsx("polygon",{points:E,fill:g.backgroundColor!=="transparent"?g.backgroundColor:"none",stroke:g.strokeColor||"#000",strokeWidth:g.strokeWidth||2,strokeDasharray:g.strokeDasharray==="dashed"?"5,5":"none",opacity:g.opacity||1},g.id||N)}return null;default:return null}})})})})()]}),s.jsx("div",{className:"border-t border-gray-200 pt-8",children:s.jsxs("div",{className:"bg-orange-50 rounded-lg p-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"text-gray-900 font-semibold",children:"Q."})}),s.jsx("p",{className:"text-gray-700 mb-6",children:"Question à développer ou choix multiples apparaîtra ici"})]})})]})})}):s.jsxs("div",{className:"p-8",children:[s.jsxs("button",{onClick:e,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[s.jsx(Os,{className:"h-5 w-5 mr-2"}),"Retour"]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsx("p",{className:"text-gray-600",children:"Aucune question sélectionnée"})})]})}function Mb({program:e,onClose:t,onEnroll:r,onOpenDiscussion:n}){const[a,l]=F.useState(!1),[u,h]=F.useState(!0),[m,x]=F.useState([]),[g,N]=F.useState({}),[w,E]=F.useState({});F.useEffect(()=>{S(),D()},[]);const S=async()=>{try{const C=sessionStorage.getItem("currentUser");if(!C){h(!1);return}const z=JSON.parse(C),{data:$}=await pe.from("program_enrollments").select("id").eq("program_id",e.id).eq("student_id",z.id).maybeSingle();l(!!$)}catch(C){console.error("Error checking enrollment:",C)}finally{h(!1)}},D=async()=>{try{const{data:C,error:z}=await pe.from("program_modules").select("*").eq("program_id",e.id).order("order_number",{ascending:!0});if(z)throw z;x(C||[]);const $={};for(const U of C||[]){const{data:Y}=await pe.from("program_lessons").select("id, title, order_number, module_id").eq("module_id",U.id).order("order_number",{ascending:!0});$[U.id]=Y||[]}N($)}catch(C){console.error("Error loading modules:",C)}},A=()=>{r(e.id),l(!0)},j=C=>{E(z=>({...z,[C]:!z[C]}))},b=C=>C?C.split(`
`).filter(z=>z.trim().length>0):[];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.title}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ss,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"h-64 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-full",children:e.subject}),s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm font-semibold rounded-full",children:e.level})]}),e.is_free?s.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 font-bold rounded-full",children:"Gratuit"}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vn,{className:"w-5 h-5 text-gray-600"}),s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[e.price," FCFA"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(At,{className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Durée"}),s.jsxs("div",{className:"font-semibold",children:[e.duration_weeks," semaines"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(bt,{className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Leçons"}),s.jsx("div",{className:"font-semibold",children:e.total_lessons||0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(Dr,{className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Exercices"}),s.jsx("div",{className:"font-semibold",children:e.total_exercises||0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(Mr,{className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Élèves"}),s.jsx("div",{className:"font-semibold",children:"0"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600",children:e.description})]}),e.learning_outcomes&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center space-x-2",children:[s.jsx(Fl,{className:"w-5 h-5 text-[#4F6D0B]"}),s.jsx("span",{children:"Objectifs d'apprentissage"})]}),s.jsx("div",{className:"space-y-2",children:b(e.learning_outcomes).map((C,z)=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(zl,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),s.jsx("span",{className:"text-gray-700",children:C})]},z))})]}),m.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Contenu du programme"}),s.jsx("div",{className:"space-y-3",children:m.map((C,z)=>{var $,U;return s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>j(C.id),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-[#4F6D0B] text-white rounded-full flex items-center justify-center font-bold",children:String(z+1).padStart(2,"0")}),s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:C.title}),s.jsxs("p",{className:"text-sm text-gray-500",children:[(($=g[C.id])==null?void 0:$.length)||0," leçon",(((U=g[C.id])==null?void 0:U.length)||0)>1?"s":"",C.duration_hours>0&&` • ${C.duration_hours}h`]})]})]}),w[C.id]?s.jsx(f1,{className:"w-5 h-5 text-gray-400"}):s.jsx(Wn,{className:"w-5 h-5 text-gray-400"})]}),w[C.id]&&s.jsxs("div",{className:"p-4 bg-white border-t",children:[C.description&&s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:C.description}),g[C.id]&&g[C.id].length>0&&s.jsx("div",{className:"space-y-2",children:g[C.id].map(Y=>s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700 pl-2",children:[s.jsx(zl,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:Y.title})]},Y.id))})]})]},C.id)})})]}),e.target_audience&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Public cible"}),s.jsx("p",{className:"text-gray-600",children:e.target_audience})]}),e.prerequisites&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Prérequis"}),s.jsx("p",{className:"text-gray-600",children:e.prerequisites})]}),s.jsxs("div",{className:"flex space-x-4 pt-4",children:[s.jsxs("button",{onClick:()=>n(e.id),className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 border-2 border-[#4F6D0B] text-[#4F6D0B] rounded-lg font-semibold hover:bg-[#4F6D0B]/5 transition",children:[s.jsx(Xi,{className:"w-5 h-5"}),s.jsx("span",{children:"Discussion"})]}),!u&&(a?s.jsx("button",{disabled:!0,className:"flex-1 px-6 py-3 bg-gray-300 text-gray-600 rounded-lg font-semibold cursor-not-allowed",children:"Déjà inscrit"}):s.jsx("button",{onClick:A,className:"flex-1 px-6 py-3 bg-[#4F6D0B] text-white rounded-lg font-semibold hover:bg-[#4F6D0B]/90 transition",children:"S'inscrire maintenant"}))]})]})]})})}function Ab({programId:e,programTitle:t,onClose:r}){const[n,a]=F.useState([]),[l,u]=F.useState(""),[h,m]=F.useState(null),[x,g]=F.useState(""),[N,w]=F.useState(!0),[E,S]=F.useState(!1);F.useEffect(()=>{D()},[]);const D=async()=>{try{const{data:C,error:z}=await pe.from("program_comments").select(`
          *,
          user:local_users(first_name, last_name, user_type)
        `).eq("program_id",e).is("parent_comment_id",null).order("created_at",{ascending:!1});if(z)throw z;const $=await Promise.all((C||[]).map(async U=>{const{data:Y}=await pe.from("program_comments").select(`
              *,
              user:local_users(first_name, last_name, user_type)
            `).eq("parent_comment_id",U.id).order("created_at",{ascending:!0});return{...U,replies:Y||[]}}));a($)}catch(C){console.error("Error loading comments:",C)}finally{w(!1)}},A=async()=>{if(l.trim()){S(!0);try{const C=sessionStorage.getItem("currentUser");if(!C){alert("Vous devez être connecté pour commenter");return}const z=JSON.parse(C),{error:$}=await pe.from("program_comments").insert({program_id:e,user_id:z.id,content:l.trim()});if($)throw $;u(""),await D()}catch(C){console.error("Error posting comment:",C),alert("Erreur lors de la publication du commentaire")}finally{S(!1)}}},j=async C=>{if(x.trim()){S(!0);try{const z=sessionStorage.getItem("currentUser");if(!z){alert("Vous devez être connecté pour répondre");return}const $=JSON.parse(z),{error:U}=await pe.from("program_comments").insert({program_id:e,user_id:$.id,content:x.trim(),parent_comment_id:C});if(U)throw U;g(""),m(null),await D()}catch(z){console.error("Error posting reply:",z),alert("Erreur lors de la publication de la réponse")}finally{S(!1)}}},b=C=>{const z=new Date(C),U=new Date().getTime()-z.getTime(),Y=Math.floor(U/6e4),Z=Math.floor(U/36e5),X=Math.floor(U/864e5);return Y<60?`Il y a ${Y} minute${Y>1?"s":""}`:Z<24?`Il y a ${Z} heure${Z>1?"s":""}`:X<7?`Il y a ${X} jour${X>1?"s":""}`:z.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Discussion"}),s.jsx("p",{className:"text-sm text-gray-600",children:t})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ss,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:N?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Chargement des commentaires..."}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Xi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Aucun commentaire pour le moment"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Soyez le premier à commenter"})]}):n.map(C=>s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(ta,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"font-semibold text-gray-900",children:[C.user.first_name," ",C.user.last_name,s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:C.user.user_type})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:b(C.created_at)}),C.is_edited&&s.jsx("span",{children:"(modifié)"})]})]}),s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:C.content})]}),s.jsx("button",{onClick:()=>m(C.id),className:"text-sm text-[#4F6D0B] hover:text-[#4F6D0B]/80 mt-2",children:"Répondre"}),h===C.id&&s.jsxs("div",{className:"mt-3 flex space-x-2",children:[s.jsx("input",{type:"text",value:x,onChange:z=>g(z.target.value),placeholder:"Écrivez votre réponse...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",onKeyPress:z=>z.key==="Enter"&&j(C.id)}),s.jsx("button",{onClick:()=>j(C.id),disabled:E||!x.trim(),className:"px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90 transition disabled:opacity-50",children:s.jsx(ea,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{m(null),g("")},className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Annuler"})]}),C.replies&&C.replies.length>0&&s.jsx("div",{className:"ml-8 mt-4 space-y-3",children:C.replies.map(z=>s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(ta,{className:"w-4 h-4 text-gray-500"})}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"font-semibold text-sm text-gray-900",children:[z.user.first_name," ",z.user.last_name,s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:z.user.user_type})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:b(z.created_at)})]})]}),s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:z.content})]})})]},z.id))})]})]})},C.id))}),s.jsx("div",{className:"border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:l,onChange:C=>u(C.target.value),placeholder:"Ajouter un commentaire...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",onKeyPress:C=>C.key==="Enter"&&A()}),s.jsxs("button",{onClick:A,disabled:E||!l.trim(),className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg font-medium hover:bg-[#4F6D0B]/90 transition disabled:opacity-50 flex items-center space-x-2",children:[s.jsx(ea,{className:"w-5 h-5"}),s.jsx("span",{children:"Envoyer"})]})]})})]})})}function Bb({onClose:e,onSelectProgram:t}){const[r,n]=F.useState([]),[a,l]=F.useState([]),[u,h]=F.useState(!0),[m,x]=F.useState([]),[g,N]=F.useState(""),[w,E]=F.useState(""),[S,D]=F.useState(""),[A,j]=F.useState(""),[b,C]=F.useState(!1),[z,$]=F.useState(""),[U,Y]=F.useState(""),[Z,X]=F.useState(""),ee=["Mathématiques","Physique","Chimie","SVT","Français","Anglais","Histoire-Géo","Philosophie"],G=["6e","5e","4e","3e","2nd","1ere","Tle"];F.useEffect(()=>{V()},[]),F.useEffect(()=>{q()},[r,g,w,S,A,b,z,U,Z]),F.useEffect(()=>{w&&S?ie():(x([]),j(""))},[w,S]);const V=async()=>{try{const{data:W,error:re}=await pe.from("programs").select("*").eq("is_active",!0);if(re)throw re;n(W||[]),l(W||[])}catch(W){console.error("Error loading programs:",W)}finally{h(!1)}},ie=async()=>{try{const{data:W}=await pe.from("programs").select("id").eq("subject",w).eq("level",S).eq("is_active",!0);if(!W||W.length===0){x([]);return}const re=W.map(ne=>ne.id),{data:J,error:de}=await pe.from("program_modules").select("title").in("program_id",re);if(de)throw de;const ce=[...new Set((J||[]).map(ne=>ne.title))];x(ce)}catch(W){console.error("Error loading modules:",W),x([])}},q=async()=>{let W=[...r];if(g&&(W=W.filter(re=>re.title.toLowerCase().includes(g.toLowerCase())||re.description.toLowerCase().includes(g.toLowerCase()))),w&&(W=W.filter(re=>re.subject===w)),S&&(W=W.filter(re=>re.level===S)),A){const re=[];for(const J of W){const{data:de}=await pe.from("program_modules").select("id").eq("program_id",J.id).eq("title",A).limit(1);de&&de.length>0&&re.push(J.id)}W=W.filter(J=>re.includes(J.id))}if(b&&(W=W.filter(re=>re.is_free)),z){const re=parseFloat(z);W=W.filter(J=>J.is_free||J.price<=re)}if(U){const re=parseInt(U);W=W.filter(J=>J.duration_weeks>=re)}if(Z){const re=parseInt(Z);W=W.filter(J=>J.duration_weeks<=re)}l(W)},se=()=>{N(""),E(""),D(""),j(""),C(!1),$(""),Y(""),X("")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ks,{className:"w-6 h-6 text-[#4F6D0B]"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Trouver un programme"})]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ss,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:g,onChange:W=>N(W.target.value),placeholder:"Rechercher par titre ou description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matière"}),s.jsxs("select",{value:w,onChange:W=>E(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Toutes"}),ee.map(W=>s.jsx("option",{value:W,children:W},W))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau"}),s.jsxs("select",{value:S,onChange:W=>D(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Tous"}),G.map(W=>s.jsx("option",{value:W,children:W},W))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module"}),s.jsxs("select",{value:A,onChange:W=>j(W.target.value),disabled:!w||!S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B] disabled:bg-gray-100 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"",children:"Tous les modules"}),m.map(W=>s.jsx("option",{value:W,children:W},W))]}),(!w||!S)&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sélectionnez une matière et un niveau"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix maximum (FCFA)"}),s.jsx("input",{type:"number",value:z,onChange:W=>$(W.target.value),placeholder:"Aucune limite",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (semaines)"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:U,onChange:W=>Y(W.target.value),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"}),s.jsx("input",{type:"number",value:Z,onChange:W=>X(W.target.value),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:W=>C(W.target.checked),className:"w-4 h-4 text-[#4F6D0B] border-gray-300 rounded focus:ring-[#4F6D0B]"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Programmes gratuits uniquement"})]}),s.jsx("button",{onClick:se,className:"text-sm text-[#4F6D0B] hover:text-[#4F6D0B]/80 font-medium",children:"Réinitialiser les filtres"})]}),s.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[a.length," programme",a.length>1?"s":""," trouvé",a.length>1?"s":""]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Chargement des programmes..."}):a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ca,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Aucun programme ne correspond à vos critères"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Essayez de modifier vos filtres"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(W=>s.jsxs("div",{onClick:()=>t(W),className:"bg-white border border-gray-200 rounded-lg hover:border-[#4F6D0B] hover:shadow-md transition cursor-pointer p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded",children:W.subject}),s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-semibold rounded",children:W.level})]}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:W.title})]}),W.is_free?s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"Gratuit"}):s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[W.price," FCFA"]})]}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:W.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(At,{className:"w-4 h-4"}),s.jsxs("span",{children:[W.duration_weeks," sem."]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(bt,{className:"w-4 h-4"}),s.jsxs("span",{children:[W.total_lessons||0," leçons"]})]})]})]},W.id))})})]})})}function zb({onQuickQuizStart:e}){const[t,r]=F.useState([]),[n,a]=F.useState(!0),[l,u]=F.useState(null),[h,m]=F.useState(null),[x,g]=F.useState(""),[N,w]=F.useState(!1);F.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:A,error:j}=await pe.from("programs").select("*").eq("is_active",!0);if(j)throw j;r(A||[])}catch(A){console.error("Error loading programs:",A)}finally{a(!1)}},S=async A=>{try{const j=sessionStorage.getItem("currentUser");if(console.log("DEBUG - User string:",j),!j){alert("Vous devez être connecté pour vous inscrire");return}const b=JSON.parse(j);console.log("DEBUG - User object:",b);const C=t.find(Y=>Y.id===A);if(console.log("DEBUG - Program:",C),!C){alert("Programme non trouvé");return}const z={program_id:A,student_id:b.id,payment_status:C.is_free?"free":"pending",payment_amount:C.is_free?0:C.price};console.log("DEBUG - Enrollment data:",z);const{data:$,error:U}=await pe.from("program_enrollments").insert(z).select();if(console.log("DEBUG - Response data:",$),console.log("DEBUG - Response error:",U),U){console.error("Full error object:",JSON.stringify(U,null,2)),U.code==="23505"?alert("Vous êtes déjà inscrit à ce programme"):alert(`Erreur lors de l'inscription: ${U.message}`);return}alert("Inscription réussie !"),u(null)}catch(j){console.error("Error enrolling:",j),alert(`Erreur lors de l'inscription: ${j.message||"Erreur inconnue"}`)}},D=A=>{const j=t.find(b=>b.id===A);j&&(m(A),g(j.title),u(null))};return s.jsxs("div",{className:"space-y-8 p-8",children:[s.jsxs("div",{className:"relative bg-gradient-to-r from-[#4F6D0B] to-[#7DA81E] overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black opacity-5"}),s.jsx("div",{className:"relative p-12 text-white",children:s.jsxs("div",{className:"max-w-2xl",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Testez votre niveau gratuitement"}),s.jsx("p",{className:"text-xl mb-2 text-white/90",children:"Découvrez vos points forts et identifiez vos axes d'amélioration"}),s.jsx("p",{className:"text-lg mb-6 text-white/80",children:"Un test pour évaluer vos compétences et recevoir des recommandations personnalisées"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-6 py-3 bg-white text-[#4F6D0B] font-semibold hover:bg-gray-100 transition",children:[s.jsx(Zi,{className:"w-5 h-5"}),s.jsx("span",{children:"Commencer le Test Niveau 0"})]}),s.jsx("button",{className:"px-6 py-3 border-2 border-white text-white font-semibold hover:bg-white hover:text-[#4F6D0B] transition",children:"En savoir plus"})]})]})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Programmes de renforcement disponibles"}),s.jsx("p",{className:"text-gray-600",children:"Développez vos compétences avec nos programmes conçus par des enseignants expérimentés"})]}),s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white rounded-lg font-semibold hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(ks,{className:"w-5 h-5"}),s.jsx("span",{children:"Trouver un programme"})]})]}),n?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement des programmes..."})}):t.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(Dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun programme disponible"}),s.jsx("p",{className:"text-gray-500",children:"De nouveaux programmes seront bientôt disponibles"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(A=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition overflow-hidden",children:[s.jsx("div",{className:"h-48 bg-gradient-to-br from-blue-500 to-purple-600"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full",children:A.subject}),A.is_free?s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"Gratuit"}):s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[A.price," FCFA"]})]}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:A.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:A.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),s.jsxs("span",{children:[A.total_students||0," élèves"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(At,{className:"w-4 h-4"}),s.jsxs("span",{children:[A.duration_weeks," semaines"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(hn,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx(hn,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx(hn,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx(hn,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx(hn,{className:"w-4 h-4 text-gray-300 fill-current"})]}),s.jsx("span",{className:"text-xs",children:"(4.0)"})]}),s.jsx("button",{onClick:()=>u(A),className:"w-full py-2 bg-[#4F6D0B] text-white rounded-lg font-medium hover:bg-[#4F6D0B]/90 transition",children:"Voir détails"})]})]},A.id))})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Pourquoi rejoindre nos programmes de renforcement?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:s.jsx(Dr,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Enseignants qualifiés"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Apprenez avec des professeurs expérimentés et passionnés"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:s.jsx(At,{className:"w-6 h-6 text-green-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"À votre rythme"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Progressez selon votre emploi du temps et vos disponibilités"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:s.jsx(hn,{className:"w-6 h-6 text-purple-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suivi personnalisé"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Recevez un accompagnement adapté à vos besoins spécifiques"})]})]})]}),s.jsxs("div",{className:"bg-white shadow-sm p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"L'importance du renforcement continu"}),s.jsxs("div",{className:"prose max-w-none text-gray-600",children:[s.jsx("p",{className:"mb-4",children:"Le renforcement scolaire continu est essentiel pour consolider vos acquis et combler vos lacunes. En participant régulièrement à nos programmes, vous développerez des compétences solides et durables."}),s.jsx("p",{className:"mb-4",children:"Nos programmes sont conçus pour compléter votre apprentissage en classe avec des exercices pratiques, des explications détaillées et un suivi personnalisé de votre progression."}),s.jsx("p",{children:"Ne laissez pas les difficultés s'accumuler. Investissez dans votre réussite dès aujourd'hui et rejoignez des milliers d'élèves qui ont transformé leurs résultats scolaires grâce à nos programmes."})]})]}),l&&s.jsx(Mb,{program:l,onClose:()=>u(null),onEnroll:S,onOpenDiscussion:D}),h&&s.jsx(Ab,{programId:h,programTitle:x,onClose:()=>m(null)}),N&&s.jsx(Bb,{onClose:()=>w(!1),onSelectProgram:A=>{w(!1),u(A)}})]})}function Fb({programId:e,onBack:t}){const[r,n]=F.useState(null),[a,l]=F.useState([]),[u,h]=F.useState({}),[m,x]=F.useState([]),[g,N]=F.useState(null),[w,E]=F.useState({}),[S,D]=F.useState(new Set),[A,j]=F.useState(!0);F.useEffect(()=>{b()},[e]);const b=async()=>{try{const{data:V}=await pe.from("programs").select("id, title").eq("id",e).single();V&&n(V);const{data:ie}=await pe.from("program_modules").select("*").eq("program_id",e).order("order_number",{ascending:!0});if(ie){const q={},se=[],W={},re=[];for(const J of ie){W[J.id]=!0;const{data:de}=await pe.from("program_lessons").select("id, title, sections, order_number, module_id, duration_minutes").eq("module_id",J.id).order("order_number",{ascending:!0}),ce=(de||[]).map(Se=>({...Se,sections:typeof Se.sections=="string"?JSON.parse(Se.sections):Se.sections})),ne=ce.reduce((Se,_e)=>Se+(_e.duration_minutes||0),0);re.push({...J,lesson_count:ce.length,total_duration:ne}),q[J.id]=ce,se.push(...ce)}l(re),h(q),x(se),E(W),se.length>0&&N(se[0])}C()}catch(V){console.error("Error loading program data:",V)}finally{j(!1)}},C=async()=>{try{const V=sessionStorage.getItem("currentUser");if(!V)return;const ie=JSON.parse(V),{data:q}=await pe.from("lesson_completions").select("lesson_id").eq("student_id",ie.id).eq("program_id",e);q&&D(new Set(q.map(se=>se.lesson_id)))}catch(V){console.error("Error loading completed lessons:",V)}},z=V=>{E(ie=>({...ie,[V]:!ie[V]}))},$=V=>{N(V),U()},U=async()=>{try{const V=sessionStorage.getItem("currentUser");if(!V)return;const ie=JSON.parse(V);await pe.from("program_enrollments").update({last_accessed_at:new Date().toISOString()}).eq("program_id",e).eq("student_id",ie.id)}catch(V){console.error("Error updating last accessed:",V)}},Y=async V=>{try{const ie=sessionStorage.getItem("currentUser");if(!ie)return;const q=JSON.parse(ie),{error:se}=await pe.from("lesson_completions").insert({lesson_id:V,student_id:q.id,program_id:e,completed_at:new Date().toISOString()});se||D(W=>new Set([...W,V]))}catch(ie){console.error("Error marking lesson complete:",ie)}},Z=()=>{if(!g)return;const V=m.findIndex(ie=>ie.id===g.id);if(V<m.length-1){const ie=m[V+1];N(ie),g.id&&Y(g.id)}},X=()=>{if(!g)return;const V=m.findIndex(ie=>ie.id===g.id);V>0&&N(m[V-1])},ee=()=>g?m.findIndex(V=>V.id===g.id)+1:0,G=V=>{if(!V)return null;const ie=V.split(/(\$\$[^$]+\$\$|\$[^$]+\$)/g);return s.jsx("div",{className:"space-y-4",children:ie.map((q,se)=>{if(q.startsWith("$$")&&q.endsWith("$$")){const re=q.slice(2,-2);return s.jsx("div",{className:"my-6",children:s.jsx(Xt.BlockMath,{math:re})},se)}else if(q.startsWith("$")&&q.endsWith("$")){const re=q.slice(1,-1);return s.jsx(Xt.InlineMath,{math:re},se)}const W=q.split(`
`);return s.jsx("div",{children:W.map((re,J)=>re.trim().startsWith("•")||re.trim().startsWith("-")?s.jsxs("div",{className:"flex items-start space-x-2 my-2",children:[s.jsx("span",{className:"text-[#4F6D0B] font-bold mt-1",children:"•"}),s.jsx("span",{dangerouslySetInnerHTML:{__html:re.replace(/^[•\-\s]+/,"")}})]},J):re.trim()===""?s.jsx("div",{className:"h-4"},J):s.jsx("p",{className:"my-2",dangerouslySetInnerHTML:{__html:re}},J))},se)})})};return A?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"text-gray-600",children:"Chargement..."})}):s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition",children:[s.jsx(Os,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Retour"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Leçon ",ee()," sur ",m.length]}),s.jsx("div",{className:"w-48 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-[#4F6D0B] h-2 rounded-full transition-all",style:{width:`${S.size/m.length*100}%`}})}),s.jsxs("div",{className:"text-sm font-semibold text-[#4F6D0B]",children:[Math.round(S.size/m.length*100),"%"]})]})]}),r&&s.jsx("h1",{className:"text-xl font-bold text-gray-900 mt-2",children:r.title})]}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx("div",{className:"w-96 bg-[#F7F9FA] border-r border-gray-200 overflow-y-auto",children:s.jsxs("div",{className:"py-6",children:[s.jsx("h2",{className:"px-6 text-lg font-bold text-gray-900 mb-4",children:"Contenu du cours"}),s.jsx("div",{className:"space-y-1",children:a.map((V,ie)=>{var se,W,re;const q=((se=u[V.id])==null?void 0:se.every(J=>S.has(J.id)))||!1;return(W=u[V.id])!=null&&W.length&&u[V.id].filter(J=>S.has(J.id)).length/u[V.id].length*100,s.jsxs("div",{className:"border-b border-gray-200 last:border-b-0",children:[s.jsxs("button",{onClick:()=>z(V.id),className:"w-full px-6 py-4 flex items-start justify-between hover:bg-white/50 transition group",children:[s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[q&&s.jsx(zl,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),s.jsx("h3",{className:"font-bold text-gray-900 text-base leading-tight",children:V.title})]}),s.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600 mt-2",children:[s.jsxs("span",{children:[V.lesson_count||0," / ",((re=u[V.id])==null?void 0:re.length)||0]}),V.total_duration&&s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsxs("span",{children:[V.total_duration," min"]})]})]})]}),w[V.id]?s.jsx(f1,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-1"}):s.jsx(Wn,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-1"})]}),w[V.id]&&u[V.id]&&s.jsx("div",{className:"pb-2",children:u[V.id].map((J,de)=>{const ce=S.has(J.id),ne=(g==null?void 0:g.id)===J.id;return s.jsxs("button",{onClick:()=>$(J),className:`w-full px-6 py-3 flex items-start space-x-3 transition ${ne?"bg-[#E3F2FD] border-l-4 border-[#1976D2]":"hover:bg-white/50 pl-[26px]"}`,children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:ce?s.jsx("div",{className:"w-6 h-6 bg-[#5B21B6] rounded-full flex items-center justify-center",children:s.jsx(zl,{className:"w-4 h-4 text-white"})}):s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${ne?"border-[#1976D2] bg-white":"border-gray-300"}`,children:ne&&s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#1976D2]"})})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 leading-snug mb-1",children:[de+1,". ",J.title]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[s.jsx(oa,{className:"w-3 h-3"}),s.jsx("span",{children:"1 min"})]})]})]},J.id)})})]},V.id)})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto bg-[#F5F5F5]",children:s.jsx("div",{className:"max-w-5xl mx-auto py-12 px-8",children:g?s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8 leading-tight",children:g.title}),g.sections&&g.sections.length>0?s.jsx("div",{className:"space-y-10",children:g.sections.map((V,ie)=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"prose prose-lg max-w-none",children:s.jsx("div",{className:"text-gray-800 leading-relaxed text-lg",children:G(V.content||"")})}),V.exercises&&V.exercises.length>0&&s.jsxs("div",{className:"mt-10 space-y-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Exercices pratiques"}),V.exercises.map((q,se)=>s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100 shadow-sm space-y-4",children:[q.title&&s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:q.title}),s.jsx("p",{className:"text-gray-800 text-base leading-relaxed",children:q.question_text}),q.exercise_type==="qcm"&&q.options&&s.jsx("div",{className:"space-y-3 mt-4",children:q.options.map((W,re)=>W&&s.jsxs("div",{className:"flex items-center space-x-3 bg-white rounded-lg p-4 hover:shadow-md transition cursor-pointer group",children:[s.jsx("input",{type:"radio",name:`exercise-${se}`,id:`ex-${se}-opt-${re}`,className:"w-5 h-5 text-[#4F6D0B] cursor-pointer"}),s.jsxs("label",{htmlFor:`ex-${se}-opt-${re}`,className:"text-gray-800 text-base flex-1 cursor-pointer group-hover:text-gray-900",children:[s.jsxs("span",{className:"font-semibold mr-2",children:[String.fromCharCode(65+re),"."]}),W]})]},re))}),q.correct_answer&&s.jsxs("details",{className:"mt-4",children:[s.jsx("summary",{className:"cursor-pointer text-sm text-[#4F6D0B] font-semibold hover:text-[#3d5509] flex items-center space-x-2",children:s.jsx("span",{children:"Afficher la réponse"})}),s.jsx("div",{className:"mt-3 p-4 bg-green-50 rounded-lg border border-green-200",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold text-green-800",children:"Réponse correcte:"})," ",q.correct_answer]})})]})]},se))]})]},ie))}):s.jsx("div",{className:"text-center text-gray-500 py-12",children:"Contenu de la leçon en cours de préparation..."}),s.jsxs("div",{className:"flex items-center justify-between pt-8 mt-8 border-t border-gray-200",children:[s.jsxs("button",{onClick:X,disabled:ee()===1,className:`flex items-center space-x-2 px-8 py-3 rounded-xl font-semibold transition shadow-sm ${ee()===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:[s.jsx(Os,{className:"w-5 h-5"}),s.jsx("span",{children:"Précédent"})]}),s.jsxs("button",{onClick:Z,disabled:ee()===m.length,className:`flex items-center space-x-2 px-8 py-3 rounded-xl font-semibold transition shadow-sm ${ee()===m.length?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#4F6D0B] text-white hover:bg-[#3d5509]"}`,children:[s.jsx("span",{children:"Suivant"}),s.jsx(Os,{className:"w-5 h-5 rotate-180"})]})]})]})}):s.jsx("div",{className:"text-center text-gray-500 py-12",children:"Sélectionnez une leçon pour commencer"})})})]})]})}function Pb({onViewChange:e,onSidebarVisibilityChange:t,onTopNavVisibilityChange:r}){const[n,a]=F.useState([]),[l,u]=F.useState(!0),[h,m]=F.useState(null);F.useEffect(()=>{x()},[]);const x=async()=>{try{const S=sessionStorage.getItem("currentUser");if(!S){u(!1);return}const D=JSON.parse(S);console.log("Loading programs for user:",D.id);const{data:A,error:j}=await pe.from("program_enrollments").select(`
          id,
          program_id,
          enrolled_at,
          payment_status,
          progress,
          last_accessed_at,
          program:programs(
            id,
            title,
            description,
            subject,
            level,
            duration_weeks,
            total_lessons,
            total_exercises
          )
        `).eq("student_id",D.id).order("last_accessed_at",{ascending:!1});if(console.log("Enrollments data:",A),console.log("Enrollments error:",j),j)throw j;const b=(A||[]).map(C=>({id:C.id,program_id:C.program_id,enrollment_date:C.enrolled_at,payment_status:C.payment_status,progress_percentage:C.progress||0,last_accessed:C.last_accessed_at||C.enrolled_at,program:C.program}));a(b)}catch(S){console.error("Error loading my programs:",S)}finally{u(!1)}},g=S=>S<30?"bg-red-500":S<70?"bg-yellow-500":"bg-green-500",N=S=>new Date(S).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),w=S=>{m(S),t==null||t(!0),r==null||r(!0)},E=()=>{m(null),t==null||t(!1),r==null||r(!1),x()};return h?s.jsx(Fb,{programId:h,onBack:E}):s.jsxs("div",{className:"space-y-8 p-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mes Programmes"}),s.jsx("p",{className:"text-gray-600",children:"Suivez votre progression et continuez votre apprentissage"})]}),l?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement de vos programmes..."})}):n.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(bt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun programme inscrit"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Vous n'êtes inscrit à aucun programme pour le moment"}),s.jsx("button",{onClick:()=>e==null?void 0:e("dashboard"),className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg font-medium hover:bg-[#4F6D0B]/90 transition",children:"Découvrir les programmes"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(bt,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.length}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Programme",n.length>1?"s":""," actif",n.length>1?"s":""]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(sn,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.round(n.reduce((S,D)=>S+D.progress_percentage,0)/n.length)||0,"%"]}),s.jsx("div",{className:"text-sm text-gray-500",children:"Progression moyenne"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(Dr,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.filter(S=>S.progress_percentage===100).length}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Programme",n.filter(S=>S.progress_percentage===100).length>1?"s":""," terminé",n.filter(S=>S.progress_percentage===100).length>1?"s":""]})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(S=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition overflow-hidden",children:[s.jsx("div",{className:"h-32 bg-gradient-to-br from-blue-500 to-purple-600"}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded",children:S.program.subject}),s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-semibold rounded",children:S.program.level})]}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:S.program.title}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Inscrit le ",N(S.enrollment_date)]})]})}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:S.program.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 font-medium",children:"Progression"}),s.jsxs("span",{className:"font-bold text-gray-900",children:[S.progress_percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${g(S.progress_percentage)} transition-all`,style:{width:`${S.progress_percentage}%`}})})]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(bt,{className:"w-4 h-4"}),s.jsxs("span",{children:[S.program.total_lessons||0," leçons"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Dr,{className:"w-4 h-4"}),s.jsxs("span",{children:[S.program.total_exercises||0," exercices"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(At,{className:"w-4 h-4"}),s.jsxs("span",{children:[S.program.duration_weeks," semaines"]})]})]}),s.jsxs("button",{onClick:()=>w(S.program_id),className:"w-full flex items-center justify-center space-x-2 py-2 bg-[#4F6D0B] text-white rounded-lg font-medium hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(Zi,{className:"w-5 h-5"}),s.jsx("span",{children:"Continuer"})]})]})]},S.id))})]})]})}function Hm({onCreateProgram:e,onViewStats:t,onManageProgram:r}){const[n,a]=F.useState([]),[l,u]=F.useState({}),[h,m]=F.useState(!0);F.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:g,error:N}=await pe.from("programs").select("*").order("created_at",{ascending:!1});if(N)throw N;if(a(g||[]),g)for(const w of g){const{data:E}=await pe.from("program_stats").select("*").eq("program_id",w.id).maybeSingle();E&&u(S=>({...S,[w.id]:E}))}}catch(g){console.error("Error loading programs:",g)}finally{m(!1)}};return s.jsxs("div",{className:"space-y-8 p-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#4F6D0B] to-[#7DA81E] p-12 text-white",children:s.jsxs("div",{className:"max-w-2xl",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Créez votre programme de formation"}),s.jsx("p",{className:"text-xl mb-6 text-white/90",children:"Partagez votre expertise et aidez les élèves à progresser tout en générant des revenus"}),s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-6 py-3 bg-white text-[#4F6D0B] font-semibold hover:bg-gray-100 transition",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Créer un nouveau programme"})]})]})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Mes programmes"}),h?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement..."})}):n.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(N0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun programme créé"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par créer votre premier programme"}),s.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Créer mon premier programme"})]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(g=>{const N=l[g.id]||{total_students:0,avg_minutes_per_week:0,completion_rate:0};return s.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g.title}),!g.is_active&&s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:"Inactif"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:g.subject}),s.jsx("span",{children:g.level})]})]}),s.jsx("div",{className:"text-right",children:g.is_free?s.jsx("span",{className:"text-sm font-medium text-green-600",children:"Gratuit"}):s.jsxs("div",{children:[s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[g.price," FCFA"]}),s.jsx("div",{className:"text-xs text-gray-500",children:"par élève"})]})})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:g.description}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-xs mb-1",children:[s.jsx(Mr,{className:"w-3 h-3"}),s.jsx("span",{children:"Élèves"})]}),s.jsx("div",{className:"text-lg font-bold text-gray-900",children:N.total_students})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-xs mb-1",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:"Moy/sem"})]}),s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(N.avg_minutes_per_week),"m"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-xs mb-1",children:[s.jsx(sn,{className:"w-3 h-3"}),s.jsx("span",{children:"Taux"})]}),s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(N.completion_rate),"%"]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>t==null?void 0:t(g.id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition",children:[s.jsx(eo,{className:"w-4 h-4"}),s.jsx("span",{children:"Voir stats"})]}),s.jsxs("button",{onClick:()=>r==null?void 0:r(g.id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(Au,{className:"w-4 h-4"}),s.jsx("span",{children:"Manager"})]})]})]},g.id)})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Conseils pour créer un programme réussi"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:s.jsx(N0,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Objectifs clairs"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Définissez des objectifs d'apprentissage précis et mesurables"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:s.jsx(Mr,{className:"w-6 h-6 text-green-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Contenu engageant"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Utilisez des exemples concrets et des exercices variés"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:s.jsx(sn,{className:"w-6 h-6 text-purple-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suivi régulier"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Évaluez la progression et ajustez le contenu si nécessaire"})]})]})]})]})}function Lb(){const[e,t]=F.useState({total_questions:0,total_views:0,total_likes:0,total_comments:0,avg_rating:0}),[r,n]=F.useState(!0);F.useEffect(()=>{a()},[]);const a=async()=>{try{n(!1)}catch(l){console.error("Error loading stats:",l),n(!1)}};return s.jsxs("div",{className:"space-y-6 p-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Performance de mes contenus"}),s.jsx("p",{className:"text-gray-600",children:"Suivez l'impact de vos questions, exercices et programmes"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(N0,{className:"w-6 h-6 text-blue-600"})}),s.jsx("span",{className:"text-green-600 text-sm font-medium",children:"+12%"})]}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.total_questions}),s.jsx("div",{className:"text-sm text-gray-600",children:"Questions publiées"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(eo,{className:"w-6 h-6 text-purple-600"})}),s.jsx("span",{className:"text-green-600 text-sm font-medium",children:"+24%"})]}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.total_views.toLocaleString()}),s.jsx("div",{className:"text-sm text-gray-600",children:"Vues totales"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(b1,{className:"w-6 h-6 text-green-600"})}),s.jsx("span",{className:"text-green-600 text-sm font-medium",children:"+18%"})]}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.total_likes}),s.jsx("div",{className:"text-sm text-gray-600",children:"Mentions j'aime"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(Dr,{className:"w-6 h-6 text-yellow-600"})})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.avg_rating.toFixed(1)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Note moyenne"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Évolution des performances (30 derniers jours)"}),s.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Graphique d'évolution à venir"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Contenus les plus populaires"}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"text-center text-gray-500 py-8",children:"Aucun contenu publié pour le moment"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Retours des élèves"}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"text-center text-gray-500 py-8",children:"Aucun commentaire pour le moment"})})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Conseils pour améliorer vos performances"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Publiez régulièrement du contenu de qualité"})]}),s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Répondez aux commentaires et questions des élèves"})]}),s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Variez les types d'exercices et de contenus"})]}),s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Analysez les statistiques pour identifier ce qui fonctionne le mieux"})]})]})]})]})}function Ob(){const[e,t]=F.useState([]),[r,n]=F.useState(!0),[a,l]=F.useState(0),[u,h]=F.useState(0);F.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:N,error:w}=await pe.from("teacher_payments").select("*").order("created_at",{ascending:!1});if(w)throw w;t(N||[]);const E=(N==null?void 0:N.filter(D=>D.status==="paid").reduce((D,A)=>D+Number(A.amount),0))||0;l(E);const S=(N==null?void 0:N.filter(D=>D.status==="pending").reduce((D,A)=>D+Number(A.amount),0))||0;h(S)}catch(N){console.error("Error loading payments:",N)}finally{n(!1)}},x=N=>{switch(N){case"paid":return"bg-green-100 text-green-700";case"processing":return"bg-blue-100 text-blue-700";case"pending":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},g=N=>{switch(N){case"paid":return"Payé";case"processing":return"En cours";case"pending":return"En attente";default:return N}};return s.jsxs("div",{className:"space-y-6 p-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rémunération"}),s.jsx("p",{className:"text-gray-600",children:"Suivez vos revenus et l'historique de vos paiements"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Du,{className:"w-6 h-6 text-green-600"})}),s.jsx(sn,{className:"w-5 h-5 text-green-600"})]}),s.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[a.toLocaleString()," FCFA"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total perçu"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(At,{className:"w-6 h-6 text-yellow-600"})})}),s.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[u.toLocaleString()," FCFA"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"En attente"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Y2,{className:"w-6 h-6 text-blue-600"})})}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:new Date().toLocaleDateString("fr-FR",{month:"long"})}),s.jsx("div",{className:"text-sm text-gray-600",children:"Mois en cours"})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-[#4F6D0B] to-[#7DA81E] p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Rémunération du mois prochain"}),s.jsx("p",{className:"text-white/90 mb-4",children:"Estimation basée sur votre activité actuelle"}),s.jsxs("div",{className:"text-3xl font-bold",children:[u.toLocaleString()," FCFA"]})]}),s.jsx(Vn,{className:"w-20 h-20 text-white/30"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Historique des paiements"}),r?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Chargement..."}):e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun paiement pour le moment"}),s.jsx("p",{className:"text-gray-500",children:"Vos paiements apparaîtront ici une fois que vous aurez commencé à générer des revenus"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mois"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de paiement"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(N=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N.month}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(N.amount).toLocaleString()," FCFA"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x(N.status)}`,children:g(N.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.paid_at?new Date(N.paid_at).toLocaleDateString("fr-FR"):"-"})]},N.id))})]})})]}),s.jsxs("div",{className:"bg-blue-50 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Comment fonctionne la rémunération?"}),s.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Les paiements sont effectués mensuellement"})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Vos revenus proviennent des programmes payants et de l'engagement sur vos contenus"})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Les paiements sont traités dans les 5 jours ouvrables suivant la fin du mois"})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),s.jsx("span",{children:"Un montant minimum de 10 000 FCFA est requis pour effectuer un retrait"})]})]})]})]})}function Ib(){return s.jsxs("div",{className:"space-y-8 p-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#4F6D0B] to-[#7DA81E] p-12 text-white",children:s.jsxs("div",{className:"max-w-3xl",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Bienvenue sur KN!"}),s.jsx("p",{className:"text-xl text-white/90 mb-6",children:"Commencez votre aventure d'enseignement en ligne et aidez des milliers d'élèves à réussir"})]})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Comment ça marche?"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white shadow-sm p-6 border-l-4 border-[#4F6D0B]",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-[#4F6D0B] text-white rounded-full flex items-center justify-center font-bold",children:"1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Créez votre profil d'enseignant"}),s.jsx("p",{className:"text-gray-600 mb-3",children:"Renseignez vos informations, vos domaines d'expertise et votre expérience. Un profil complet attire plus d'élèves et augmente votre crédibilité."}),s.jsxs("span",{className:"inline-flex items-center text-green-600 text-sm",children:[s.jsx(Z2,{className:"w-4 h-4 mr-1"}),"Complété"]})]})]})}),s.jsx("div",{className:"bg-white shadow-sm p-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Créez du contenu pédagogique"}),s.jsx("p",{className:"text-gray-600 mb-3",children:"Commencez par publier des questions et des exercices pour vous faire connaître. Plus votre contenu est de qualité, plus vous gagnerez en visibilité."}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),s.jsx("span",{children:"Créez des questions détaillées avec des explications claires"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),s.jsx("span",{children:"Proposez des exercices variés et progressifs"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),s.jsx("span",{children:"Répondez aux questions des élèves dans le forum"})]})]}),s.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white font-medium hover:bg-blue-600 transition",children:"Commencer à créer du contenu"})]})]})}),s.jsx("div",{className:"bg-white shadow-sm p-6 border-l-4 border-purple-500",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Créez vos premiers programmes"}),s.jsx("p",{className:"text-gray-600 mb-3",children:"Une fois que vous avez du contenu de base, créez des programmes complets. Structurez vos cours avec des objectifs d'apprentissage clairs."}),s.jsxs("div",{className:"bg-purple-50 p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Structure recommandée:"}),s.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[s.jsx("li",{children:"✓ Objectifs d'apprentissage précis"}),s.jsx("li",{children:"✓ Contenu structuré par modules"}),s.jsx("li",{children:"✓ Exercices d'application"}),s.jsx("li",{children:"✓ Évaluations régulières"})]})]}),s.jsx("button",{className:"px-4 py-2 bg-purple-500 text-white font-medium hover:bg-purple-600 transition",children:"Créer mon premier programme"})]})]})}),s.jsx("div",{className:"bg-white shadow-sm p-6 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Générez des revenus"}),s.jsx("p",{className:"text-gray-600 mb-3",children:"Vos programmes payants et l'engagement sur vos contenus vous génèrent des revenus. Plus vous êtes actif et qualitatif, plus vos revenus augmentent."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-green-50 p-3",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"30%"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Commission plateforme"})]}),s.jsxs("div",{className:"bg-green-50 p-3",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"70%"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Votre part sur les ventes"})]})]})]})]})})]})]}),s.jsxs("div",{className:"bg-blue-50 p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Conseils pour réussir sur KN"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(bt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Soyez régulier"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Publiez du contenu régulièrement pour maintenir votre visibilité"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Mr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Engagez-vous"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Répondez aux questions et interagissez avec la communauté"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(sn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Analysez vos stats"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Utilisez la section Performance pour optimiser votre contenu"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Vn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Proposez de la valeur"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Concentrez-vous sur la qualité plutôt que la quantité"})]})]})]})]}),s.jsxs("div",{className:"bg-white shadow-sm p-6 text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Prêt à commencer?"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Rejoignez des centaines d'enseignants qui font déjà une différence"}),s.jsxs("button",{className:"inline-flex items-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white font-semibold hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(Zi,{className:"w-5 h-5"}),s.jsx("span",{children:"Créer mon premier contenu"})]})]})]})}function vr({content:e,className:t="",showFigures:r=!0}){if(!e)return null;const n=m=>{const x=/(<svg[^>]*>[\s\S]*?<\/svg>)/gi,g=/(<table[^>]*>[\s\S]*?<\/table>)/gi,N=[],w=[];let E=m.replace(x,S=>(N.push(S),`__FIGURE_${N.length-1}__`));return E=E.replace(g,S=>(w.push(S),`__TABLE_${w.length-1}__`)),{text:E,figures:N,tables:w}},{text:a,figures:l,tables:u}=n(e),h=m=>m.split(/(\$[^$]+\$|__FIGURE_\d+__|__TABLE_\d+__)/g).map((g,N)=>{var w,E;if(g.startsWith("$")&&g.endsWith("$"))try{const S=g.slice(1,-1);return s.jsx("span",{className:"inline-flex items-center",children:s.jsx(Xt.InlineMath,{math:S})},N)}catch{return s.jsxs("span",{className:"text-red-500 bg-red-50 px-1 rounded",children:["Erreur: ",g]},N)}else if(g.startsWith("__FIGURE_")){const S=parseInt(((w=g.match(/\d+/))==null?void 0:w[0])||"0"),D=l[S];if(D)return r?s.jsx("div",{className:"my-2 flex justify-center",children:s.jsx("div",{className:"inline-block max-w-full overflow-hidden",style:{maxHeight:"200px",maxWidth:"100%"},dangerouslySetInnerHTML:{__html:D}})},N):s.jsx("span",{className:"inline-block px-2 py-0.5 bg-gray-200 text-gray-700 text-xs rounded mx-1",children:"fg"},N)}else if(g.startsWith("__TABLE_")){const S=parseInt(((E=g.match(/\d+/))==null?void 0:E[0])||"0"),D=u[S];if(D)return s.jsxs("div",{className:"my-4",children:[s.jsx("style",{children:`
                .content-renderer-table {
                  border-collapse: collapse;
                  width: auto;
                  margin: 0 auto;
                }
                .content-renderer-table td,
                .content-renderer-table th {
                  border: 1px solid #000;
                  padding: 8px 12px;
                  text-align: left;
                }
                .content-renderer-table th {
                  background-color: #f3f4f6;
                  font-weight: 600;
                }
              `}),s.jsx("div",{className:"overflow-x-auto",dangerouslySetInnerHTML:{__html:D.replace(/<table/g,'<table class="content-renderer-table"')}})]},N)}return s.jsx("span",{children:g},N)});return s.jsx("div",{className:`whitespace-pre-wrap ${t}`,children:h(a)})}function Rb({sections:e,onChange:t}){const[r,n]=F.useState(null),[a,l]=F.useState(""),[u,h]=F.useState(null),m=()=>{n(e.length),l("")},x=E=>{t(e.filter((S,D)=>D!==E))},g=E=>{n(E),l(e[E].content)},N=()=>{if(r!==null){const E=[...e];r>=E.length?E.push({content:a}):E[r]={content:a},t(E),n(null),l("")}},w=()=>{n(null),l("")};if(u!==null){const E=()=>{const S=[...e],{sectionIndex:D,exerciseIndex:A,field:j}=u;if(j==="question")S[D].exercises[A].question_text=a;else if(j==="answer")S[D].exercises[A].correct_answer=a;else if(j.startsWith("option_")){const b=parseInt(j.split("_")[1]);S[D].exercises[A].options[b]=a}t(S),h(null),l("")};return s.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-gray-800 text-white p-4 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Éditer ",u.field==="question"?"la question":u.field==="answer"?"la réponse":u.field.startsWith("option_")?`l'option ${String.fromCharCode(65+parseInt(u.field.split("_")[1]))}`:""]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{h(null),l("")},className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 transition",children:"Annuler"}),s.jsx("button",{onClick:E,className:"px-6 py-2 bg-[#4F6D0B] hover:bg-[#4F6D0B]/90 transition",children:"Enregistrer"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx(Xs,{initialContent:a,onChange:l,hideSendButton:!0})})]})}return r!==null?s.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-gray-800 text-white p-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold",children:r>=e.length?"Nouvelle Section":`Éditer Section ${r+1}`}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:w,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 transition",children:"Annuler"}),s.jsx("button",{onClick:N,className:"px-6 py-2 bg-[#4F6D0B] hover:bg-[#4F6D0B]/90 transition",children:"Enregistrer"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx(Xs,{initialContent:a,onChange:l,hideSendButton:!0})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Sections de la leçon"}),s.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter une section"})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx("p",{className:"text-gray-500",children:"Aucune section ajoutée"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cliquez sur "Ajouter une section" pour commencer'})]}):s.jsx("div",{className:"space-y-3",children:e.map((E,S)=>{var D;return s.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[s.jsx("div",{className:"flex items-center justify-end mb-3",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>g(S),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition",children:s.jsx(tn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>x(S),className:"p-1 text-red-600 hover:bg-red-50 rounded transition",children:s.jsx(Jt,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"min-h-[100px] p-3 border rounded bg-gray-50",children:E.content?s.jsx(vr,{content:E.content,showFigures:!1}):s.jsx("p",{className:"text-gray-400 italic",children:"Section vide"})}),s.jsxs("div",{className:"mt-3 pt-3 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(X2,{className:"w-4 h-4 mr-1"}),"Exercices de suivi (",((D=E.exercises)==null?void 0:D.length)||0,")"]}),s.jsx("button",{onClick:()=>{const A=[...e];A[S].exercises||(A[S].exercises=[]),A[S].exercises.push({title:"",question_text:"",exercise_type:"qcm",options:["","","",""],correct_answer:""}),t(A)},className:"px-2 py-1 bg-blue-500 text-white text-xs hover:bg-blue-600 transition",children:"+ Exercice"})]}),E.exercises&&E.exercises.length>0&&s.jsx("div",{className:"space-y-2 mt-2",children:E.exercises.map((A,j)=>s.jsxs("div",{className:"p-3 bg-white border rounded",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium text-gray-700",children:["Exercice ",j+1]}),s.jsxs("select",{value:A.exercise_type,onChange:b=>{const C=[...e];C[S].exercises[j].exercise_type=b.target.value,t(C)},className:"text-xs border rounded px-2 py-1",children:[s.jsx("option",{value:"qcm",children:"QCM"}),s.jsx("option",{value:"open",children:"Question ouverte"}),s.jsx("option",{value:"true_false",children:"Vrai/Faux"})]})]}),s.jsx("button",{onClick:()=>{const b=[...e];b[S].exercises=b[S].exercises.filter((C,z)=>z!==j),t(b)},className:"text-red-600 hover:bg-red-50 rounded p-1",children:s.jsx(Jt,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium mb-1",children:"Question:"}),A.question_text&&s.jsx("div",{className:"p-2 bg-gray-50 rounded mb-1",children:s.jsx(vr,{content:A.question_text,showFigures:!1})}),s.jsx("button",{onClick:()=>{h({sectionIndex:S,exerciseIndex:j,field:"question"}),l(A.question_text)},className:"px-2 py-1 bg-blue-500 text-white hover:bg-blue-600 transition",children:"Éditer"})]}),(A.exercise_type==="qcm"||A.exercise_type==="true_false")&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium mb-1",children:"Options:"}),A.options.map((b,C)=>s.jsxs("div",{className:"flex items-start gap-1 mb-1",children:[s.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+C),"."]}),b&&s.jsx("div",{className:"flex-1 p-1 bg-gray-50 rounded text-xs",children:s.jsx(vr,{content:b,showFigures:!1})}),s.jsx("button",{onClick:()=>{h({sectionIndex:S,exerciseIndex:j,field:`option_${C}`}),l(b)},className:"px-2 py-1 bg-gray-500 text-white hover:bg-gray-600 transition",children:"Éditer"})]},C))]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium mb-1",children:"Réponse correcte:"}),A.correct_answer&&s.jsx("div",{className:"p-2 bg-green-50 rounded mb-1",children:s.jsx(vr,{content:A.correct_answer,showFigures:!1})}),s.jsx("button",{onClick:()=>{h({sectionIndex:S,exerciseIndex:j,field:"answer"}),l(A.correct_answer)},className:"px-2 py-1 bg-green-500 text-white hover:bg-green-600 transition",children:"Éditer"})]})]})]},j))})]})]},S)})})]})}function qb({exercises:e,onChange:t}){const[r,n]=F.useState(null),[a,l]=F.useState(""),u=()=>{const w={title:"",question_text:"",exercise_type:"qcm",options:["","","",""],correct_answer:"",points:1,explanation:""};t([...e,w])},h=w=>{t(e.filter((E,S)=>S!==w))},m=(w,E)=>{const S=[...e];S[w]={...S[w],...E},t(S)},x=(w,E,S,D)=>{n({exerciseIndex:w,field:E,optionIndex:D}),l(S)},g=()=>{if(r){const{exerciseIndex:w,field:E,optionIndex:S}=r;if(E==="option"&&S!==void 0){const D=[...e[w].options];D[S]=a,m(w,{options:D})}else m(w,{[E]:a});n(null),l("")}},N=()=>{n(null),l("")};if(r!==null){const{field:w,optionIndex:E}=r;let S="Éditer ";return w==="question_text"?S+="l'énoncé":w==="option"?S+=`l'option ${(E||0)+1}`:w==="correct_answer"?S+="la réponse correcte":w==="explanation"&&(S+="l'explication"),s.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-gray-800 text-white p-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold",children:S}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:N,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 transition",children:"Annuler"}),s.jsx("button",{onClick:g,className:"px-6 py-2 bg-[#4F6D0B] hover:bg-[#4F6D0B]/90 transition",children:"Enregistrer"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx(Xs,{initialContent:a,onChange:l,hideSendButton:!0})})]})}return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Exercices et évaluations"}),s.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white font-medium hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter un exercice"})]})]}),e.length===0?s.jsx("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:s.jsx("p",{className:"text-gray-500",children:"Aucun exercice créé"})}):s.jsx("div",{className:"space-y-6",children:e.map((w,E)=>s.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900",children:["Exercice ",E+1]}),s.jsx("button",{onClick:()=>h(E),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:s.jsx(Jt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre"}),s.jsx("input",{type:"text",value:w.title,onChange:S=>m(E,{title:S.target.value}),placeholder:"Titre de l'exercice",className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:w.exercise_type,onChange:S=>m(E,{exercise_type:S.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B]",children:[s.jsx("option",{value:"qcm",children:"QCM (Choix multiple)"}),s.jsx("option",{value:"vrai-faux",children:"Vrai/Faux"}),s.jsx("option",{value:"ouverte",children:"Question ouverte"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Énoncé de la question"}),s.jsx("div",{onClick:()=>x(E,"question_text",w.question_text),className:"min-h-[80px] p-3 border rounded cursor-pointer hover:border-blue-500 transition",children:w.question_text?s.jsx("div",{dangerouslySetInnerHTML:{__html:w.question_text}}):s.jsx("p",{className:"text-gray-400 italic",children:"Cliquez pour éditer l'énoncé..."})})]}),w.exercise_type==="qcm"&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options de réponse"}),s.jsx("div",{className:"space-y-2",children:w.options.map((S,D)=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Option ",D+1]}),s.jsx("div",{onClick:()=>x(E,"option",S,D),className:"min-h-[60px] p-2 border rounded cursor-pointer hover:border-blue-500 transition",children:S?s.jsx("div",{dangerouslySetInnerHTML:{__html:S}}):s.jsx("p",{className:"text-gray-400 italic text-sm",children:"Cliquez pour éditer l'option..."})})]},D))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Réponse correcte"}),s.jsx("div",{onClick:()=>x(E,"correct_answer",w.correct_answer),className:"min-h-[60px] p-3 border rounded cursor-pointer hover:border-blue-500 transition",children:w.correct_answer?s.jsx("div",{dangerouslySetInnerHTML:{__html:w.correct_answer}}):s.jsx("p",{className:"text-gray-400 italic",children:"Cliquez pour définir la réponse correcte..."})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Explication (optionnel)"}),s.jsx("div",{onClick:()=>x(E,"explanation",w.explanation),className:"min-h-[60px] p-3 border rounded cursor-pointer hover:border-blue-500 transition",children:w.explanation?s.jsx("div",{dangerouslySetInnerHTML:{__html:w.explanation}}):s.jsx("p",{className:"text-gray-400 italic",children:"Cliquez pour ajouter une explication..."})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points"}),s.jsx("input",{type:"number",value:w.points,onChange:S=>m(E,{points:parseFloat(S.target.value)}),className:"w-32 px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B]",min:"0",step:"0.5"})]})]},E))})]})}function V1({onClose:e}){const[t,r]=F.useState("info"),[n,a]=F.useState(null),[l,u]=F.useState(!1),[h,m]=F.useState(new Set),[x,g]=F.useState({title:"",description:"",subject:"",level:"",target_audience:"",prerequisites:"",learning_outcomes:"",duration_weeks:0,price:0,is_free:!0,status:"brouillon"}),[N,w]=F.useState([]),[E,S]=F.useState([]),[D,A]=F.useState({}),[j,b]=F.useState([]),C=G=>{const V=new Set(h);V.has(G)?V.delete(G):V.add(G),m(V)},z=()=>{w([...N,{objective_text:"",order_number:N.length}])},$=G=>{w(N.filter((V,ie)=>ie!==G))},U=()=>{S([...E,{title:"",description:"",order_number:E.length,duration_hours:0,lessons:[]}]),m(new Set([...h,E.length]))},Y=G=>{S(E.filter((V,ie)=>ie!==G))},Z=G=>{const V=[...E];V[G].lessons.push({title:"",description:"",sections:[],order_number:V[G].lessons.length,duration_minutes:0,resources:[]}),S(V)},X=(G,V)=>{const ie=[...E];ie[G].lessons=ie[G].lessons.filter((q,se)=>se!==V),S(ie)},ee=async()=>{if(!x.title){alert("Le titre du programme est obligatoire");return}u(!0);try{const{data:{user:G}}=await pe.auth.getUser();if(!G){alert("Vous devez être connecté pour sauvegarder un programme"),u(!1);return}const V=G.id,{data:ie,error:q}=n?await pe.from("programs").update({...x,teacher_id:V,total_lessons:E.reduce((W,re)=>W+re.lessons.length,0),total_exercises:j.length,updated_at:new Date().toISOString()}).eq("id",n).select().single():await pe.from("programs").insert([{...x,teacher_id:V,total_lessons:E.reduce((W,re)=>W+re.lessons.length,0),total_exercises:j.length}]).select().single();if(q)throw q;const se=ie.id;if(n||a(se),await pe.from("program_objectives").delete().eq("program_id",se),N.length>0){const{error:W}=await pe.from("program_objectives").insert(N.map(re=>({...re,program_id:se})));if(W)throw W}for(const W of E){const{data:re,error:J}=await pe.from("program_modules").insert([{program_id:se,title:W.title,description:W.description,order_number:W.order_number,duration_hours:W.duration_hours}]).select().single();if(J)throw J;if(W.lessons.length>0){const{error:de}=await pe.from("program_lessons").insert(W.lessons.map(ce=>({title:ce.title,description:ce.description,sections:JSON.stringify(ce.sections),order_number:ce.order_number,duration_minutes:ce.duration_minutes,resources:JSON.stringify(ce.resources),module_id:re.id})));if(de)throw de}}if(j.length>0){await pe.from("program_exercises").delete().eq("program_id",se);const{error:W}=await pe.from("program_exercises").insert(j.map(re=>({...re,program_id:se,options:JSON.stringify(re.options)})));if(W)throw W}alert("Programme enregistré avec succès!")}catch(G){console.error("Error saving program:",G),alert("Erreur lors de la sauvegarde: "+G.message)}finally{u(!1)}};return s.jsxs("div",{className:"fixed inset-0 flex flex-col bg-gray-50 z-40",children:[s.jsxs("div",{className:"bg-white border-b px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Créateur de Programme"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Construisez un programme pédagogique complet avec modules, leçons et exercices"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded-full",children:x.status}),s.jsxs("button",{onClick:ee,disabled:l,className:"flex items-center space-x-2 px-6 py-2 bg-[#4F6D0B] text-white font-medium hover:bg-[#4F6D0B]/90 transition disabled:opacity-50",children:[s.jsx(Yn,{className:"w-4 h-4"}),s.jsx("span",{children:l?"Enregistrement...":"Enregistrer"})]}),s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition",children:[s.jsx(Ss,{className:"w-4 h-4"}),s.jsx("span",{children:"Quitter"})]})]})]}),s.jsx("div",{className:"bg-white border-b px-6",children:s.jsx("nav",{className:"flex space-x-8",children:[{id:"info",label:"Informations",icon:Au},{id:"objectives",label:"Objectifs",icon:Fl},{id:"curriculum",label:"Curriculum",icon:bt},{id:"exercises",label:"Exercices",icon:oa}].map(G=>s.jsxs("button",{onClick:()=>r(G.id),className:`flex items-center space-x-2 py-4 border-b-2 transition ${t===G.id?"border-[#4F6D0B] text-[#4F6D0B]":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(G.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:G.label})]},G.id))})}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-[30%] border-r bg-white overflow-y-auto p-6",children:[t==="info"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white p-6 shadow-sm",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informations générales"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du programme *"}),s.jsx("input",{type:"text",value:x.title,onChange:G=>g({...x,title:G.target.value}),placeholder:"Ex: Maîtrise complète des équations du second degré",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte"}),s.jsx("textarea",{value:x.description,onChange:G=>g({...x,description:G.target.value}),placeholder:"Décrivez brièvement votre programme...",rows:3,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matière"}),s.jsxs("select",{value:x.subject,onChange:G=>g({...x,subject:G.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner"}),s.jsx("option",{value:"Mathématiques",children:"Mathématiques"}),s.jsx("option",{value:"Physique-Chimie",children:"Physique-Chimie"}),s.jsx("option",{value:"SVT",children:"SVT"}),s.jsx("option",{value:"Français",children:"Français"}),s.jsx("option",{value:"Anglais",children:"Anglais"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau"}),s.jsxs("select",{value:x.level,onChange:G=>g({...x,level:G.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner"}),s.jsx("option",{value:"6ème",children:"6ème"}),s.jsx("option",{value:"5ème",children:"5ème"}),s.jsx("option",{value:"4ème",children:"4ème"}),s.jsx("option",{value:"3ème",children:"3ème"}),s.jsx("option",{value:"2nde",children:"2nde"}),s.jsx("option",{value:"1ère",children:"1ère"}),s.jsx("option",{value:"Tle",children:"Tle"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Public cible"}),s.jsx("textarea",{value:x.target_audience,onChange:G=>g({...x,target_audience:G.target.value}),placeholder:"Ex: Élèves de terminale souhaitant maîtriser les mathématiques avancées",rows:2,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prérequis"}),s.jsx("textarea",{value:x.prerequisites,onChange:G=>g({...x,prerequisites:G.target.value}),placeholder:"Ex: Notions de base en algèbre, connaître les fonctions linéaires",rows:2,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Résumé des acquis"}),s.jsx("textarea",{value:x.learning_outcomes,onChange:G=>g({...x,learning_outcomes:G.target.value}),placeholder:"À la fin de ce programme, vous serez capable de...",rows:3,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (semaines)"}),s.jsx("input",{type:"number",value:x.duration_weeks,onChange:G=>g({...x,duration_weeks:parseInt(G.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (FCFA)"}),s.jsx("input",{type:"number",value:x.price,onChange:G=>g({...x,price:parseInt(G.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:x.is_free,onChange:G=>g({...x,is_free:G.target.checked,price:G.target.checked?0:x.price}),className:"w-5 h-5 text-[#4F6D0B] rounded focus:ring-[#4F6D0B]"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gratuit"})]})})]})]})]})}),t==="objectives"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Objectifs d'apprentissage"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Définissez ce que les apprenants seront capables de faire à la fin du programme"})]}),s.jsxs("button",{onClick:z,className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white font-medium hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter un objectif"})]})]}),N.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Fl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:'Aucun objectif défini. Cliquez sur "Ajouter un objectif" pour commencer.'})]}):s.jsx("div",{className:"space-y-3",children:N.map((G,V)=>s.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-[#4F6D0B] text-white rounded-full flex items-center justify-center text-sm font-bold",children:V+1}),s.jsx("input",{type:"text",value:G.objective_text,onChange:ie=>{const q=[...N];q[V].objective_text=ie.target.value,w(q)},placeholder:"À la fin de ce module, l'apprenant sera capable de...",className:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B]"}),s.jsx("button",{onClick:()=>$(V),className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:s.jsx(Jt,{className:"w-5 h-5"})})]},V))})]})}),t==="curriculum"&&s.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:s.jsxs("div",{className:"bg-white p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Structure du curriculum"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Organisez votre contenu en modules et leçons"})]}),s.jsxs("button",{onClick:U,className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white font-medium hover:bg-[#4F6D0B]/90 transition",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter un module"})]})]}),E.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(bt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:'Aucun module créé. Cliquez sur "Ajouter un module" pour commencer.'})]}):s.jsx("div",{className:"space-y-4",children:E.map((G,V)=>s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[s.jsx("button",{onClick:()=>C(V),className:"p-1 hover:bg-gray-200 rounded transition",children:h.has(V)?s.jsx(Wn,{className:"w-5 h-5"}):s.jsx(ty,{className:"w-5 h-5"})}),s.jsxs("span",{className:"font-bold text-gray-700",children:["Module ",V+1]}),s.jsx("input",{type:"text",value:G.title,onChange:ie=>{const q=[...E];q[V].title=ie.target.value,S(q)},placeholder:"Titre du module",className:"flex-1 px-3 py-1 border rounded focus:ring-2 focus:ring-[#4F6D0B]"})]}),s.jsx("button",{onClick:()=>Y(V),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:s.jsx(Jt,{className:"w-4 h-4"})})]}),h.has(V)&&s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsx("textarea",{value:G.description,onChange:ie=>{const q=[...E];q[V].description=ie.target.value,S(q)},placeholder:"Description du module...",rows:2,className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B]"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Leçons"}),s.jsxs("button",{onClick:()=>Z(V),className:"flex items-center space-x-2 px-3 py-1 bg-blue-500 text-white text-sm font-medium hover:bg-blue-600 transition",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter une leçon"})]})]}),G.lessons.length===0?s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Aucune leçon dans ce module"}):s.jsx("div",{className:"space-y-3",children:G.lessons.map((ie,q)=>s.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("input",{type:"text",value:ie.title,onChange:se=>{const W=[...E];W[V].lessons[q].title=se.target.value,S(W)},placeholder:`Leçon ${q+1}: Titre`,className:"flex-1 px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B] font-medium"}),s.jsx("button",{onClick:()=>X(V,q),className:"ml-2 p-2 text-red-600 hover:bg-red-50 rounded transition",children:s.jsx(Jt,{className:"w-4 h-4"})})]}),s.jsx("input",{type:"text",value:ie.description,onChange:se=>{const W=[...E];W[V].lessons[q].description=se.target.value,S(W)},placeholder:"Description courte",className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B]"}),s.jsx(Rb,{sections:ie.sections,onChange:se=>{const W=[...E];W[V].lessons[q].sections=se,S(W)}}),s.jsx("input",{type:"number",value:ie.duration_minutes,onChange:se=>{const W=[...E];W[V].lessons[q].duration_minutes=parseInt(se.target.value),S(W)},placeholder:"Durée (minutes)",className:"w-32 px-3 py-2 border rounded focus:ring-2 focus:ring-[#4F6D0B]"})]},q))})]})]},V))})]})}),t==="exercises"&&s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"bg-white p-6 shadow-sm",children:s.jsx(qb,{exercises:j,onChange:b})})})]}),s.jsx("div",{className:"w-[70%] bg-gray-50 overflow-y-auto p-6",children:s.jsx("div",{className:"max-w-5xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 border-b pb-4",children:"Prévisualisation du Programme"}),x.title&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-[#462D12] mb-2",children:x.title}),x.description&&s.jsx("p",{className:"text-gray-600 text-lg mb-4",children:x.description}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[x.level&&s.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:["Niveau: ",x.level]}),x.subject&&s.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full",children:["Matière: ",x.subject]}),x.duration_weeks>0&&s.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full",children:["Durée: ",x.duration_weeks," semaines"]})]})]}),N.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-3",children:"Objectifs d'apprentissage"}),s.jsx("ul",{className:"space-y-2",children:N.map((G,V)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-600 mr-2",children:"✓"}),s.jsx("span",{className:"text-gray-700",children:G.objective_text})]},V))})]}),E.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"Curriculum"}),s.jsx("div",{className:"space-y-6",children:E.map((G,V)=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("h5",{className:"text-lg font-bold text-[#4F6D0B] mb-3",children:["Module ",V+1,": ",G.title]}),G.description&&s.jsx("p",{className:"text-gray-600 mb-4",children:G.description}),G.lessons.length>0&&s.jsx("div",{className:"space-y-4 mt-4",children:G.lessons.map((ie,q)=>s.jsxs("div",{className:"bg-white rounded p-4 border-l-4 border-[#4F6D0B]",children:[s.jsxs("h6",{className:"font-semibold text-gray-900 mb-2",children:["Leçon ",q+1,": ",ie.title]}),ie.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:ie.description}),ie.sections&&ie.sections.length>0&&s.jsx("div",{className:"space-y-6 mt-4",children:ie.sections.map((se,W)=>s.jsxs("div",{children:[se.content&&s.jsx(vr,{content:se.content,className:"prose max-w-none mb-4"}),se.exercises&&se.exercises.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-blue-300",children:se.exercises.map((re,J)=>{const de=`${V}-${q}-${W}-${J}`,ce=D[de]||!1;return s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Exercice ",J+1]})}),re.question_text&&s.jsx(vr,{content:re.question_text,className:"prose prose-sm max-w-none text-gray-800 mb-3"}),re.exercise_type==="qcm"&&re.options.length>0&&s.jsx("div",{className:"space-y-1 mb-3",children:re.options.map((ne,Se)=>ne&&s.jsxs("div",{className:"flex items-start text-sm",children:[s.jsxs("span",{className:"font-medium text-gray-600 mr-2",children:[String.fromCharCode(65+Se),"."]}),s.jsx(vr,{content:ne,className:"prose prose-sm max-w-none flex-1"})]},Se))}),re.correct_answer&&s.jsxs("div",{className:"mt-2",children:[s.jsx("button",{onClick:()=>A(ne=>({...ne,[de]:!ne[de]})),className:"text-xs px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition",children:ce?"Masquer la réponse":"Voir la réponse"}),ce&&s.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-300 rounded",children:[s.jsx("span",{className:"font-medium text-green-800 text-xs",children:"Réponse: "}),s.jsx(vr,{content:re.correct_answer,className:"inline text-green-900 text-xs"})]})]})]},J)})})]},W))})]},q))})]},V))})]}),j.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"Exercices"}),s.jsx("div",{className:"space-y-6",children:j.map((G,V)=>s.jsxs("div",{className:"border rounded-lg p-6 bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h5",{className:"font-bold text-gray-900",children:["Exercice ",V+1,": ",G.title]}),s.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:[G.points," pts"]})]}),G.question_text&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),s.jsx("div",{className:"prose max-w-none p-3 bg-gray-50 rounded",dangerouslySetInnerHTML:{__html:G.question_text}})]}),G.exercise_type==="qcm"&&G.options.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),s.jsx("div",{className:"space-y-2",children:G.options.map((ie,q)=>ie&&s.jsxs("div",{className:"flex items-start p-2 bg-gray-50 rounded",children:[s.jsxs("span",{className:"font-medium text-gray-600 mr-2",children:[String.fromCharCode(65+q),"."]}),s.jsx("div",{className:"prose max-w-none flex-1",dangerouslySetInnerHTML:{__html:ie}})]},q))})]}),G.correct_answer&&s.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded border border-green-200",children:[s.jsx("div",{className:"font-medium text-green-800 mb-2",children:"Réponse correcte:"}),s.jsx("div",{className:"prose max-w-none text-green-900",dangerouslySetInnerHTML:{__html:G.correct_answer}})]}),G.explanation&&s.jsxs("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[s.jsx("div",{className:"font-medium text-blue-800 mb-2",children:"Explication:"}),s.jsx("div",{className:"prose max-w-none text-blue-900",dangerouslySetInnerHTML:{__html:G.explanation}})]})]},V))})]}),!x.title&&E.length===0&&j.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-400",children:[s.jsx("p",{className:"text-lg",children:"Commencez à créer votre programme"}),s.jsx("p",{className:"text-sm mt-2",children:"La prévisualisation apparaîtra ici au fur et à mesure"})]})]})})})]})]})}function $b({programId:e,onBack:t}){const[r,n]=F.useState(null),[a,l]=F.useState(!0);F.useEffect(()=>{u()},[e]);const u=async()=>{try{const{data:h,error:m}=await pe.from("programs").select("title, subject, level").eq("id",e).maybeSingle();if(m)throw m;n(h)}catch(h){console.error("Error loading program:",h)}finally{l(!1)}};return a?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#4F6D0B]"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]})}):r?s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(Os,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.title}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-sm rounded",children:r.subject}),s.jsx("span",{className:"text-gray-600",children:r.level})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Mr,{className:"w-6 h-6 text-blue-600"})})}),s.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:"0"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Élèves inscrits"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(At,{className:"w-6 h-6 text-green-600"})})}),s.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:"0h"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Temps total d'étude"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(sn,{className:"w-6 h-6 text-purple-600"})})}),s.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:"0%"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Taux de complétion"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(G2,{className:"w-5 h-5 mr-2 text-[#4F6D0B]"}),"Activité récente"]}),s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune activité pour le moment"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Dr,{className:"w-5 h-5 mr-2 text-[#4F6D0B]"}),"Performances"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Exercices réussis"}),s.jsx("span",{className:"font-medium text-gray-900",children:"0%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"0%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Leçons terminées"}),s.jsx("span",{className:"font-medium text-gray-900",children:"0%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"0%"}})})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Fl,{className:"w-5 h-5 mr-2 text-[#4F6D0B]"}),"Objectifs d'apprentissage"]}),s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Les statistiques détaillées seront disponibles lorsque des élèves s'inscriront à votre programme."})]})]}):s.jsxs("div",{className:"p-8",children:[s.jsx("p",{className:"text-gray-600",children:"Programme introuvable"}),s.jsx("button",{onClick:t,className:"mt-4 text-[#4F6D0B] hover:underline",children:"Retour"})]})}function Ub({programId:e,onBack:t}){const[r,n]=F.useState(null),[a,l]=F.useState([]),[u,h]=F.useState(!0),[m,x]=F.useState(!1),[g,N]=F.useState(!1);F.useEffect(()=>{w()},[e]);const w=async()=>{try{const{data:D,error:A}=await pe.from("programs").select("*").eq("id",e).maybeSingle();if(A)throw A;n(D);const{data:j,error:b}=await pe.from("program_modules").select("*").eq("program_id",e).order("order_number",{ascending:!0});if(b)throw b;l(j||[])}catch(D){console.error("Error loading program:",D)}finally{h(!1)}},E=async()=>{if(r){x(!0);try{const{error:D}=await pe.from("programs").update({title:r.title,description:r.description,subject:r.subject,level:r.level,price:r.price,is_free:r.is_free,duration_weeks:r.duration_weeks,learning_outcomes:r.learning_outcomes,target_audience:r.target_audience,prerequisites:r.prerequisites,status:r.status}).eq("id",e);if(D)throw D;alert("Programme mis à jour avec succès"),N(!1)}catch(D){console.error("Error saving program:",D),alert("Erreur lors de la sauvegarde")}finally{x(!1)}}},S=async D=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce module ?"))try{const{error:A}=await pe.from("program_modules").delete().eq("id",D);if(A)throw A;l(a.filter(j=>j.id!==D)),alert("Module supprimé avec succès")}catch(A){console.error("Error deleting module:",A),alert("Erreur lors de la suppression")}};return u?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#4F6D0B]"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]})}):r?s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(Os,{className:"w-6 h-6 text-gray-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gérer le programme"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Annuler"}),s.jsxs("button",{onClick:E,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#3d5609] transition disabled:opacity-50",children:[s.jsx(Yn,{className:"w-4 h-4"}),s.jsx("span",{children:m?"Enregistrement...":"Enregistrer"})]})]}):s.jsxs("button",{onClick:()=>N(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#3d5609] transition",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsx("span",{children:"Modifier"})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Informations générales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre"}),s.jsx("input",{type:"text",value:r.title,onChange:D=>n({...r,title:D.target.value}),disabled:!g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matière"}),s.jsx("input",{type:"text",value:r.subject,onChange:D=>n({...r,subject:D.target.value}),disabled:!g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau"}),s.jsx("input",{type:"text",value:r.level,onChange:D=>n({...r,level:D.target.value}),disabled:!g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durée (semaines)"}),s.jsx("input",{type:"number",value:r.duration_weeks,onChange:D=>n({...r,duration_weeks:parseInt(D.target.value)||0}),disabled:!g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:r.description,onChange:D=>n({...r,description:D.target.value}),disabled:!g,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Modules du programme"}),s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#3d5609] transition",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter un module"})]})]}),a.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucun module pour le moment"}):s.jsx("div",{className:"space-y-3",children:a.map((D,A)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx(ly,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:D.title}),s.jsx("p",{className:"text-sm text-gray-500",children:D.description})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[D.duration_hours,"h"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",children:s.jsx(tn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>S(D.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:s.jsx(Jt,{className:"w-4 h-4"})})]})]},D.id))})]})]}):s.jsxs("div",{className:"p-8",children:[s.jsx("p",{className:"text-gray-600",children:"Programme introuvable"}),s.jsx("button",{onClick:t,className:"mt-4 text-[#4F6D0B] hover:underline",children:"Retour"})]})}function Hb({question:e,onClose:t,onUpdate:r}){const[n,a]=F.useState([]),[l,u]=F.useState(""),[h,m]=F.useState(!0),[x,g]=F.useState(!1),[N,w]=F.useState(null);F.useEffect(()=>{const b=sessionStorage.getItem("currentUser");if(b){const C=JSON.parse(b);w(C.id)}S(),E()},[]);const E=async()=>{try{await pe.rpc("increment_question_views",{question_id:e.id}),r()}catch(b){console.error("Error incrementing views:",b)}},S=async()=>{try{const{data:b,error:C}=await pe.from("forum_answers").select(`
          *,
          user:local_users(first_name, last_name, user_type)
        `).eq("question_id",e.id).order("is_accepted",{ascending:!1}).order("helpful_count",{ascending:!1}).order("created_at",{ascending:!0});if(C)throw C;a(b||[])}catch(b){console.error("Error loading answers:",b)}finally{m(!1)}},D=async()=>{if(!l.trim()){alert("Veuillez écrire une réponse");return}const b=sessionStorage.getItem("currentUser");if(!b){alert("Vous devez être connecté pour répondre");return}g(!0);try{const C=JSON.parse(b),{error:z}=await pe.from("forum_answers").insert({question_id:e.id,user_id:C.id,content:l.trim()});if(z)throw z;u(""),await S(),r()}catch(C){console.error("Error posting answer:",C),alert("Erreur lors de la publication de la réponse")}finally{g(!1)}},A=async b=>{try{const C=n.find($=>$.id===b);if(!C)return;const{error:z}=await pe.from("forum_answers").update({helpful_count:C.helpful_count+1}).eq("id",b);if(z)throw z;await S()}catch(C){console.error("Error marking helpful:",C)}},j=b=>{const C=new Date(b),$=new Date().getTime()-C.getTime(),U=Math.floor($/6e4),Y=Math.floor($/36e5),Z=Math.floor($/864e5);return U<60?`Il y a ${U} minute${U>1?"s":""}`:Y<24?`Il y a ${Y} heure${Y>1?"s":""}`:Z<7?`Il y a ${Z} jour${Z>1?"s":""}`:C.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 pr-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e.title}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold",children:e.category}),e.subject&&s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:e.subject}),e.level&&s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:e.level}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:j(e.created_at)})]})]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ss,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.content})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:[n.length," Réponse",n.length>1?"s":""]}),h?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Chargement des réponses..."}):n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"Aucune réponse pour le moment"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Soyez le premier à répondre"})]}):s.jsx("div",{className:"space-y-4",children:n.map(b=>{var C,z,$;return s.jsxs("div",{className:`border rounded-lg p-4 ${b.is_accepted?"border-green-500 bg-green-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx(ta,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900",children:[(C=b.user)==null?void 0:C.first_name," ",(z=b.user)==null?void 0:z.last_name,s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:($=b.user)==null?void 0:$.user_type})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:j(b.created_at)})]})]})]}),b.is_accepted&&s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(Du,{className:"w-5 h-5 fill-current"}),s.jsx("span",{className:"text-sm font-medium",children:"Réponse acceptée"})]})]}),s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap mb-3",children:b.content}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("button",{onClick:()=>A(b.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-[#4F6D0B]",children:[s.jsx(b1,{className:"w-4 h-4"}),s.jsxs("span",{children:["Utile (",b.helpful_count,")"]})]})})]},b.id)})})]})]}),s.jsxs("div",{className:"border-t border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Votre réponse"}),s.jsx("textarea",{value:l,onChange:b=>u(b.target.value),placeholder:"Écrivez votre réponse...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B] resize-none"}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsxs("button",{onClick:D,disabled:x||!l.trim(),className:"flex items-center space-x-2 px-6 py-2 bg-[#4F6D0B] text-white rounded-lg font-medium hover:bg-[#4F6D0B]/90 transition disabled:opacity-50",children:[s.jsx(ea,{className:"w-5 h-5"}),s.jsx("span",{children:x?"Publication...":"Publier la réponse"})]})})]})]})})}function Wb(){const[e,t]=F.useState([]),[r,n]=F.useState(!0),[a,l]=F.useState(""),[u,h]=F.useState("Toutes"),[m,x]=F.useState(!1),[g,N]=F.useState(null),[w,E]=F.useState({title:"",content:"",category:"Mathématiques",subject:"",level:""});F.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:b,error:C}=await pe.from("forum_questions").select("*").order("created_at",{ascending:!1}).limit(100);if(C)throw C;const z=await Promise.all((b||[]).map(async $=>{const{count:U}=await pe.from("forum_answers").select("*",{count:"exact",head:!0}).eq("question_id",$.id);return{...$,answer_count:U||0}}));t(z)}catch(b){console.error("Error loading questions:",b)}finally{n(!1)}},D=e.filter(b=>{const C=b.title.toLowerCase().includes(a.toLowerCase())||b.content.toLowerCase().includes(a.toLowerCase()),z=u==="Toutes"||b.category===u;return C&&z}),A=["Toutes","Mathématiques","Français","Physique-Chimie","Histoire-Géo","SVT","Anglais","Autre"],j=async()=>{if(!w.title||!w.content){alert("Veuillez remplir le titre et le contenu de votre question");return}try{const b=sessionStorage.getItem("currentUser"),C=b?JSON.parse(b).id:null,{error:z}=await pe.from("forum_questions").insert([{...w,user_id:C}]);if(z)throw z;x(!1),E({title:"",content:"",category:"Mathématiques",subject:"",level:""}),S(),alert("Question publiée avec succès!")}catch(b){console.error("Error:",b),alert("Erreur lors de la publication")}};return s.jsxs("div",{className:"space-y-6 p-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#4F6D0B] to-[#7DA81E] p-8 text-white",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Forum Communautaire"}),s.jsx("p",{className:"text-white/90",children:"Posez vos questions, partagez vos connaissances et aidez les autres élèves"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher une question...",value:a,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("button",{onClick:()=>x(!0),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white font-medium hover:bg-[#4F6D0B]/90 transition whitespace-nowrap",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Poser une question"})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:A.map(b=>s.jsx("button",{onClick:()=>h(b),className:`px-4 py-2 font-medium whitespace-nowrap transition ${u===b?"bg-[#4F6D0B] text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:b},b))}),r?s.jsx("div",{className:"text-center py-12 text-gray-600",children:"Chargement des questions..."}):s.jsx("div",{className:"space-y-4",children:D.length===0?s.jsxs("div",{className:"text-center py-12 bg-white p-8",children:[s.jsx(Xi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucune question trouvée"}),s.jsx("p",{className:"text-gray-600",children:"Soyez le premier à poser une question dans cette catégorie!"})]}):D.map(b=>s.jsxs("div",{onClick:()=>N(b),className:"bg-white p-6 border hover:shadow-md transition cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm font-medium",children:b.category}),b.subject&&s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm",children:b.subject}),b.level&&s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm",children:b.level})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:b.title}),s.jsx("p",{className:"text-gray-600 line-clamp-2",children:b.content})]}),b.is_answered&&s.jsx("div",{className:"flex-shrink-0 ml-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(eo,{className:"w-4 h-4"}),s.jsxs("span",{children:[b.views_count||0," vues"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Xi,{className:"w-4 h-4"}),s.jsxs("span",{children:[b.answer_count||0," réponse",(b.answer_count||0)>1?"s":""]})]})]}),s.jsx("span",{children:new Date(b.created_at).toLocaleDateString("fr-FR")})]})]},b.id))}),s.jsxs("div",{className:"bg-blue-50 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Règles du forum"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("li",{children:"✓ Soyez respectueux et courtois envers les autres membres"}),s.jsx("li",{children:"✓ Posez des questions claires et détaillées"}),s.jsx("li",{children:"✓ Recherchez avant de poser une question (elle a peut-être déjà été répondue)"}),s.jsx("li",{children:"✓ Marquez les réponses utiles et acceptez la meilleure réponse"}),s.jsx("li",{children:"✗ Pas de spam, publicité ou contenu inapproprié"})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Poser une question"}),s.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:"✕"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de la question *"}),s.jsx("input",{type:"text",value:w.title,onChange:b=>E({...w,title:b.target.value}),placeholder:"Ex: Comment résoudre une équation du second degré?",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catégorie *"}),s.jsx("select",{value:w.category,onChange:b=>E({...w,category:b.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:A.filter(b=>b!=="Toutes").map(b=>s.jsx("option",{value:b,children:b},b))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matière (optionnel)"}),s.jsx("input",{type:"text",value:w.subject,onChange:b=>E({...w,subject:b.target.value}),placeholder:"Ex: Algèbre",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau (optionnel)"}),s.jsxs("select",{value:w.level,onChange:b=>E({...w,level:b.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner"}),s.jsx("option",{value:"6ème",children:"6ème"}),s.jsx("option",{value:"5ème",children:"5ème"}),s.jsx("option",{value:"4ème",children:"4ème"}),s.jsx("option",{value:"3ème",children:"3ème"}),s.jsx("option",{value:"2nde",children:"2nde"}),s.jsx("option",{value:"1ère",children:"1ère"}),s.jsx("option",{value:"Tle",children:"Tle"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Détails de la question *"}),s.jsx("textarea",{value:w.content,onChange:b=>E({...w,content:b.target.value}),placeholder:"Décrivez votre question en détail. Plus vous donnez d'informations, plus les réponses seront pertinentes.",rows:6,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-900 mb-2",children:"Conseils pour une bonne question:"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"• Soyez précis et clair dans votre titre"}),s.jsx("li",{children:"• Expliquez ce que vous avez déjà essayé"}),s.jsx("li",{children:"• Utilisez un langage simple et compréhensible"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>x(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition",children:"Annuler"}),s.jsx("button",{onClick:j,className:"px-6 py-2 bg-[#4F6D0B] text-white font-medium hover:bg-[#4F6D0B]/90 transition",children:"Publier la question"})]})]})]})}),g&&s.jsx(Hb,{question:g,onClose:()=>N(null),onUpdate:S})]})}function Vb(){const[e,t]=F.useState({name:"",email:"",subject:"",message:""}),[r,n]=F.useState(!1),[a,l]=F.useState(!1),u=async h=>{h.preventDefault(),l(!0);try{const m=sessionStorage.getItem("currentUser"),x=m?JSON.parse(m).id:null,{error:g}=await pe.from("contact_messages").insert([{...e,user_id:x,status:"nouveau"}]);if(g)throw g;n(!0),t({name:"",email:"",subject:"",message:""}),setTimeout(()=>n(!1),5e3)}catch(m){console.error("Error:",m),alert("Erreur lors de l'envoi du message")}finally{l(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#4F6D0B] to-[#7DA81E] p-12 text-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Nous Contacter"}),s.jsx("p",{className:"text-xl text-white/90",children:"Une question? Un problème? Notre équipe est là pour vous aider!"})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[s.jsxs("div",{className:"bg-white p-6 text-center shadow-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(my,{className:"w-8 h-8 text-blue-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Email"}),s.jsx("p",{className:"text-gray-600",children:"n.mady@bayaala.com"})]}),s.jsxs("div",{className:"bg-white p-6 text-center shadow-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(yy,{className:"w-8 h-8 text-green-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Téléphone"}),s.jsx("p",{className:"text-gray-600",children:"+225 07 05 91 66 51"})]}),s.jsxs("div",{className:"bg-white p-6 text-center shadow-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(fy,{className:"w-8 h-8 text-purple-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Adresse"}),s.jsx("p",{className:"text-gray-600",children:"Abidjan, Côte d'Ivoire"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white p-8 shadow-sm",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Envoyez-nous un message"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 flex items-center space-x-3",children:[s.jsx(Du,{className:"w-5 h-5 text-green-600"}),s.jsx("p",{className:"text-green-800",children:"Message envoyé avec succès! Nous vous répondrons bientôt."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),s.jsx("input",{type:"text",value:e.name,onChange:h=>t({...e,name:h.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",value:e.email,onChange:h=>t({...e,email:h.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sujet *"}),s.jsxs("select",{value:e.subject,onChange:h=>t({...e,subject:h.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez un sujet"}),s.jsx("option",{value:"Problème technique",children:"Problème technique"}),s.jsx("option",{value:"Question sur un cours",children:"Question sur un cours"}),s.jsx("option",{value:"Suggestion",children:"Suggestion d'amélioration"}),s.jsx("option",{value:"Devenir enseignant",children:"Devenir enseignant"}),s.jsx("option",{value:"Facturation",children:"Facturation"}),s.jsx("option",{value:"Autre",children:"Autre"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),s.jsx("textarea",{value:e.message,onChange:h=>t({...e,message:h.target.value}),rows:6,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white font-semibold hover:bg-[#4F6D0B]/90 transition disabled:opacity-50",children:[s.jsx(ea,{className:"w-5 h-5"}),s.jsx("span",{children:a?"Envoi...":"Envoyer le message"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-8 shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Questions fréquentes"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Comment créer un compte?"}),s.jsx("p",{className:"text-gray-600 text-sm",children:`Cliquez sur "S'inscrire" en haut à droite et suivez les étapes d'inscription.`})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Les cours sont-ils gratuits?"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Nous proposons des contenus gratuits et des programmes premium payants."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Comment devenir enseignant?"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Créez un compte enseignant et complétez votre profil pour commencer à publier du contenu."})]})]})]}),s.jsxs("div",{className:"bg-blue-50 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Horaires de support"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s.jsx("strong",{children:"Lundi - Vendredi:"})," 8h00 - 18h00"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Week-end:"})," 9h00 - 15h00"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Temps de réponse moyen: 24-48 heures"})]})]})]})]})]})}function Gb(){const e=()=>{const t=new CustomEvent("openLogin",{detail:{asTeacher:!0}});window.dispatchEvent(t)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-br from-[#2C5F2D] via-[#4F6D0B] to-[#7DA81E] text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-20",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-5xl font-bold mb-6",children:"Venez enseigner avec nous"}),s.jsx("p",{className:"text-xl text-white/90 mb-8",children:"Rejoignez une communauté d'enseignants passionnés et partagez vos connaissances avec des milliers d'élèves à travers le Cameroun"}),s.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 px-8 py-4 bg-white text-[#4F6D0B] font-bold text-lg hover:bg-gray-100 transition",children:[s.jsx("span",{children:"Commencer"}),s.jsx(Zi,{className:"w-5 h-5"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white/10 p-6 backdrop-blur-sm",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"15K+"}),s.jsx("div",{className:"text-white/80",children:"Élèves actifs"})]}),s.jsxs("div",{className:"bg-white/10 p-6 backdrop-blur-sm",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"500+"}),s.jsx("div",{className:"text-white/80",children:"Enseignants"})]}),s.jsxs("div",{className:"bg-white/10 p-6 backdrop-blur-sm",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"2000+"}),s.jsx("div",{className:"text-white/80",children:"Programmes"})]}),s.jsxs("div",{className:"bg-white/10 p-6 backdrop-blur-sm",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"}),s.jsx("div",{className:"text-white/80",children:"Satisfaction"})]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Pourquoi enseigner sur KN?"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Une plateforme pensée pour les enseignants, avec tous les outils nécessaires pour créer, gérer et monétiser vos contenus pédagogiques"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-20",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Mr,{className:"w-10 h-10 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Large audience"}),s.jsx("p",{className:"text-gray-600",children:"Accédez à des milliers d'élèves motivés cherchant à améliorer leurs résultats"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Vn,{className:"w-10 h-10 text-green-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Revenus attractifs"}),s.jsx("p",{className:"text-gray-600",children:"Gardez 70% de vos ventes et bénéficiez de paiements mensuels réguliers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(bt,{className:"w-10 h-10 text-purple-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Outils puissants"}),s.jsx("p",{className:"text-gray-600",children:"Éditeur mathématique avancé, gestion de contenu intuitive, statistiques détaillées"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Dr,{className:"w-10 h-10 text-orange-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Reconnaissance"}),s.jsx("p",{className:"text-gray-600",children:"Construisez votre réputation et devenez une référence dans votre domaine"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-12 mb-20",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Comment ça marche"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-white p-8",children:[s.jsx("div",{className:"w-12 h-12 bg-[#4F6D0B] text-white rounded-full flex items-center justify-center font-bold text-xl mb-4",children:"1"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Créez votre compte"}),s.jsx("p",{className:"text-gray-600",children:"Inscrivez-vous en quelques minutes et complétez votre profil d'enseignant"})]}),s.jsxs("div",{className:"bg-white p-8",children:[s.jsx("div",{className:"w-12 h-12 bg-[#4F6D0B] text-white rounded-full flex items-center justify-center font-bold text-xl mb-4",children:"2"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Créez votre contenu"}),s.jsx("p",{className:"text-gray-600",children:"Utilisez nos outils pour créer des programmes, exercices et contenus de qualité"})]}),s.jsxs("div",{className:"bg-white p-8",children:[s.jsx("div",{className:"w-12 h-12 bg-[#4F6D0B] text-white rounded-full flex items-center justify-center font-bold text-xl mb-4",children:"3"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Gagnez de l'argent"}),s.jsx("p",{className:"text-gray-600",children:"Publiez vos programmes et commencez à générer des revenus dès maintenant"})]})]})]}),s.jsxs("div",{className:"mb-20",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Ce que disent nos enseignants"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-white p-6 shadow-md border-t-4 border-[#4F6D0B]",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:"Mme Ngo Balla"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Prof. de Mathématiques"})]})]}),s.jsx("p",{className:"text-gray-600 italic",children:`"KN m'a permis d'atteindre bien plus d'élèves que je ne l'aurais jamais imaginé. La plateforme est intuitive et le support excellent."`})]}),s.jsxs("div",{className:"bg-white p-6 shadow-md border-t-4 border-[#4F6D0B]",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:"M. Kamga Jean"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Prof. de Physique"})]})]}),s.jsx("p",{className:"text-gray-600 italic",children:`"En 6 mois, j'ai créé 15 programmes et généré des revenus significatifs. C'est une vraie révolution pour l'éducation au Cameroun."`})]}),s.jsxs("div",{className:"bg-white p-6 shadow-md border-t-4 border-[#4F6D0B]",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:"Mme Fouda Marie"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Prof. de Français"})]})]}),s.jsx("p",{className:"text-gray-600 italic",children:`"J'adore la flexibilité qu'offre KN. Je peux créer du contenu à mon rythme et mes élèves progressent vraiment."`})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-12 text-white text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Prêt à commencer votre aventure d'enseignement?"}),s.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Rejoignez des centaines d'enseignants qui transforment déjà l'éducation et génèrent des revenus avec leurs connaissances"}),s.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 px-8 py-4 bg-white text-blue-600 font-bold text-lg hover:bg-gray-100 transition",children:[s.jsx("span",{children:"Créer mon compte enseignant"}),s.jsx(Zi,{className:"w-5 h-5"})]})]}),s.jsxs("div",{className:"mt-20",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Questions fréquentes"}),s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 shadow-sm border-l-4 border-[#4F6D0B]",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Ai-je besoin d'être enseignant certifié?"}),s.jsx("p",{className:"text-gray-600",children:"Non, nous accueillons tous les experts passionnés. Que vous soyez enseignant certifié, répétiteur ou professionnel, vous pouvez partager vos connaissances."})]}),s.jsxs("div",{className:"bg-white p-6 shadow-sm border-l-4 border-[#4F6D0B]",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Comment suis-je rémunéré?"}),s.jsx("p",{className:"text-gray-600",children:"Vous recevez 70% du prix de vente de vos programmes. Les paiements sont effectués mensuellement via mobile money ou virement bancaire."})]}),s.jsxs("div",{className:"bg-white p-6 shadow-sm border-l-4 border-[#4F6D0B]",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Combien de temps faut-il pour créer un programme?"}),s.jsx("p",{className:"text-gray-600",children:"Cela dépend de la complexité, mais avec nos outils, vous pouvez créer votre premier programme en quelques heures seulement."})]}),s.jsxs("div",{className:"bg-white p-6 shadow-sm border-l-4 border-[#4F6D0B]",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Y a-t-il des frais d'inscription?"}),s.jsx("p",{className:"text-gray-600",children:"Non, l'inscription et l'utilisation de la plateforme sont entièrement gratuites. Nous ne prenons qu'une commission sur les ventes."})]})]})]})]})]})}function Qb(){const[e,t]=F.useState(!1),[r,n]=F.useState("home"),[a,l]=F.useState(null),[u,h]=F.useState(null),[m,x]=F.useState(!1),[g,N]=F.useState(!1);F.useEffect(()=>{const S=sessionStorage.getItem("currentUser");S&&l(JSON.parse(S))},[]);const w=(a==null?void 0:a.userType)==="enseignant",E=()=>{switch(r){case"home":return s.jsx($m,{onViewChange:n});case"dashboard":return w?s.jsx(Hm,{}):s.jsx(zb,{onQuickQuizStart:()=>n("quick-quiz")});case"my-programs":return s.jsx(Pb,{onViewChange:n,onSidebarVisibilityChange:x,onTopNavVisibilityChange:N});case"getting-started":return s.jsx(Ib,{});case"program-manager":return s.jsx(Hm,{onCreateProgram:()=>n("program-creator"),onViewStats:S=>{h(S),n("program-stats")},onManageProgram:S=>{h(S),n("program-manage")}});case"program-stats":return u?s.jsx($b,{programId:u,onBack:()=>n("program-manager")}):null;case"program-manage":return u?s.jsx(Ub,{programId:u,onBack:()=>n("program-manager")}):null;case"program-creator":return s.jsx(V1,{onClose:()=>n("home")});case"homework-manager":return s.jsx("div",{className:"p-8",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Devoir Manager - En construction"})});case"performance":return s.jsx(Lb,{});case"payments":return s.jsx(Ob,{});case"quick-quiz":return s.jsx(gb,{});case"math-editor":return s.jsx(Xs,{});case"affichage":return s.jsx(Db,{onBack:()=>n("home")});case"e-biblio":return s.jsx("div",{className:"p-8",children:s.jsx("h1",{className:"text-2xl font-bold",children:"e-Biblio - En construction"})});case"forum":return s.jsx(Wb,{});case"contact":return s.jsx(Vb,{});case"teach-with-us":return s.jsx(Gb,{});default:return s.jsx($m,{onViewChange:n})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[!m&&s.jsx(Dy,{isOpen:e,onClose:()=>t(!1),onViewChange:n,currentView:r}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[!g&&s.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-4",children:[s.jsx("button",{onClick:()=>t(!0),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",children:s.jsx(py,{className:"h-6 w-6 text-gray-600"})}),s.jsx(sb,{onViewChange:n})]}),s.jsx("main",{className:"flex-1 overflow-auto",children:E()})]})]})}const Kb=[{icon:g1,label:"Gestion des Élèves",view:"students",roles:["gestionnaire_general","gestionnaire"]},{icon:by,label:"Gestion des Enseignants",view:"teachers",roles:["gestionnaire_general","gestionnaire"]},{icon:m1,label:"Gestion des Écoles",view:"schools",roles:["gestionnaire_general","gestionnaire"]},{icon:Cy,label:"Administrateurs",view:"admins",roles:["gestionnaire_general"]},{icon:bt,label:"Contenu",view:"content",roles:["gestionnaire_general","gestionnaire"]},{icon:vm,label:"Gestion des Programmes",view:"programs",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:ny,label:"Gestion des Questions",view:"questions",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:iy,label:"Gestion des Examens",view:"exams",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:p1,label:"Gestion des Devoirs",view:"homeworks",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:vm,label:"Gestion des Exercices",view:"exercises",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:Mu,label:"Éditeur Math",view:"math-editor",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:tn,label:"Poster",view:"poster",roles:["gestionnaire_general","gestionnaire","documentier"]},{icon:Au,label:"Paramètres",view:"settings",roles:["gestionnaire_general","gestionnaire"]}];function Jb({currentView:e,onViewChange:t}){const n=JSON.parse(sessionStorage.getItem("currentUser")||"{}").role||"",a=Kb.filter(l=>l.roles.includes(n));return s.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0",children:s.jsxs("div",{className:"h-full px-3 py-4 flex flex-col",children:[s.jsxs("div",{className:"flex items-center px-2 mb-8",children:[s.jsx("div",{className:"bg-[#462D12] text-white p-2 rounded-lg",children:s.jsx(bt,{className:"h-6 w-6"})}),s.jsx("h1",{className:"ml-3 text-xl font-bold text-[#462D12]",children:"Admin"})]}),s.jsx("nav",{className:"flex-1 space-y-1",children:a.map(l=>s.jsxs("button",{onClick:()=>t(l.view),className:`flex items-center px-2 py-3 w-full rounded-lg transition-colors group ${e===l.view?"bg-[#4F6D0B] text-white":"text-gray-700 hover:bg-[#4F6D0B] hover:text-white"}`,children:[s.jsx(l.icon,{className:`h-5 w-5 ${e===l.view?"text-white":"group-hover:text-white"}`}),s.jsx("span",{className:"ml-3 text-sm font-medium",children:l.label})]},l.label))}),s.jsx("div",{className:"mt-auto pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"px-2 py-3",children:[s.jsx("div",{className:"text-xs font-medium text-gray-400 uppercase",children:"Statistiques"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Élèves actifs"}),s.jsx("span",{className:"font-medium text-gray-900",children:"2,847"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Enseignants"}),s.jsx("span",{className:"font-medium text-gray-900",children:"142"})]})]})]})})]})})}function Yb({onLogout:e}){return s.jsx("header",{className:"bg-white border-b border-gray-200 h-16",children:s.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Retour à l'accueil"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:s.jsx(K2,{className:"h-5 w-5"})}),s.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:s.jsx(ta,{className:"h-5 w-5"})}),s.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[s.jsx(hy,{className:"h-4 w-4 mr-2"}),"Déconnexion"]})]})]})})}function Wm(){const[e,t]=F.useState([]),[r,n]=F.useState("");F.useEffect(()=>{a()},[]);const a=async()=>{try{const{data:h,error:m}=await pe.from("local_users").select("*").eq("user_type","élève").order("created_at",{ascending:!1});if(m)throw m;t(h||[])}catch(h){console.error("Erreur:",h)}},l=e.filter(h=>h.first_name.toLowerCase().includes(r.toLowerCase())||h.last_name.toLowerCase().includes(r.toLowerCase())||h.school_name&&h.school_name.toLowerCase().includes(r.toLowerCase())),u=h=>new Date(h).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Élèves"}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx(x1,{className:"h-4 w-4 mr-2"}),"Exporter"]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un élève...",value:r,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx(ca,{className:"h-4 w-4 mr-2"}),"Filtres"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Établissement"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'inscription"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(h=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.id.substring(0,8)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[h.first_name," ",h.last_name]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.current_class||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.school_name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(h.created_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Actif"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{className:"text-[#4F6D0B] hover:text-[#4F6D0B]/80",children:"Détails"})})]},h.id))})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",l.length," élève",l.length>1?"s":""]})})})]})]})}function Xb(){const[e,t]=F.useState([]),[r,n]=F.useState("");F.useEffect(()=>{a()},[]);const a=async()=>{try{const{data:x,error:g}=await pe.from("local_users").select("*").eq("user_type","enseignant").order("created_at",{ascending:!1});if(g)throw g;t(x||[])}catch(x){console.error("Erreur:",x)}},l=x=>new Date(x).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),u=x=>({mathematiques:"Mathématiques","physique-chimie":"Physique-Chimie",svt:"Sciences de la Vie et de la Terre",francais:"Français","histoire-geo":"Histoire-Géographie",anglais:"Anglais",philosophie:"Philosophie",ses:"Sciences Économiques et Sociales"})[x]||x,h=x=>x?Array.isArray(x)?x.map(g=>u(g)).join(", "):u(x):"-",m=e.filter(x=>x.first_name.toLowerCase().includes(r.toLowerCase())||x.last_name.toLowerCase().includes(r.toLowerCase())||x.school_name&&x.school_name.toLowerCase().includes(r.toLowerCase()));return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Enseignants"}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx(x1,{className:"h-4 w-4 mr-2"}),"Exporter"]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un enseignant...",value:r,onChange:x=>n(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx(ca,{className:"h-4 w-4 mr-2"}),"Filtres"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matière"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classes"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Établissements"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'inscription"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(x=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.id.substring(0,8)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.first_name," ",x.last_name]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(x.subjects)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.class_level||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.school_name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(x.created_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Actif"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{className:"text-[#4F6D0B] hover:text-[#4F6D0B]/80",children:"Détails"})})]},x.id))})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",m.length," enseignant",m.length>1?"s":""]})})})]})]})}function Zb(){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion du Contenu"}),s.jsxs("button",{className:"flex items-center px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"h-4 w-4 mr-2"}),"Nouveau Contenu"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher du contenu...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx(ca,{className:"h-4 w-4 mr-2"}),"Filtres"]})]})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium",children:"Cours de Mathématiques"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Dernière mise à jour: 12/03/2024"})]}),s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium",children:"Cours de Physique"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Dernière mise à jour: 10/03/2024"})]}),s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium",children:"Cours de Chimie"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Dernière mise à jour: 08/03/2024"})]})]})})]})]})}function e3(){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Paramètres"}),s.jsxs("button",{className:"flex items-center px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Paramètres Généraux"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'établissement"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",defaultValue:"KN"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email de contact"}),s.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",defaultValue:"n.mady@bayaala.com"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"emailNotifications",className:"h-4 w-4 text-[#4F6D0B] focus:ring-[#4F6D0B] border-gray-300 rounded",defaultChecked:!0}),s.jsx("label",{htmlFor:"emailNotifications",className:"ml-2 text-sm text-gray-700",children:"Activer les notifications par email"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"smsNotifications",className:"h-4 w-4 text-[#4F6D0B] focus:ring-[#4F6D0B] border-gray-300 rounded"}),s.jsx("label",{htmlFor:"smsNotifications",className:"ml-2 text-sm text-gray-700",children:"Activer les notifications par SMS"})]})]})]})]})})]})}function t3(){const[e,t]=F.useState([]),[r,n]=F.useState(""),[a,l]=F.useState(!1),[u,h]=F.useState({firstName:"",lastName:"",role:"",username:"",password:"",passwordConfirm:""}),[m,x]=F.useState("");F.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:S,error:D}=await pe.from("profiles").select("*").eq("user_type","admin").order("created_at",{ascending:!1});if(D)throw D;t(S||[])}catch(S){console.error("Erreur:",S)}},N=async S=>{if(S.preventDefault(),x(""),u.password!==u.passwordConfirm){x("Les mots de passe ne correspondent pas");return}try{const{data:D,error:A}=await pe.auth.signUp({email:u.username,password:u.password,options:{data:{first_name:u.firstName,last_name:u.lastName,user_type:"admin"}}});if(A)throw A;if(D.user){const{error:j}=await pe.from("profiles").insert([{id:D.user.id,first_name:u.firstName,last_name:u.lastName,email:u.username,user_type:"admin"}]);if(j)throw j}await g(),l(!1),h({firstName:"",lastName:"",role:"",username:"",password:"",passwordConfirm:""})}catch(D){x(D.message||"Erreur lors de la création de l'administrateur")}},w=e.filter(S=>S.first_name.toLowerCase().includes(r.toLowerCase())||S.last_name.toLowerCase().includes(r.toLowerCase())||S.email.toLowerCase().includes(r.toLowerCase())),E=S=>new Date(S).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Administrateurs"}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"h-4 w-4 mr-2"}),"Ajouter un administrateur"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un administrateur...",value:r,onChange:S=>n(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("button",{className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx(ca,{className:"h-4 w-4 mr-2"}),"Filtres"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Identifiant"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de création"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(S=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.id.substring(0,8)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S.first_name," ",S.last_name]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Administrateur"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E(S.created_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{className:"text-[#4F6D0B] hover:text-[#4F6D0B]/80",children:"Modifier"})})]},S.id))})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",w.length," administrateur",w.length>1?"s":""]})})})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Ajouter un administrateur"}),s.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsx(Ss,{className:"h-5 w-5 text-gray-500"})})]}),s.jsxs("form",{onSubmit:N,className:"p-6",children:[m&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:m}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),s.jsx("input",{type:"text",value:u.firstName,onChange:S=>h({...u,firstName:S.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),s.jsx("input",{type:"text",value:u.lastName,onChange:S=>h({...u,lastName:S.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle"}),s.jsxs("select",{value:u.role,onChange:S=>h({...u,role:S.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez un rôle"}),s.jsx("option",{value:"gestionnaire_general",children:"Gestionnaire Général"}),s.jsx("option",{value:"gestionnaire",children:"Gestionnaire"}),s.jsx("option",{value:"documentier",children:"Documentier"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identifiant"}),s.jsx("input",{type:"text",value:u.username,onChange:S=>h({...u,username:S.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),s.jsx("input",{type:"password",value:u.password,onChange:S=>h({...u,password:S.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,minLength:6})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),s.jsx("input",{type:"password",value:u.passwordConfirm,onChange:S=>h({...u,passwordConfirm:S.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:"Ajouter"})]})]})]})})]})}function s3(){const[e,t]=F.useState(null),[r,n]=F.useState(!1),[a,l]=F.useState(""),[u,h]=F.useState([]),[m,x]=F.useState(!1),[g,N]=F.useState(null),[w,E]=F.useState(null),[S,D]=F.useState([]),[A,j]=F.useState({title:"",subject:"",level:"",difficulty:"",period:"",examType:"",durationMinutes:0,totalPoints:0,devoirDate:"",schoolId:"",instructions:""}),b=["Débutant","Progressif","Moyen","Difficile","Approfondi","Légende"];F.useEffect(()=>{C()},[]);const C=async()=>{try{const{data:X,error:ee}=await pe.from("schools").select("*").eq("is_active",!0).order("name");if(ee)throw ee;D(X||[])}catch(X){console.error("Error loading schools:",X)}},z=X=>({Débutant:"bg-green-100 text-green-800",Progressif:"bg-blue-100 text-blue-800",Moyen:"bg-yellow-100 text-yellow-800",Difficile:"bg-orange-100 text-orange-800",Approfondi:"bg-pink-100 text-pink-800",Légende:"bg-purple-100 text-purple-800"})[X],$=X=>{t(X),(X==="exam"||X==="homework")&&n(!0)},U=()=>{t(null),n(!1),l(""),h([]),x(!1),N(null),E(null),j({title:"",subject:"",level:"",difficulty:"",period:"",examType:"",durationMinutes:0,totalPoints:0,devoirDate:"",schoolId:"",instructions:""})},Y=async()=>{try{if(e==="exam"){const{data:X,error:ee}=await pe.from("exams").insert([{title:A.title,subject:A.subject,level:A.level,difficulty:A.difficulty,period:A.period,exam_type:A.examType,duration_minutes:A.durationMinutes,total_points:A.totalPoints,instructions:A.instructions}]).select().single();if(ee)throw ee;N(X.id)}else if(e==="homework"){const{data:X,error:ee}=await pe.from("homeworks").insert([{title:A.title,subject:A.subject,level:A.level,difficulty:A.difficulty,devoir_date:A.devoirDate,school_id:A.schoolId||null,instructions:A.instructions}]).select().single();if(ee)throw ee;E(X.id)}n(!1),Z()}catch(X){console.error("Error creating exam/homework:",X)}},Z=async()=>{try{if(g){const{data:X,error:ee}=await pe.from("exercises").select("*").eq("exam_id",g).order("exercise_number");if(ee)throw ee;h(X||[])}else if(w){const{data:X,error:ee}=await pe.from("exercises").select("*").eq("homework_id",w).order("exercise_number");if(ee)throw ee;h(X||[])}}catch(X){console.error("Error loading exercises:",X)}};return F.useEffect(()=>{(g||w)&&Z()},[g,w]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Créer un sujet"}),e&&s.jsx("button",{onClick:U,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"})]}),!e&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Type de sujet"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>$("free"),className:"w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Libre"}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Créer une question sans lien avec un sujet existant"})]}),s.jsxs("button",{onClick:()=>$("exam"),className:"w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Examen"}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Ajouter une question depuis un sujet d'examen"})]}),s.jsxs("button",{onClick:()=>$("homework"),className:"w-full text-left p-4 border rounded-lg hover:bg-gray-50 transition",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Devoir"}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Ajouter une question depuis un devoir"})]})]})]}),e==="free"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Choisissez un niveau de difficulté"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(X=>s.jsx("button",{onClick:()=>l(X),className:`p-6 rounded-lg border-2 transition text-lg font-semibold ${a===X?"border-[#4F6D0B] bg-[#4F6D0B]/5":"border-gray-200 hover:border-gray-300"} ${z(X)}`,children:X},X))}),a&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Créer votre question"}),s.jsx(Xs,{value:"",onChange:(X,ee)=>{console.log("Question created:",{text:X,figureData:ee,difficulty:a})}}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Enregistrer la question"})})]})]}),(e==="exam"||e==="homework")&&r&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Informations du ",e==="exam"?"l'examen":"devoir"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre *"}),s.jsx("input",{type:"text",required:!0,value:A.title,onChange:X=>j({...A,title:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:`Ex: ${e==="exam"?"Examen de mathématiques - Trimestre 1":"Devoir surveillé n°1"}`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matière *"}),s.jsx("input",{type:"text",required:!0,value:A.subject,onChange:X=>j({...A,subject:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Mathématiques"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau *"}),s.jsxs("select",{required:!0,value:A.level,onChange:X=>j({...A,level:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner un niveau"}),s.jsx("option",{value:"6ème",children:"6ème"}),s.jsx("option",{value:"5ème",children:"5ème"}),s.jsx("option",{value:"4ème",children:"4ème"}),s.jsx("option",{value:"3ème",children:"3ème"}),s.jsx("option",{value:"Seconde",children:"Seconde"}),s.jsx("option",{value:"Première",children:"Première"}),s.jsx("option",{value:"Terminale",children:"Terminale"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulté *"}),s.jsxs("select",{required:!0,value:A.difficulty,onChange:X=>j({...A,difficulty:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner une difficulté"}),b.map(X=>s.jsx("option",{value:X,children:X},X))]})]}),e==="exam"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Période *"}),s.jsx("input",{type:"text",required:!0,value:A.period,onChange:X=>j({...A,period:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Janvier 2024"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'examen *"}),s.jsxs("select",{required:!0,value:A.examType,onChange:X=>j({...A,examType:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner un type"}),s.jsx("option",{value:"Examen blanc",children:"Examen blanc"}),s.jsx("option",{value:"Examen final",children:"Examen final"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durée (minutes)"}),s.jsx("input",{type:"number",min:"0",value:A.durationMinutes,onChange:X=>j({...A,durationMinutes:parseInt(X.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: 120"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points totaux"}),s.jsx("input",{type:"number",min:"0",step:"0.5",value:A.totalPoints,onChange:X=>j({...A,totalPoints:parseFloat(X.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: 20"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date du devoir"}),s.jsx("input",{type:"date",value:A.devoirDate,onChange:X=>j({...A,devoirDate:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lycée / Collège"}),s.jsxs("select",{value:A.schoolId,onChange:X=>j({...A,schoolId:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner un établissement"}),S.map(X=>s.jsxs("option",{value:X.id,children:[X.name," - ",X.city]},X.id))]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),s.jsx("textarea",{rows:4,value:A.instructions,onChange:X=>j({...A,instructions:X.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:`Instructions générales pour ${e==="exam"?"l'examen":"le devoir"}...`})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:Y,className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Continuer"})})]})]}),(e==="exam"||e==="homework")&&!r&&!m&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Exercices disponibles"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.map(X=>s.jsxs("button",{className:"p-4 border-2 border-gray-200 rounded-lg hover:border-[#4F6D0B] hover:bg-gray-50 transition text-center",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:["Exercice ",X.exercise_number]}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[X.question_count," questions"]})]},X.id)),s.jsx("button",{onClick:()=>x(!0),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#4F6D0B] hover:bg-gray-50 transition text-center",children:s.jsx("div",{className:"font-medium text-gray-700",children:"+ Ajouter"})})]})]}),(e==="exam"||e==="homework")&&m&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nouvel exercice"}),s.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numéro de l'exercice"}),s.jsx("input",{type:"number",min:"1",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Énoncé de l'exercice"}),s.jsx(Xs,{value:"",onChange:(X,ee)=>{console.log("Exercise statement:",{text:X,figureData:ee})}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points totaux de l'exercice"}),s.jsx("input",{type:"number",min:"0",step:"0.5",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"10"})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions de l'exercice"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question 1"}),s.jsx(Xs,{value:"",onChange:(X,ee)=>{console.log("Question 1:",{text:X,figureData:ee})}})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),s.jsx("input",{type:"number",min:"0",step:"0.5",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulté"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner"}),b.map(X=>s.jsx("option",{value:X,children:X},X))]})]})]})]}),s.jsx("button",{className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#4F6D0B] hover:bg-gray-50 text-gray-700 font-medium",children:"+ Ajouter une question"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{onClick:()=>x(!1),className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Enregistrer l'exercice"})]})]})]})]})}function r3(){const[e,t]=F.useState(!1),[r,n]=F.useState([]),[a,l]=F.useState(""),[u,h]=F.useState("all");F.useEffect(()=>{m()},[e]);const m=async()=>{try{const{data:g,error:N}=await pe.from("questions").select("*").order("created_at",{ascending:!1});if(N)throw N;n(g||[])}catch(g){console.error("Erreur:",g)}},x=r.filter(g=>{const N=g.text.toLowerCase().includes(a.toLowerCase()),w=u==="all"||g.subject===u;return N&&w});return e?s.jsxs("div",{className:"h-full",children:[s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:()=>t(!1),className:"text-gray-600 hover:text-gray-900",children:"← Retour à la liste"})}),s.jsx(Xs,{})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des questions"}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{onClick:()=>t(!0),className:"flex items-center px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"h-5 w-5 mr-2"}),"Nouvelle Question"]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher une question...",value:a,onChange:g=>l(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]}),s.jsxs("select",{value:u,onChange:g=>h(g.target.value),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[s.jsx("option",{value:"all",children:"Filtres"}),s.jsx("option",{value:"Mathématiques",children:"Mathématiques"}),s.jsx("option",{value:"Physique-Chimie",children:"Physique-Chimie"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matière"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Niveau"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Figure"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de création"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(g=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.id.substring(0,8)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsx("div",{className:"line-clamp-1 max-w-xs",children:g.text})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.subject}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.level}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.figure_data&&g.figure_data.length>0?"text-green-700 bg-green-100":"text-gray-700 bg-gray-100"}`,children:g.figure_data&&g.figure_data.length>0?"Oui":"Non"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.created_at).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{onClick:()=>{sessionStorage.setItem("previewQuestionId",g.id),window.location.href="/quick-quiz"},className:"text-[#4F6D0B] hover:text-[#4F6D0B]/80",children:"Détails"})})]},g.id))})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",x.length," question",x.length>1?"s":""]})})})]})]})}function n3(){const[e,t]=F.useState([]),[r,n]=F.useState(!0),[a,l]=F.useState(!1),[u,h]=F.useState(null),[m,x]=F.useState({title:"",subject:"",level:"",difficulty:"",duration_minutes:0,total_points:0,instructions:""}),g=["Débutant","Progressif","Moyen","Difficile","Approfondi","Légende"];F.useEffect(()=>{N()},[]);const N=async()=>{try{n(!0);const{data:j,error:b}=await pe.from("exams").select("*").order("created_at",{ascending:!1});if(b)throw b;t(j||[])}catch(j){console.error("Error loading exams:",j)}finally{n(!1)}},w=async j=>{j.preventDefault();try{if(u){const{error:b}=await pe.from("exams").update({...m,updated_at:new Date().toISOString()}).eq("id",u.id);if(b)throw b}else{const{error:b}=await pe.from("exams").insert([m]);if(b)throw b}D(),N()}catch(b){console.error("Error saving exam:",b)}},E=j=>{h(j),x({title:j.title,subject:j.subject,level:j.level,difficulty:j.difficulty,duration_minutes:j.duration_minutes,total_points:j.total_points,instructions:j.instructions}),l(!0)},S=async j=>{if(confirm("Êtes-vous sûr de vouloir supprimer cet examen ?"))try{const{error:b}=await pe.from("exams").delete().eq("id",j);if(b)throw b;N()}catch(b){console.error("Error deleting exam:",b)}},D=()=>{x({title:"",subject:"",level:"",difficulty:"",duration_minutes:0,total_points:0,instructions:""}),h(null),l(!1)},A=j=>({Débutant:"bg-green-100 text-green-800",Progressif:"bg-blue-100 text-blue-800",Moyen:"bg-yellow-100 text-yellow-800",Difficile:"bg-orange-100 text-orange-800",Approfondi:"bg-pink-100 text-pink-800",Légende:"bg-purple-100 text-purple-800"})[j];return a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u?"Modifier l'examen":"Nouvel examen"}),s.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"})]}),s.jsxs("form",{onSubmit:w,className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre de l'examen *"}),s.jsx("input",{type:"text",required:!0,value:m.title,onChange:j=>x({...m,title:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Examen de mathématiques - Trimestre 1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matière *"}),s.jsx("input",{type:"text",required:!0,value:m.subject,onChange:j=>x({...m,subject:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Mathématiques"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau *"}),s.jsxs("select",{required:!0,value:m.level,onChange:j=>x({...m,level:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner un niveau"}),s.jsx("option",{value:"6ème",children:"6ème"}),s.jsx("option",{value:"5ème",children:"5ème"}),s.jsx("option",{value:"4ème",children:"4ème"}),s.jsx("option",{value:"3ème",children:"3ème"}),s.jsx("option",{value:"Seconde",children:"Seconde"}),s.jsx("option",{value:"Première",children:"Première"}),s.jsx("option",{value:"Terminale",children:"Terminale"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulté *"}),s.jsxs("select",{required:!0,value:m.difficulty,onChange:j=>x({...m,difficulty:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner une difficulté"}),g.map(j=>s.jsx("option",{value:j,children:j},j))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durée (minutes)"}),s.jsx("input",{type:"number",min:"0",value:m.duration_minutes,onChange:j=>x({...m,duration_minutes:parseInt(j.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: 120"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points totaux"}),s.jsx("input",{type:"number",min:"0",step:"0.5",value:m.total_points,onChange:j=>x({...m,total_points:parseFloat(j.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: 20"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),s.jsx("textarea",{rows:4,value:m.instructions,onChange:j=>x({...m,instructions:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Instructions générales pour l'examen..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:D,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:u?"Mettre à jour":"Créer l'examen"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Examens"}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Nouvel examen"})]})]}),r?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement..."})}):e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(oa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun examen"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par créer votre premier examen"}),s.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Créer un examen"})]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(j=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:j.title}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("p",{children:[j.subject," - ",j.level]}),s.jsx("p",{className:"flex items-center space-x-2",children:s.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${A(j.difficulty)}`,children:j.difficulty})})]})]})}),s.jsx("div",{className:"border-t pt-4 mb-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Durée"}),s.jsxs("div",{className:"font-medium text-gray-900",children:[j.duration_minutes," min"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Points"}),s.jsx("div",{className:"font-medium text-gray-900",children:j.total_points})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("div",{className:"text-gray-500",children:"Exercices"}),s.jsx("div",{className:"font-medium text-gray-900",children:j.exercise_count})]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>E(j),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsx("span",{children:"Modifier"})]}),s.jsxs("button",{onClick:()=>S(j.id),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100",children:[s.jsx(Jt,{className:"w-4 h-4"}),s.jsx("span",{children:"Supprimer"})]})]})]},j.id))})]})}function i3(){const[e,t]=F.useState([]),[r,n]=F.useState(!0),[a,l]=F.useState(!1),[u,h]=F.useState(null),[m,x]=F.useState({title:"",subject:"",level:"",difficulty:"",devoir_date:"",instructions:""}),g=["Débutant","Progressif","Moyen","Difficile","Approfondi","Légende"];F.useEffect(()=>{N()},[]);const N=async()=>{try{n(!0);const{data:j,error:b}=await pe.from("homeworks").select("*").order("created_at",{ascending:!1});if(b)throw b;t(j||[])}catch(j){console.error("Error loading homeworks:",j)}finally{n(!1)}},w=async j=>{j.preventDefault();try{if(u){const{error:b}=await pe.from("homeworks").update({...m,updated_at:new Date().toISOString()}).eq("id",u.id);if(b)throw b}else{const{error:b}=await pe.from("homeworks").insert([m]);if(b)throw b}D(),N()}catch(b){console.error("Error saving homework:",b)}},E=j=>{h(j),x({title:j.title,subject:j.subject,level:j.level,difficulty:j.difficulty,devoir_date:j.devoir_date,instructions:j.instructions}),l(!0)},S=async j=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce devoir ?"))try{const{error:b}=await pe.from("homeworks").delete().eq("id",j);if(b)throw b;N()}catch(b){console.error("Error deleting homework:",b)}},D=()=>{x({title:"",subject:"",level:"",difficulty:"",devoir_date:"",instructions:""}),h(null),l(!1)},A=j=>({Débutant:"bg-green-100 text-green-800",Progressif:"bg-blue-100 text-blue-800",Moyen:"bg-yellow-100 text-yellow-800",Difficile:"bg-orange-100 text-orange-800",Approfondi:"bg-pink-100 text-pink-800",Légende:"bg-purple-100 text-purple-800"})[j];return a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u?"Modifier le devoir":"Nouveau devoir"}),s.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"})]}),s.jsxs("form",{onSubmit:w,className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre du devoir *"}),s.jsx("input",{type:"text",required:!0,value:m.title,onChange:j=>x({...m,title:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Devoir de mathématiques - Chapitre 3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matière *"}),s.jsx("input",{type:"text",required:!0,value:m.subject,onChange:j=>x({...m,subject:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Mathématiques"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau *"}),s.jsxs("select",{required:!0,value:m.level,onChange:j=>x({...m,level:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner un niveau"}),s.jsx("option",{value:"6ème",children:"6ème"}),s.jsx("option",{value:"5ème",children:"5ème"}),s.jsx("option",{value:"4ème",children:"4ème"}),s.jsx("option",{value:"3ème",children:"3ème"}),s.jsx("option",{value:"Seconde",children:"Seconde"}),s.jsx("option",{value:"Première",children:"Première"}),s.jsx("option",{value:"Terminale",children:"Terminale"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulté *"}),s.jsxs("select",{required:!0,value:m.difficulty,onChange:j=>x({...m,difficulty:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionner une difficulté"}),g.map(j=>s.jsx("option",{value:j,children:j},j))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date du devoir"}),s.jsx("input",{type:"date",value:m.devoir_date,onChange:j=>x({...m,devoir_date:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),s.jsx("textarea",{rows:4,value:m.instructions,onChange:j=>x({...m,instructions:j.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Instructions générales pour le devoir..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:D,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:u?"Mettre à jour":"Créer le devoir"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Devoirs"}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Nouveau devoir"})]})]}),r?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement..."})}):e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(oa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun devoir"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par créer votre premier devoir"}),s.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Créer un devoir"})]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(j=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:j.title}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("p",{children:[j.subject," - ",j.level]}),s.jsx("p",{className:"flex items-center space-x-2",children:s.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${A(j.difficulty)}`,children:j.difficulty})})]})]})}),s.jsx("div",{className:"border-t pt-4 mb-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("div",{className:"text-gray-500",children:"Date du devoir"}),s.jsx("div",{className:"font-medium text-gray-900",children:j.devoir_date?new Date(j.devoir_date).toLocaleDateString("fr-FR"):"Non définie"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("div",{className:"text-gray-500",children:"Exercices"}),s.jsx("div",{className:"font-medium text-gray-900",children:j.exercise_count})]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>E(j),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsx("span",{children:"Modifier"})]}),s.jsxs("button",{onClick:()=>S(j.id),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100",children:[s.jsx(Jt,{className:"w-4 h-4"}),s.jsx("span",{children:"Supprimer"})]})]})]},j.id))})]})}function a3(){const[e,t]=F.useState([]),[r,n]=F.useState([]),[a,l]=F.useState(!0);F.useEffect(()=>{u()},[]);const u=async()=>{try{l(!0);const[x,g,N]=await Promise.all([pe.from("exercises").select("*").order("created_at",{ascending:!1}),pe.from("exams").select("id, title"),pe.from("homeworks").select("id, title")]);if(x.error)throw x.error;if(g.error)throw g.error;if(N.error)throw N.error;t(x.data||[]);const w=[...(g.data||[]).map(E=>({...E,type:"exam"})),...(N.data||[]).map(E=>({...E,type:"homework"}))];n(w)}catch(x){console.error("Error loading data:",x)}finally{l(!1)}},h=x=>x.split(/(\$[^$]+\$)/g).map((N,w)=>{if(N.startsWith("$")&&N.endsWith("$")){const E=N.slice(1,-1);return s.jsx(Xt.InlineMath,{math:E},w)}return s.jsx("span",{children:N},w)}),m=x=>{if(x.exam_id){const g=r.find(N=>N.id===x.exam_id&&N.type==="exam");return g?{title:g.title,type:"Examen"}:null}if(x.homework_id){const g=r.find(N=>N.id===x.homework_id&&N.type==="homework");return g?{title:g.title,type:"Devoir"}:null}return null};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Exercices"})}),a?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement..."})}):e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(oa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun exercice"}),s.jsx("p",{className:"text-gray-500",children:'Créez des exercices depuis la section "Poster"'})]}):s.jsx("div",{className:"space-y-4",children:e.map(x=>{const g=m(x);return s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition",children:s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Exercice ",x.exercise_number]}),g&&s.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[g.type,": ",g.title]})]}),s.jsx("div",{className:"prose max-w-none mb-4",children:s.jsx("div",{className:"text-gray-700 text-sm line-clamp-3",children:h(x.statement)})}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:x.question_count})," question(s)"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:x.total_points})," point(s)"]})]})]})})},x.id)})})]})}function l3(){const[e,t]=F.useState([]),[r,n]=F.useState(!0),[a,l]=F.useState(!1),[u,h]=F.useState(null),[m,x]=F.useState({name:"",type:"Lycée",region:"",city:"",address:"",phone:"",email:"",director_name:"",student_count:0,is_active:!0});F.useEffect(()=>{g()},[]);const g=async()=>{try{n(!0);const{data:D,error:A}=await pe.from("schools").select("*").order("name");if(A)throw A;t(D||[])}catch(D){console.error("Error loading schools:",D)}finally{n(!1)}},N=async D=>{D.preventDefault();try{if(u){const{error:A}=await pe.from("schools").update({...m,updated_at:new Date().toISOString()}).eq("id",u.id);if(A)throw A}else{const{error:A}=await pe.from("schools").insert([m]);if(A)throw A}S(),g()}catch(A){console.error("Error saving school:",A)}},w=D=>{h(D),x({name:D.name,type:D.type,region:D.region,city:D.city,address:D.address,phone:D.phone,email:D.email,director_name:D.director_name,student_count:D.student_count,is_active:D.is_active}),l(!0)},E=async D=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette école ?"))try{const{error:A}=await pe.from("schools").delete().eq("id",D);if(A)throw A;g()}catch(A){console.error("Error deleting school:",A)}},S=()=>{x({name:"",type:"Lycée",region:"",city:"",address:"",phone:"",email:"",director_name:"",student_count:0,is_active:!0}),h(null),l(!1)};return a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u?"Modifier l'école":"Nouvelle école"}),s.jsx("button",{onClick:S,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"})]}),s.jsxs("form",{onSubmit:N,className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de l'établissement *"}),s.jsx("input",{type:"text",required:!0,value:m.name,onChange:D=>x({...m,name:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Lycée Moderne d'Akoupé"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),s.jsxs("select",{required:!0,value:m.type,onChange:D=>x({...m,type:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"Lycée",children:"Lycée"}),s.jsx("option",{value:"Collège",children:"Collège"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Région *"}),s.jsx("input",{type:"text",required:!0,value:m.region,onChange:D=>x({...m,region:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: La Mé"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville *"}),s.jsx("input",{type:"text",required:!0,value:m.city,onChange:D=>x({...m,city:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: Akoupé"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse"}),s.jsx("input",{type:"text",value:m.address,onChange:D=>x({...m,address:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Téléphone"}),s.jsx("input",{type:"tel",value:m.phone,onChange:D=>x({...m,phone:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: +225 XX XX XX XX XX"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:m.email,onChange:D=>x({...m,email:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"contact@ecole.ci"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du directeur"}),s.jsx("input",{type:"text",value:m.director_name,onChange:D=>x({...m,director_name:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Nom complet"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre d'élèves"}),s.jsx("input",{type:"number",min:"0",value:m.student_count,onChange:D=>x({...m,student_count:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",placeholder:"Ex: 500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:D=>x({...m,is_active:D.target.checked}),className:"w-4 h-4 text-[#4F6D0B] border-gray-300 rounded focus:ring-[#4F6D0B]"}),s.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"École active"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:S,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:u?"Mettre à jour":"Créer l'école"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Écoles"}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Nouvelle école"})]})]}),r?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement..."})}):e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(m1,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune école"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par créer votre première école"}),s.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center space-x-2 px-6 py-3 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Créer une école"})]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(D=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:D.name}),!D.is_active&&s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:"Inactif"})]}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsx("p",{className:"font-medium text-blue-600",children:D.type}),s.jsxs("p",{children:[D.city,", ",D.region]})]})]})}),s.jsx("div",{className:"border-t pt-4 mb-4",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[D.phone&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Téléphone:"}),s.jsx("span",{className:"font-medium text-gray-900",children:D.phone})]}),D.director_name&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Directeur:"}),s.jsx("span",{className:"font-medium text-gray-900",children:D.director_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Élèves:"}),s.jsx("span",{className:"font-medium text-gray-900",children:D.student_count})]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>w(D),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsx("span",{children:"Modifier"})]}),s.jsxs("button",{onClick:()=>E(D.id),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100",children:[s.jsx(Jt,{className:"w-4 h-4"}),s.jsx("span",{children:"Supprimer"})]})]})]},D.id))})]})}function o3({onCreateProgram:e}){const[t,r]=F.useState([]),[n,a]=F.useState(!0),[l,u]=F.useState(""),[h,m]=F.useState("all"),[x,g]=F.useState("all");F.useEffect(()=>{N()},[]);const N=async()=>{a(!0);try{const{data:A,error:j}=await pe.from("programs").select("*").order("created_at",{ascending:!1});if(j)throw j;if(!A){r([]);return}const b=await Promise.all(A.map(async C=>{const{data:z}=await pe.from("program_modules").select("id").eq("program_id",C.id);let $=0;if(z&&z.length>0){const{data:U}=await pe.from("program_lessons").select("id").in("module_id",z.map(Y=>Y.id));$=(U==null?void 0:U.length)||0}return{id:C.id,title:C.title,level:C.level||"Non défini",subject:C.subject||"Non défini",teacher_id:C.teacher_id,created_at:C.created_at,lesson_count:$}}));r(b)}catch(A){console.error("Error loading programs:",A)}finally{a(!1)}},w=async A=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce programme ? Cette action est irréversible."))try{const{error:j}=await pe.from("programs").delete().eq("id",A);if(j)throw j;r(t.filter(b=>b.id!==A)),alert("Programme supprimé avec succès")}catch(j){console.error("Error deleting program:",j),alert("Erreur lors de la suppression du programme")}},E=t.filter(A=>{const j=A.title.toLowerCase().includes(l.toLowerCase())||A.subject.toLowerCase().includes(l.toLowerCase()),b=h==="all"||A.level===h,C=x==="all"||A.subject===x;return j&&b&&C}),S=Array.from(new Set(t.map(A=>A.subject))),D=Array.from(new Set(t.map(A=>A.level)));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des Programmes"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gérer tous les programmes pédagogiques"})]}),s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#3d5609] transition",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Nouveau Programme"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Rechercher un programme...",value:l,onChange:A=>u(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent"})]})}),s.jsxs("select",{value:h,onChange:A=>m(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Tous les niveaux"}),D.map(A=>s.jsx("option",{value:A,children:A},A))]}),s.jsxs("select",{value:x,onChange:A=>g(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Toutes les matières"}),S.map(A=>s.jsx("option",{value:A,children:A},A))]})]}),n?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#4F6D0B]"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):E.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(bt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"Aucun programme trouvé"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Titre"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Niveau"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Matière"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Leçons"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Date de création"}),s.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:E.map(A=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(bt,{className:"w-5 h-5 text-[#4F6D0B] mr-2"}),s.jsx("span",{className:"font-medium text-gray-900",children:A.title})]})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:A.level})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:A.subject}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("span",{className:"text-gray-600",children:[A.lesson_count," leçon",A.lesson_count!==1?"s":""]})}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[s.jsx(At,{className:"w-4 h-4 mr-1"}),new Date(A.created_at).toLocaleDateString("fr-FR")]})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("div",{className:"flex items-center justify-end space-x-2",children:s.jsx("button",{onClick:()=>w(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Supprimer",children:s.jsx(Jt,{className:"w-4 h-4"})})})})]},A.id))})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistiques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Programmes totaux"})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.reduce((A,j)=>A+(j.lesson_count||0),0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Leçons totales"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:S.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Matières"})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:D.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Niveaux"})]})]})]})]})}function c3(){const[e,t]=F.useState("students"),r=()=>{sessionStorage.removeItem("isAdmin"),window.location.href="/"};F.useEffect(()=>{sessionStorage.getItem("isAdmin")||(window.location.href="/")},[]);const n=()=>{switch(e){case"students":return s.jsx(Wm,{});case"teachers":return s.jsx(Xb,{});case"content":return s.jsx(Zb,{});case"settings":return s.jsx(e3,{});case"admins":return s.jsx(t3,{});case"questions":return s.jsx(r3,{});case"schools":return s.jsx(l3,{});case"exams":return s.jsx(n3,{});case"homeworks":return s.jsx(i3,{});case"exercises":return s.jsx(a3,{});case"math-editor":return s.jsx(Xs,{});case"poster":return s.jsx(s3,{});case"program-creator":return s.jsx(V1,{onClose:()=>t("programs")});case"programs":return s.jsx(o3,{onCreateProgram:()=>t("program-creator")});default:return s.jsx(Wm,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Jb,{currentView:e,onViewChange:t}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Yb,{onLogout:r}),s.jsx("main",{className:"flex-1 overflow-x-auto",children:s.jsx("div",{className:"p-8 min-w-[1024px]",children:n()})})]})]})}function u3(){return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[s.jsx(Os,{className:"h-5 w-5 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Conditions Générales d'Utilisation"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"1. Acceptation des Conditions"}),s.jsx("p",{className:"text-gray-700",children:"En utilisant la plateforme éducative KN, vous acceptez d'être lié par ces conditions d'utilisation. La plateforme est destinée aux élèves et enseignants de Côte d'Ivoire pour soutenir leur parcours éducatif."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"2. Inscription et Compte"}),s.jsx("p",{className:"text-gray-700",children:"L'inscription nécessite des informations exactes et complètes. Les utilisateurs sont responsables de la confidentialité de leurs identifiants et de toutes les activités sur leur compte."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"3. Utilisation du Service"}),s.jsx("p",{className:"text-gray-700",children:"Les utilisateurs s'engagent à utiliser la plateforme de manière appropriée, respectueuse et conforme aux lois en vigueur. Tout contenu partagé doit respecter les droits d'auteur."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"4. Contenu Éducatif"}),s.jsx("p",{className:"text-gray-700",children:"Le contenu est fourni à des fins éducatives. KN se réserve le droit de modifier ou retirer du contenu à tout moment. Les utilisateurs ne doivent pas reproduire ou distribuer le contenu sans autorisation."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"5. Protection des Données"}),s.jsx("p",{className:"text-gray-700",children:"Nous nous engageons à protéger vos données personnelles conformément à notre politique de confidentialité. Les informations collectées sont utilisées uniquement dans le cadre de nos services éducatifs."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"6. Modifications"}),s.jsx("p",{className:"text-gray-700",children:"KN se réserve le droit de modifier ces conditions à tout moment. Les utilisateurs seront informés des changements importants. L'utilisation continue de la plateforme constitue l'acceptation des modifications."})]})]})]})})}function d3(){return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[s.jsx(Os,{className:"h-5 w-5 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Politique de Confidentialité"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"1. Collecte des Données"}),s.jsx("p",{className:"text-gray-700",children:"Nous collectons uniquement les informations nécessaires pour fournir nos services éducatifs :"}),s.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mt-2 space-y-2",children:[s.jsx("li",{children:"Informations d'identification (nom, prénom)"}),s.jsx("li",{children:"Informations scolaires (établissement, niveau)"}),s.jsx("li",{children:"Données d'utilisation de la plateforme"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"2. Utilisation des Données"}),s.jsx("p",{className:"text-gray-700",children:"Vos données sont utilisées pour :"}),s.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mt-2 space-y-2",children:[s.jsx("li",{children:"Personnaliser votre expérience d'apprentissage"}),s.jsx("li",{children:"Améliorer nos services éducatifs"}),s.jsx("li",{children:"Communiquer des informations importantes sur votre parcours"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"3. Protection des Données"}),s.jsx("p",{className:"text-gray-700",children:"Nous mettons en œuvre des mesures de sécurité pour protéger vos données :"}),s.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mt-2 space-y-2",children:[s.jsx("li",{children:"Chiffrement des données sensibles"}),s.jsx("li",{children:"Accès restreint aux informations personnelles"}),s.jsx("li",{children:"Surveillance régulière de nos systèmes"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"4. Droits des Utilisateurs"}),s.jsx("p",{className:"text-gray-700",children:"Vous disposez des droits suivants concernant vos données :"}),s.jsxs("ul",{className:"list-disc pl-6 text-gray-700 mt-2 space-y-2",children:[s.jsx("li",{children:"Accès à vos données personnelles"}),s.jsx("li",{children:"Rectification des informations inexactes"}),s.jsx("li",{children:"Suppression de vos données"}),s.jsx("li",{children:"Opposition au traitement de vos données"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"5. Contact"}),s.jsx("p",{className:"text-gray-700",children:"Pour toute question concernant vos données personnelles, contactez notre équipe :"}),s.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-700",children:"Email : n.mady@bayaala.com"})})]})]})]})})}function h3({currentStep:e,totalSteps:t}){const r=e/t*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:["Étape ",e," sur ",t]}),s.jsxs("span",{children:[Math.round(r),"%"]})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[#4F6D0B] transition-all duration-300",style:{width:`${r}%`}})})]})}function m3({formData:e,setFormData:t}){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Informations personnelles"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),s.jsx("input",{type:"text",id:"firstName",value:e.firstName,onChange:r=>t({...e,firstName:r.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),s.jsx("input",{type:"text",id:"lastName",value:e.lastName,onChange:r=>t({...e,lastName:r.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"birthDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de naissance"}),s.jsx("input",{type:"date",id:"birthDate",value:e.birthDate,onChange:r=>t({...e,birthDate:r.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Genre"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"gender",value:"male",checked:e.gender==="male",onChange:r=>t({...e,gender:r.target.value}),className:"mr-2"}),"Masculin"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"gender",value:"female",checked:e.gender==="female",onChange:r=>t({...e,gender:r.target.value}),className:"mr-2"}),"Féminin"]})]})]})]})}function f3({formData:e,setFormData:t}){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Type d'utilisateur"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"userType",value:"élève",checked:e.userType==="élève",onChange:r=>t({...e,userType:r.target.value}),className:"mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Élève"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Je suis un(e) élève à la recherche de ressources éducatives"})]})]}),s.jsxs("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"userType",value:"enseignant",checked:e.userType==="enseignant",onChange:r=>t({...e,userType:r.target.value}),className:"mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Enseignant"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Je suis un(e) enseignant(e) souhaitant partager mes connaissances"})]})]})]})]})}function p3({formData:e,setFormData:t}){var g,N;const[r,n]=F.useState(!1),a=w=>{const E=e.teachingLevels||[],S=E.includes(w)?E.filter(j=>j!==w):[...E,w],A=(e.teachingClasses||[]).filter(j=>w==="college"?!["6e","5e","4e","3e"].includes(j):!["2nd","1ere","Tle"].includes(j));t({...e,teachingLevels:S,teachingClasses:A})},l=w=>w==="college"?["6e","5e","4e","3e"]:["2nd","1ere","Tle"],u=w=>{const E=e.teachingClasses||[],S=E.includes(w)?E.filter(D=>D!==w):[...E,w];t({...e,teachingClasses:S})},h=w=>(e.teachingClasses||[]).includes(w),m=(w,E,S)=>{const D=[...e.schools];D[w]={...D[w],[E]:S},t({...e,schools:D})},x=w=>{const E=w>3?3:w,S=Array(E).fill({}).map((D,A)=>e.schools[A]||{name:"",city:"",type:"",level:[],classes:[]});t({...e,schoolCount:w,schools:S}),n(!0)};return e.userType==="enseignant"?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Informations professionnelles"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveaux d'enseignement"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:(g=e.teachingLevels)==null?void 0:g.includes("college"),onChange:()=>a("college"),className:"mr-2"}),"Collège"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:(N=e.teachingLevels)==null?void 0:N.includes("lycee"),onChange:()=>a("lycee"),className:"mr-2"}),"Lycée"]})]})]}),e.teachingLevels.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Classes enseignées"}),s.jsx("div",{className:"space-y-4",children:e.teachingLevels.map(w=>s.jsxs("div",{className:"border-l-2 pl-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:w==="college"?"Collège":"Lycée"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:l(w).map(E=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:h(E),onChange:()=>u(E),className:"mr-2"}),E]},E))})]},w))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matière enseignée"}),s.jsxs("select",{value:e.subject,onChange:w=>t({...e,subject:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez votre matière"}),s.jsx("option",{value:"mathematiques",children:"Mathématiques"}),s.jsx("option",{value:"physique-chimie",children:"Physique-Chimie"}),s.jsx("option",{value:"svt",children:"Sciences de la Vie et de la Terre"}),s.jsx("option",{value:"francais",children:"Français"}),s.jsx("option",{value:"histoire-geo",children:"Histoire-Géographie"}),s.jsx("option",{value:"anglais",children:"Anglais"}),s.jsx("option",{value:"philosophie",children:"Philosophie"}),s.jsx("option",{value:"ses",children:"Sciences Économiques et Sociales"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'enseignant"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",checked:!e.isTemporaryTeacher,onChange:()=>t({...e,isTemporaryTeacher:!1}),className:"mr-2"}),"Enseignant permanent"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",checked:e.isTemporaryTeacher,onChange:()=>t({...e,isTemporaryTeacher:!0,schoolCount:1,schools:[]}),className:"mr-2"}),"Répétiteur (Enseignant temporaire)"]})]})]}),!e.isTemporaryTeacher&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dans combien d'établissements enseignez-vous ?"}),s.jsxs("select",{value:e.schoolCount,onChange:w=>x(Number(w.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez le nombre"}),[1,2,3,4,5].map(w=>s.jsx("option",{value:w,children:w},w))]}),e.schoolCount>3&&s.jsx("p",{className:"mt-2 text-sm text-amber-600",children:"Veuillez renseigner les informations pour vos 3 établissements principaux."})]}),!e.isTemporaryTeacher&&r&&e.schools.map((w,E)=>s.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[s.jsxs("h3",{className:"font-medium",children:["Établissement ",E+1]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'établissement"}),s.jsx("input",{type:"text",value:w.name,onChange:S=>m(E,"name",S.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville"}),s.jsx("input",{type:"text",value:w.city,onChange:S=>m(E,"city",S.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type d'établissement"}),s.jsxs("select",{value:w.type,onChange:S=>m(E,"type",S.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez le type"}),s.jsx("option",{value:"public",children:"Public"}),s.jsx("option",{value:"prive",children:"Privé"})]})]})]},E))]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Informations scolaires"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau scolaire"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"educationLevel",value:"college",checked:e.educationLevel==="college",onChange:w=>t({...e,educationLevel:w.target.value}),className:"mr-2"}),"Collège"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"educationLevel",value:"lycee",checked:e.educationLevel==="lycee",onChange:w=>t({...e,educationLevel:w.target.value}),className:"mr-2"}),"Lycée"]})]})]}),e.educationLevel==="lycee"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type d'établissement"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"schoolType",value:"general",checked:e.schoolType==="general",onChange:w=>t({...e,schoolType:w.target.value}),className:"mr-2"}),"Lycée général"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"schoolType",value:"technique",checked:e.schoolType==="technique",onChange:w=>t({...e,schoolType:w.target.value}),className:"mr-2"}),"École technique"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"schoolType",value:"professionnel",checked:e.schoolType==="professionnel",onChange:w=>t({...e,schoolType:w.target.value}),className:"mr-2"}),"École professionnelle"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentClass",className:"block text-sm font-medium text-gray-700 mb-1",children:"Classe actuelle"}),s.jsxs("select",{id:"currentClass",value:e.currentClass,onChange:w=>t({...e,currentClass:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez votre classe"}),e.educationLevel==="college"?s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"6e",children:"6ème"}),s.jsx("option",{value:"5e",children:"5ème"}),s.jsx("option",{value:"4e",children:"4ème"}),s.jsx("option",{value:"3e",children:"3ème"})]}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"2nd",children:"Seconde"}),s.jsx("option",{value:"1ere",children:"Première"}),s.jsx("option",{value:"tle",children:"Terminale"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville de l'établissement"}),s.jsx("input",{type:"text",id:"city",value:e.city,onChange:w=>t({...e,city:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"schoolName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'établissement"}),s.jsx("input",{type:"text",id:"schoolName",value:e.schoolName,onChange:w=>t({...e,schoolName:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]})]})}function x3({formData:e,setFormData:t}){const r=()=>{if(e.educationLevel==="college")return["Français","Mathématiques","Histoire-Géographie","Sciences de la Vie et de la Terre (SVT)","Physique-Chimie","Anglais","Éducation Physique et Sportive (EPS)","Éducation Civique et Morale","Arts Plastiques","Musique"];if(e.educationLevel==="lycee")switch(e.schoolType){case"general":return["Mathématiques","Physique-Chimie","Sciences de la Vie et de la Terre (SVT)","Français","Philosophie","Histoire-Géographie","Anglais","Éducation Physique et Sportive (EPS)"];case"technique":return["Mathématiques","Sciences Physiques","Sciences de l'Ingénieur","Technologie","Français","Anglais","Histoire-Géographie"];case"professionnel":return["Enseignement Professionnel","Mathématiques","Sciences Physiques","Français","Anglais","Histoire-Géographie"];default:return[]}return[]},n=u=>{const h=e.favoriteSubjects.includes(u)?e.favoriteSubjects.filter(m=>m!==u):[...e.favoriteSubjects,u];t({...e,favoriteSubjects:h})},a=u=>{const h=e.difficultSubjects.includes(u)?e.difficultSubjects.filter(m=>m!==u):[...e.difficultSubjects,u];t({...e,difficultSubjects:h})},l=r();return s.jsxs("div",{className:"space-y-6 overflow-y-auto max-h-[60vh] pr-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 sticky top-0 bg-white py-2",children:"Matières"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Matières préférées"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:l.map(u=>s.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.favoriteSubjects.includes(u),onChange:()=>n(u),className:"w-4 h-4 text-[#4F6D0B] border-gray-300 rounded focus:ring-[#4F6D0B]"}),s.jsx("span",{className:"ml-3 text-sm text-gray-700",children:u})]},`fav-${u}`))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Matières où vous rencontrez des difficultés"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:l.map(u=>s.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.difficultSubjects.includes(u),onChange:()=>a(u),className:"w-4 h-4 text-[#4F6D0B] border-gray-300 rounded focus:ring-[#4F6D0B]"}),s.jsx("span",{className:"ml-3 text-sm text-gray-700",children:u})]},`diff-${u}`))})]})]})]})}function Vm({formData:e,setFormData:t}){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Création du compte"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom d'utilisateur souhaité"}),s.jsx("input",{type:"text",value:e.username,onChange:r=>t({...e,username:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),s.jsx("input",{type:"password",value:e.password,onChange:r=>t({...e,password:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0,minLength:6}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Le mot de passe doit contenir au moins 6 caractères"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le mot de passe"}),s.jsx("input",{type:"password",value:e.passwordConfirm,onChange:r=>t({...e,passwordConfirm:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",required:!0}),e.password&&e.passwordConfirm&&e.password!==e.passwordConfirm&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Les mots de passe ne correspondent pas"})]})]})}function Gm({formData:e,setFormData:t}){return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Consentements"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:e.termsAccepted,onChange:r=>t({...e,termsAccepted:r.target.checked}),className:"mt-1 mr-3"}),s.jsxs("span",{className:"text-sm text-gray-700",children:["J'accepte les"," ",s.jsx("button",{type:"button",className:"text-[#4F6D0B] hover:underline",children:"conditions générales d'utilisation"})," ","de la plateforme"]})]}),s.jsxs("label",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:e.privacyAccepted,onChange:r=>t({...e,privacyAccepted:r.target.checked}),className:"mt-1 mr-3"}),s.jsxs("span",{className:"text-sm text-gray-700",children:["J'autorise l'utilisation des données personnelles conformément à la"," ",s.jsx("button",{type:"button",className:"text-[#4F6D0B] hover:underline",children:"politique de confidentialité"})]})]}),s.jsxs("label",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",checked:e.parentalConsent,onChange:r=>t({...e,parentalConsent:r.target.checked}),className:"mt-1 mr-3"}),s.jsx("span",{className:"text-sm text-gray-700",children:"J'accepte que mon parent/tuteur soit contacté pour les communications importantes"})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-600",children:"En vous inscrivant, vous acceptez de recevoir des communications importantes concernant votre compte, les mises à jour de la plateforme et les informations relatives à votre apprentissage. Vous pourrez gérer vos préférences de communication dans les paramètres de votre compte."})})]})}function g3({onCancel:e}){const[t,r]=F.useState(1),[n,a]=F.useState({firstName:"",lastName:"",birthDate:"",gender:"",userType:"",educationLevel:"",currentClass:"",city:"",schoolName:"",schoolType:"",teachingLevels:[],teachingClasses:[],subject:"",isTemporaryTeacher:!1,schoolCount:0,schools:[],favoriteSubjects:[],difficultSubjects:[],username:"",password:"",passwordConfirm:"",termsAccepted:!1,privacyAccepted:!1,parentalConsent:!1}),l=n.userType==="enseignant"?5:6,u=()=>{t<l&&(r(t+1),window.scrollTo(0,0))},h=()=>{t>1&&(r(t-1),window.scrollTo(0,0))},m=async w=>{w.preventDefault();try{const E={username:n.username,password:n.password,first_name:n.firstName,last_name:n.lastName,user_type:n.userType,school_name:n.schoolName||null,teaching_subject:n.subject||null,is_temporary_teacher:n.isTemporaryTeacher||!1,teaching_levels:JSON.stringify(n.teachingLevels),teaching_classes:JSON.stringify(n.teachingClasses),current_class:n.currentClass||null},{data:S,error:D}=await pe.from("local_users").insert([E]).select().single();if(D){alert("Erreur lors de l'inscription: "+D.message);return}sessionStorage.setItem("currentUser",JSON.stringify({id:S.id,firstName:n.firstName,lastName:n.lastName,userType:n.userType,username:n.username})),alert("Inscription réussie!"),window.location.href="/"}catch(E){console.error("Error:",E),alert("Erreur lors de l'inscription: "+E.message)}},x=()=>{switch(t){case 1:return s.jsx(m3,{formData:n,setFormData:a});case 2:return s.jsx(f3,{formData:n,setFormData:a});case 3:return s.jsx(p3,{formData:n,setFormData:a});case 4:return n.userType==="élève"?s.jsx(x3,{formData:n,setFormData:a}):s.jsx(Vm,{formData:n,setFormData:a});case 5:return n.userType==="élève"?s.jsx(Vm,{formData:n,setFormData:a}):s.jsx(Gm,{formData:n,setFormData:a});case 6:return s.jsx(Gm,{formData:n,setFormData:a});default:return null}},g=t===l,N=()=>{switch(t){case 1:return n.firstName&&n.lastName&&n.birthDate&&n.gender;case 2:return n.userType;case 3:return n.userType==="enseignant"?n.teachingLevels.length>0&&n.teachingClasses.length>0&&n.subject&&n.schoolCount>0&&n.schools.every(w=>w.name&&w.city&&w.type):n.educationLevel&&n.currentClass&&n.city&&n.schoolName;case 4:return n.userType==="élève"?n.favoriteSubjects.length>0:n.username&&n.password&&n.password===n.passwordConfirm;case 5:return n.userType==="élève"?n.username&&n.password&&n.password===n.passwordConfirm:n.termsAccepted&&n.privacyAccepted;case 6:return n.termsAccepted&&n.privacyAccepted;default:return!1}};return s.jsxs("div",{className:"max-h-[80vh] overflow-y-auto",children:[s.jsx("div",{className:"sticky top-0 bg-white border-b z-10 p-6",children:s.jsx(h3,{currentStep:t,totalSteps:l})}),s.jsxs("form",{onSubmit:g?m:w=>w.preventDefault(),className:"p-6",children:[s.jsx("div",{className:"mt-6",children:x()}),s.jsxs("div",{className:"mt-8 flex justify-between",children:[s.jsx("div",{children:t>1&&s.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Précédent"})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),g?s.jsx("button",{type:"submit",disabled:!N(),className:`px-4 py-2 text-white rounded-lg ${N()?"bg-[#4F6D0B] hover:bg-[#4F6D0B]/90":"bg-gray-300 cursor-not-allowed"}`,children:"S'inscrire"}):s.jsx("button",{type:"button",onClick:u,disabled:!N(),className:`px-4 py-2 text-white rounded-lg ${N()?"bg-[#4F6D0B] hover:bg-[#4F6D0B]/90":"bg-gray-300 cursor-not-allowed"}`,children:"Suivant"})]})]})]})]})}function y3(){return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[s.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[s.jsx(Os,{className:"h-5 w-5 mr-2"}),"Retour"]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:s.jsx(g3,{onCancel:()=>window.history.back()})})]})})}function v3({examType:e,examPeriod:t,examZone:r,examSeries:n,examSubject:a,onExamTypeChange:l,onPeriodChange:u,onZoneChange:h,onSeriesChange:m,onSubjectChange:x,onNext:g}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'examen"}),s.jsxs("select",{value:e,onChange:N=>l(N.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionnez le type d'examen"}),s.jsx("option",{value:"bac",children:"Baccalauréat"}),s.jsx("option",{value:"bac_blanc",children:"Baccalauréat Blanc"}),s.jsx("option",{value:"bepc",children:"BEPC"}),s.jsx("option",{value:"bepc_blanc",children:"BEPC Blanc"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Période"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("select",{value:t.month,onChange:N=>u("month",N.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Mois"}),Array.from({length:12},(N,w)=>s.jsx("option",{value:String(w+1).padStart(2,"0"),children:new Date(2e3,w).toLocaleString("default",{month:"long"})},w+1))]}),s.jsxs("select",{value:t.year,onChange:N=>u("year",N.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Année"}),Array.from({length:10},(N,w)=>s.jsx("option",{value:String(2024-w),children:2024-w},w))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zone"}),s.jsxs("select",{value:r,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionnez la zone"}),s.jsx("option",{value:"national",children:"National"}),s.jsx("option",{value:"abidjan1",children:"DREN Abidjan 1"}),s.jsx("option",{value:"abidjan2",children:"DREN Abidjan 2"}),s.jsx("option",{value:"yamoussoukro",children:"DREN Yamoussoukro"}),s.jsx("option",{value:"bouake",children:"DREN Bouaké"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Série"}),s.jsxs("select",{value:n,onChange:N=>m(N.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionnez la série"}),s.jsx("option",{value:"neutre",children:"Neutre"}),s.jsx("option",{value:"a1",children:"A1"}),s.jsx("option",{value:"c",children:"C"}),s.jsx("option",{value:"d",children:"D"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matière"}),s.jsxs("select",{value:a,onChange:N=>x(N.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionnez la matière"}),s.jsx("option",{value:"maths",children:"Mathématiques"}),s.jsx("option",{value:"physique",children:"Physique-Chimie"}),s.jsx("option",{value:"svt",children:"SVT"})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{onClick:g,className:"w-full px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Suivant"})})]})}function b3({exercises:e,selectedExercise:t,onExerciseSelect:r,onAddExercise:n,onAddQuestion:a}){var l;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Exercices disponibles"}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.map(u=>s.jsxs("button",{onClick:()=>r(u),className:`p-4 border rounded-lg hover:bg-gray-50 text-center ${(t==null?void 0:t.id)===u.id?"border-[#4F6D0B] bg-[#4F6D0B]/5":""}`,children:["Exercice ",u.number]},u.id)),s.jsx("button",{onClick:n,className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 text-gray-500 flex items-center justify-center",children:"+ Ajouter"})]}),t&&s.jsxs("div",{className:"mt-8",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Questions de l'exercice ",t.number]}),s.jsxs("div",{className:"space-y-4",children:[(l=t.questions)==null?void 0:l.map(u=>s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h4",{className:"font-medium",children:["Question ",u.number]}),s.jsx("button",{className:"text-[#4F6D0B] hover:text-[#4F6D0B]/80",children:"Modifier"})]})},u.id)),s.jsx("button",{onClick:a,className:"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 text-gray-500",children:"+ Ajouter une question"})]})]})]})}function w3({module:e,difficulty:t,onModuleChange:r,onDifficultyChange:n,onNext:a,onBack:l}){return s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Module"}),s.jsxs("select",{value:e,onChange:u=>r(u.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionnez un module"}),s.jsx("option",{value:"algebre",children:"Algèbre"}),s.jsx("option",{value:"geometrie",children:"Géométrie"}),s.jsx("option",{value:"analyse",children:"Analyse"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau de difficulté"}),s.jsxs("select",{value:t,onChange:u=>n(u.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B]",children:[s.jsx("option",{value:"",children:"Sélectionnez un niveau"}),s.jsx("option",{value:"facile",children:"Facile"}),s.jsx("option",{value:"moyen",children:"Moyen"}),s.jsx("option",{value:"difficile",children:"Difficile"})]})]}),s.jsxs("div",{className:"flex justify-between pt-6",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"}),s.jsx("button",{onClick:a,className:"px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Continuer"})]})]})}const Qm=(e,t)=>{F.useEffect(()=>{const r=n=>{const a=n.target;e.current&&!e.current.contains(a)&&t()};return document.addEventListener("mousedown",r,!0),document.addEventListener("touchstart",r,!0),()=>{document.removeEventListener("mousedown",r,!0),document.removeEventListener("touchstart",r,!0)}},[e,t])},j3=[{title:"Opérations de base",items:[{label:"+",latex:"+",description:"Addition"},{label:"−",latex:"-",description:"Soustraction"},{label:"×",latex:"\\times",description:"Multiplication"},{label:"÷",latex:"\\div",description:"Division"},{label:"=",latex:"=",description:"Égal"},{label:"≠",latex:"\\neq",description:"Différent"}]},{title:"Fractions et Racines",items:[{label:"a/b",latex:"\\frac{a}{b}",description:"Fraction"},{label:"√",latex:"\\sqrt{x}",description:"Racine carrée"},{label:"∛",latex:"\\sqrt[3]{x}",description:"Racine cubique"},{label:"∜",latex:"\\sqrt[4]{x}",description:"Racine quatrième"}]},{title:"Exposants et Indices",items:[{label:"x²",latex:"x^2",description:"Carré"},{label:"x³",latex:"x^3",description:"Cube"},{label:"x⁻¹",latex:"x^{-1}",description:"Inverse"},{label:"xⁿ",latex:"x^n",description:"Puissance n"}]},{title:"Calcul",items:[{label:"∫",latex:"\\int",description:"Intégrale"},{label:"∑",latex:"\\sum",description:"Somme"},{label:"∏",latex:"\\prod",description:"Produit"},{label:"∂",latex:"\\partial",description:"Dérivée partielle"},{label:"lim",latex:"\\lim",description:"Limite"},{label:"→",latex:"\\to",description:"Tend vers"}]}],N3=[{title:"Formes de Base",items:[{label:"Point",icon:"•",description:"Point simple"},{label:"Segment",icon:"—",description:"Segment de droite"},{label:"Droite",icon:"⟷",description:"Droite infinie"},{label:"Demi-droite",icon:"→",description:"Demi-droite"},{label:"Cercle",icon:"○",description:"Cercle"},{label:"Arc",icon:"⌒",description:"Arc de cercle"}]},{title:"Polygones",items:[{label:"Triangle",icon:"△",description:"Triangle quelconque"},{label:"Triangle Rectangle",icon:"◿",description:"Triangle rectangle"},{label:"Rectangle",icon:"▭",description:"Rectangle"},{label:"Parallélogramme",icon:"⏢",description:"Parallélogramme"},{label:"Losange",icon:"◇",description:"Losange"},{label:"Trapèze",icon:"⏢",description:"Trapèze"}]}];function k3({onInsertEquation:e,onInsertFigure:t}){const[r,n]=F.useState(!1),[a,l]=F.useState(!1),u=F.useRef(null),h=F.useRef(null),m=F.useCallback(()=>{n(!1)},[]),x=F.useCallback(()=>{l(!1)},[]);Qm(u,m),Qm(h,x);const g=S=>{e&&e(S),m()},N=S=>{t&&t(S),x()},w=()=>{n(!r),l(!1)},E=()=>{l(!a),n(!1)};return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-t-lg shadow-sm",children:[s.jsxs("div",{className:"flex items-center p-2 space-x-1 border-b border-gray-200",children:[s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(h1,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(v1,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(w1,{className:"h-4 w-4 text-gray-700"})}),s.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(u1,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(c1,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(d1,{className:"h-4 w-4 text-gray-700"})}),s.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(dy,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(uy,{className:"h-4 w-4 text-gray-700"})}),s.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(_y,{className:"h-4 w-4 text-gray-700"})}),s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",children:s.jsx(vy,{className:"h-4 w-4 text-gray-700"})})]}),s.jsxs("div",{className:"flex items-center p-2 space-x-1",children:[s.jsxs("div",{className:"relative",ref:u,children:[s.jsxs("button",{className:"flex items-center px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded",onClick:w,children:[s.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Équations",s.jsx(Wn,{className:"h-4 w-4 ml-1"})]}),r&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 w-[420px] max-h-[60vh] overflow-y-auto",children:j3.map(S=>s.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[s.jsx("div",{className:"px-3 py-1.5 bg-gray-50 font-medium text-xs text-gray-700",children:S.title}),s.jsx("div",{className:"grid grid-cols-2 gap-0.5 p-1",children:S.items.map(D=>s.jsxs("button",{onClick:()=>g(D.latex),className:"flex items-center px-2 py-1 text-xs hover:bg-gray-100 rounded w-full text-left group",title:D.description,children:[s.jsx("span",{className:"text-sm font-mono min-w-[50px] text-gray-900",children:D.label}),s.jsx("span",{className:"text-gray-500 text-[11px] group-hover:text-gray-900",children:D.description})]},D.latex))})]},S.title))})]}),s.jsxs("div",{className:"relative",ref:h,children:[s.jsxs("button",{className:"flex items-center px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded",onClick:E,children:[s.jsx(oy,{className:"h-4 w-4 mr-2"}),"Figures",s.jsx(Wn,{className:"h-4 w-4 ml-1"})]}),a&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 w-[420px] max-h-[60vh] overflow-y-auto",children:N3.map(S=>s.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[s.jsx("div",{className:"px-3 py-1.5 bg-gray-50 font-medium text-xs text-gray-700",children:S.title}),s.jsx("div",{className:"grid grid-cols-2 gap-0.5 p-1",children:S.items.map(D=>s.jsxs("button",{onClick:()=>N(D),className:"flex items-center px-2 py-1 text-xs hover:bg-gray-100 rounded w-full text-left group",title:D.description,children:[s.jsx("span",{className:"text-sm font-mono min-w-[50px] text-gray-900",children:D.icon}),s.jsxs("span",{className:"text-gray-500 text-[11px] group-hover:text-gray-900",children:[D.label," - ",D.description]})]},D.label))})]},S.title))})]})]})]})}const G1=F.forwardRef(({content:e,setContent:t},r)=>{const n=F.useRef(null);F.useImperativeHandle(r,()=>({getSelectionStart:()=>{var l;return((l=n.current)==null?void 0:l.selectionStart)||0},focus:()=>{var l;return(l=n.current)==null?void 0:l.focus()}}));const a=(l,u="",h=0)=>{const m=[];let x=0;for(;x<l.length;){const g=`${u}-${x}`;if(l[x]==="["){let N=1,w=x+1;for(;w<l.length&&N>0;)l[w]==="["&&N++,l[w]==="]"&&N--,w++;const E=l.slice(x+1,w-1);if(l[w]==="/"&&l[w+1]==="["){let S=w+2;N=1;let D=S;for(;D<l.length&&N>0;)l[D]==="["&&N++,l[D]==="]"&&N--,D++;const A=l.slice(S,D-1),j=Math.max(.9-h*.1,.7);m.push(s.jsxs("span",{className:"inline-flex flex-col items-center",style:{verticalAlign:"middle",margin:`0 ${h===0?"0.3em":"0.15em"}`,transform:`scale(${j})`,transformOrigin:"center center",display:"inline-flex",position:"relative",top:"0"},children:[s.jsx("span",{className:"text-center flex items-center justify-center",style:{minWidth:"1.2em",padding:"0.1em 0.2em",lineHeight:"1.2"},children:a(E,`num-${g}`,h+1)}),s.jsx("span",{className:"border-t border-black",style:{width:"100%",minWidth:"1.5em",margin:"0.1em 0",display:"block"}}),s.jsx("span",{className:"text-center flex items-center justify-center",style:{minWidth:"1.2em",padding:"0.1em 0.2em",lineHeight:"1.2"},children:a(A,`den-${g}`,h+1)})]},`frac-${g}`)),x=D}else m.push(s.jsx("span",{style:{verticalAlign:"middle"},children:a(E,`inner-${g}`,h)},`expr-${g}`)),x=w}else{let N="";for(;x<l.length&&l[x]!=="["&&!["/","]"].includes(l[x]);)N+=l[x],x++;if(N){const w=/^[+\-=×÷]$/.test(N.trim());m.push(s.jsx("span",{style:{display:"inline-block",verticalAlign:w?"middle":"baseline",lineHeight:"1.2",padding:"0 0.1em"},children:N},`text-${g}`))}}}return m};return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[s.jsx("textarea",{ref:n,value:e,onChange:l=>t(l.target.value),className:"w-full min-h-[250px] p-4 rounded-lg outline-none resize-none border-none",placeholder:"Commencez à écrire..."}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsx("div",{className:"text-lg",style:{lineHeight:"2.5"},children:a(e,"root")})}),s.jsxs("div",{className:"flex justify-between px-4 py-3 border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:[e.length," caractères"]}),s.jsxs("div",{className:"space-x-4",children:[s.jsx("button",{className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{className:"px-4 py-2 text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:"Publier"})]})]})]})});G1.displayName="Editor";function S3(){const[e,t]=F.useState(""),[r,n]=F.useState(!1),a=F.useRef(null),[l,u]=F.useState(""),h=()=>{var g;const m=((g=a.current)==null?void 0:g.getSelectionStart())||e.length,x=e.slice(0,m)+l+e.slice(m);t(x),n(!1),u(""),setTimeout(()=>{var N;(N=a.current)==null||N.focus()},0)};return s.jsxs("div",{className:"h-full bg-gray-50",children:[s.jsx(k3,{onInsertEquation:()=>n(!0)}),s.jsx(G1,{ref:a,content:e,setContent:t}),r&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Éditeur d'équations"}),s.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsx(Ss,{className:"h-5 w-5 text-gray-500"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exemple d'équation"}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-lg font-mono",children:"A = 3 + [3]/[1 + [1]/[3 + [1]/[3]]]"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guide de syntaxe"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:"• Utilisez [numerateur]/[denominateur] pour les fractions"}),s.jsx("p",{children:"• Les fractions peuvent être imbriquées"}),s.jsx("p",{children:"• Exemple: [1]/[2] affiche ½"}),s.jsx("p",{children:"• Pour une fraction complexe: [a+b]/[c+d]"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Votre équation"}),s.jsx("textarea",{value:l,onChange:m=>u(m.target.value),className:"w-full h-32 p-3 border rounded-lg focus:ring-2 focus:ring-[#4F6D0B] focus:border-[#4F6D0B] font-mono",placeholder:"Entrez votre équation ici..."})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{onClick:h,className:"px-4 py-2 text-white bg-[#4F6D0B] rounded-lg hover:bg-[#4F6D0B]/90",children:"Insérer"})]})]})]})})]})}function _3(){const[e,t]=F.useState(1),[r,n]=F.useState({type:"",period:{month:"",year:""},zone:"",series:"",subject:""}),[a,l]=F.useState(null),[u,h]=F.useState(!1),[m,x]=F.useState(1),[g,N]=F.useState(""),[w,E]=F.useState(""),[S,D]=F.useState([]),[A,j]=F.useState(!1);F.useEffect(()=>{b()},[]);const b=async()=>{try{const Z=JSON.parse(sessionStorage.getItem("allQuestions")||"[]");D(Z)}catch(Z){console.error("Erreur:",Z)}},C=Z=>{sessionStorage.setItem("previewQuestionId",Z),window.location.href="/quick-quiz"},z=[{id:"1",number:1,questions:[{id:"1",number:1}]},{id:"2",number:2,questions:[{id:"2",number:1}]},{id:"3",number:3,questions:[{id:"3",number:1}]}],$=()=>{t(2)},U=()=>{h(!0),x(1),l(null)},Y=()=>{h(!0),x(1)};return e===1?s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsx(v3,{examType:r.type,examPeriod:r.period,examZone:r.zone,examSeries:r.series,examSubject:r.subject,onExamTypeChange:Z=>n({...r,type:Z}),onPeriodChange:(Z,X)=>n({...r,period:{...r.period,[Z]:X}}),onZoneChange:Z=>n({...r,zone:Z}),onSeriesChange:Z=>n({...r,series:Z}),onSubjectChange:Z=>n({...r,subject:Z}),onNext:$})}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:A?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Liste des Questions"}),s.jsx("button",{onClick:()=>j(!1),className:"text-gray-600 hover:text-gray-900",children:"← Retour"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matière"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Niveau"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Module"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Aucune question disponible"})}):S.map(Z=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900 line-clamp-2",children:Z.text})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:Z.subject})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:Z.level})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:Z.module})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("button",{onClick:()=>C(Z.id),className:"inline-flex items-center px-3 py-1.5 bg-[#4F6D0B] text-white text-sm rounded-lg hover:bg-[#4F6D0B]/90",children:[s.jsx(eo,{className:"h-4 w-4 mr-1"}),"Aperçu"]})})]},Z.id))})]})})]}):u?m===1?s.jsx(w3,{module:g,difficulty:w,onModuleChange:N,onDifficultyChange:E,onNext:()=>x(2),onBack:()=>h(!1)}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[m===2&&"Contenu",m===3&&"Question",m===4&&"Propositions de réponses",m===5&&"Explication de la réponse",m===6&&"Astuce"]}),s.jsxs("div",{className:"space-x-3",children:[s.jsx("button",{onClick:()=>x(Z=>Z-1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Retour"}),s.jsx("button",{onClick:()=>m<6?x(Z=>Z+1):null,className:"px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:m<6?"Suivant":"Terminer"})]})]}),s.jsx(S3,{})]}):s.jsxs("div",{children:[s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-[#4F6D0B] text-white rounded-lg hover:bg-[#4F6D0B]/90",children:"Voir toutes les questions"})}),s.jsx(b3,{exercises:z,selectedExercise:a,onExerciseSelect:l,onAddExercise:U,onAddQuestion:Y})]})})}function C3(){const e=window.location.pathname;return e==="/terms"?s.jsx(u3,{}):e==="/privacy"?s.jsx(d3,{}):e==="/register"?s.jsx(y3,{}):e==="/exams"?s.jsx(_3,{}):e.startsWith("/admin")?s.jsx(c3,{}):s.jsx(Qb,{})}o1(document.getElementById("root")).render(s.jsx(F.StrictMode,{children:s.jsx(C3,{})}));
